!function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=60)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(3),i=r(2);e.Factory={addGetterSetter:function(t,e,r,n,i){this.addGetter(t,e,r),this.addSetter(t,e,n,i),this.addOverloadedGetterSetter(t,e)},addGetter:function(t,e,r){var i="get"+n.Util._capitalize(e);t.prototype[i]=t.prototype[i]||function(){var t=this.attrs[e];return void 0===t?r:t}},addSetter:function(t,r,i,o){var a="set"+n.Util._capitalize(r);t.prototype[a]||e.Factory.overWriteSetter(t,r,i,o)},overWriteSetter:function(t,e,r,i){var o="set"+n.Util._capitalize(e);t.prototype[o]=function(t){return r&&null!=t&&(t=r.call(this,t,e)),this._setAttr(e,t),i&&i.call(this),this}},addComponentsGetterSetter:function(t,e,r,o,a){var s,l,c=r.length,u=n.Util._capitalize,f="get"+u(e),h="set"+u(e);t.prototype[f]=function(){var t={};for(s=0;s<c;s++)t[l=r[s]]=this.getAttr(e+u(l));return t};var p=i.getComponentValidator(r);t.prototype[h]=function(t){var r,n=this.attrs[e];for(r in o&&(t=o.call(this,t)),p&&p.call(this,t,e),t)t.hasOwnProperty(r)&&this._setAttr(e+u(r),t[r]);return this._fireChangeEvent(e,n,t),a&&a.call(this),this},this.addOverloadedGetterSetter(t,e)},addOverloadedGetterSetter:function(t,e){var r=n.Util._capitalize(e),i="set"+r,o="get"+r;t.prototype[e]=function(){return arguments.length?(this[i](arguments[0]),this):this[o]()}},addDeprecatedGetterSetter:function(t,e,r,i){n.Util.error("Adding deprecated "+e);var o="get"+n.Util._capitalize(e),a=e+" property is deprecated and will be removed soon. Look at Konva change log for more information.";t.prototype[o]=function(){n.Util.error(a);var t=this.attrs[e];return void 0===t?r:t},this.addSetter(t,e,i,(function(){n.Util.error(a)})),this.addOverloadedGetterSetter(t,e)},backCompat:function(t,e){n.Util.each(e,(function(e,r){var i=t.prototype[r],o="get"+n.Util._capitalize(e),a="set"+n.Util._capitalize(e);function s(){i.apply(this,arguments),n.Util.error('"'+e+'" method is deprecated and will be removed soon. Use ""'+r+'" instead.')}t.prototype[e]=s,t.prototype[o]=s,t.prototype[a]=s}))},afterSetFilter:function(){this._filterUpToDate=!1}}},function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r=Math.PI/180;var n=function(t){var e=t.indexOf("msie ");if(e>0)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(t.indexOf("trident/")>0){var r=t.indexOf("rv:");return parseInt(t.substring(r+3,t.indexOf(".",r)),10)}var n=t.indexOf("edge/");return n>0&&parseInt(t.substring(n+5,t.indexOf(".",n)),10)};e._parseUA=function(t){var e=t.toLowerCase(),r=/(chrome)[ /]([\w.]+)/.exec(e)||/(webkit)[ /]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ /]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[],i=!!t.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i),o=!!t.match(/IEMobile/i);return{browser:r[1]||"",version:r[2]||"0",isIE:n(e),mobile:i,ieMobile:o}},e.glob=void 0!==t?t:"undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope?self:{},e.Konva={_global:e.glob,version:"4.2.2",isBrowser:"undefined"!=typeof window&&("[object Window]"==={}.toString.call(window)||"[object global]"==={}.toString.call(window)),isUnminified:/param/.test(function(t){}.toString()),dblClickWindow:400,getAngle:function(t){return e.Konva.angleDeg?t*r:t},enableTrace:!1,_pointerEventsEnabled:!1,hitOnDragEnabled:!1,captureTouchEventsEnabled:!1,listenClickTap:!1,inDblClickWindow:!1,pixelRatio:void 0,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging:function(){return e.Konva.DD.isDragging},isDragReady:function(){return!!e.Konva.DD.node},UA:e._parseUA(e.glob.navigator&&e.glob.navigator.userAgent||""),document:e.glob.document,_injectGlobal:function(t){e.glob.Konva=t},_parseUA:e._parseUA},e._NODES_REGISTRY={},e._registerNode=function(t){e._NODES_REGISTRY[t.prototype.getClassName()]=t,e.Konva[t.prototype.getClassName()]=t}}).call(this,r(22))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=r(3);function o(t){return i.Util._isString(t)?'"'+t+'"':"[object Number]"===Object.prototype.toString.call(t)||i.Util._isBoolean(t)?t:Object.prototype.toString.call(t)}e.RGBComponent=function(t){return t>255?255:t<0?0:Math.round(t)},e.alphaComponent=function(t){return t>1?1:t<1e-4?1e-4:t},e.getNumberValidator=function(){if(n.Konva.isUnminified)return function(t,e){return i.Util._isNumber(t)||i.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),t}},e.getNumberOrAutoValidator=function(){if(n.Konva.isUnminified)return function(t,e){return i.Util._isNumber(t)||"auto"===t||i.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),t}},e.getStringValidator=function(){if(n.Konva.isUnminified)return function(t,e){return i.Util._isString(t)||i.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),t}},e.getFunctionValidator=function(){if(n.Konva.isUnminified)return function(t,e){return i.Util._isFunction(t)||i.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a function.'),t}},e.getNumberArrayValidator=function(){if(n.Konva.isUnminified)return function(t,e){return i.Util._isArray(t)?t.forEach((function(t){i.Util._isNumber(t)||i.Util.warn('"'+e+'" attribute has non numeric element '+t+". Make sure that all elements are numbers.")})):i.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.'),t}},e.getBooleanValidator=function(){if(n.Konva.isUnminified)return function(t,e){return!0===t||!1===t||i.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),t}},e.getComponentValidator=function(t){if(n.Konva.isUnminified)return function(e,r){return i.Util.isObject(e)||i.Util.warn(o(e)+' is a not valid value for "'+r+'" attribute. The value should be an object with properties '+t),e}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=function(){function t(){}return t.toCollection=function(e){var r,n=new t,i=e.length;for(r=0;r<i;r++)n.push(e[r]);return n},t._mapMethod=function(e){t.prototype[e]=function(){var t,r=this.length,n=[].slice.call(arguments);for(t=0;t<r;t++)this[t][e].apply(this[t],n);return this}},t.mapMethods=function(e){var r=e.prototype;for(var n in r)t._mapMethod(n)},t}();e.Collection=i,i.prototype=[],i.prototype.each=function(t){for(var e=0;e<this.length;e++)t(this[e],e)},i.prototype.toArray=function(){var t,e=[],r=this.length;for(t=0;t<r;t++)e.push(this[t]);return e};var o=function(){function t(t){void 0===t&&(t=[1,0,0,1,0,0]),this.m=t&&t.slice()||[1,0,0,1,0,0]}return t.prototype.copy=function(){return new t(this.m)},t.prototype.point=function(t){var e=this.m;return{x:e[0]*t.x+e[2]*t.y+e[4],y:e[1]*t.x+e[3]*t.y+e[5]}},t.prototype.translate=function(t,e){return this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e,this},t.prototype.scale=function(t,e){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),n=this.m[0]*e+this.m[2]*r,i=this.m[1]*e+this.m[3]*r,o=this.m[0]*-r+this.m[2]*e,a=this.m[1]*-r+this.m[3]*e;return this.m[0]=n,this.m[1]=i,this.m[2]=o,this.m[3]=a,this},t.prototype.getTranslation=function(){return{x:this.m[4],y:this.m[5]}},t.prototype.skew=function(t,e){var r=this.m[0]+this.m[2]*e,n=this.m[1]+this.m[3]*e,i=this.m[2]+this.m[0]*t,o=this.m[3]+this.m[1]*t;return this.m[0]=r,this.m[1]=n,this.m[2]=i,this.m[3]=o,this},t.prototype.multiply=function(t){var e=this.m[0]*t.m[0]+this.m[2]*t.m[1],r=this.m[1]*t.m[0]+this.m[3]*t.m[1],n=this.m[0]*t.m[2]+this.m[2]*t.m[3],i=this.m[1]*t.m[2]+this.m[3]*t.m[3],o=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],a=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=e,this.m[1]=r,this.m[2]=n,this.m[3]=i,this.m[4]=o,this.m[5]=a,this},t.prototype.invert=function(){var t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),e=this.m[3]*t,r=-this.m[1]*t,n=-this.m[2]*t,i=this.m[0]*t,o=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),a=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=e,this.m[1]=r,this.m[2]=n,this.m[3]=i,this.m[4]=o,this.m[5]=a,this},t.prototype.getMatrix=function(){return this.m},t.prototype.setAbsolutePosition=function(t,e){var r=this.m[0],n=this.m[1],i=this.m[2],o=this.m[3],a=this.m[4],s=(r*(e-this.m[5])-n*(t-a))/(r*o-n*i),l=(t-a-i*s)/r;return this.translate(l,s)},t}();e.Transform=o;var a=Math.PI/180,s=180/Math.PI,l={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},c=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,u=[];e.Util={_isElement:function(t){return!(!t||1!=t.nodeType)},_isFunction:function(t){return!!(t&&t.constructor&&t.call&&t.apply)},_isPlainObject:function(t){return!!t&&t.constructor===Object},_isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},_isNumber:function(t){return"[object Number]"===Object.prototype.toString.call(t)&&!isNaN(t)&&isFinite(t)},_isString:function(t){return"[object String]"===Object.prototype.toString.call(t)},_isBoolean:function(t){return"[object Boolean]"===Object.prototype.toString.call(t)},isObject:function(t){return t instanceof Object},isValidSelector:function(t){if("string"!=typeof t)return!1;var e=t[0];return"#"===e||"."===e||e===e.toUpperCase()},_sign:function(t){return 0===t?0:t>0?1:-1},requestAnimFrame:function(t){u.push(t),1===u.length&&requestAnimationFrame((function(){var t=u;u=[],t.forEach((function(t){t()}))}))},createCanvasElement:function(){var t=document.createElement("canvas");try{t.style=t.style||{}}catch(t){}return t},createImageElement:function(){return document.createElement("img")},_isInDocument:function(t){for(;t=t.parentNode;)if(t==document)return!0;return!1},_simplifyArray:function(t){var r,n,i=[],o=t.length,a=e.Util;for(r=0;r<o;r++)n=t[r],a._isNumber(n)?n=Math.round(1e3*n)/1e3:a._isString(n)||(n=n.toString()),i.push(n);return i},_urlToImage:function(t,e){var r=new n.glob.Image;r.onload=function(){e(r)},r.src=t},_rgbToHex:function(t,e,r){return((1<<24)+(t<<16)+(e<<8)+r).toString(16).slice(1)},_hexToRgb:function(t){t=t.replace("#","");var e=parseInt(t,16);return{r:e>>16&255,g:e>>8&255,b:255&e}},getRandomColor:function(){for(var t=(16777215*Math.random()<<0).toString(16);t.length<6;)t="0"+t;return"#"+t},get:function(t,e){return void 0===t?e:t},getRGB:function(t){var e;return t in l?{r:(e=l[t])[0],g:e[1],b:e[2]}:"#"===t[0]?this._hexToRgb(t.substring(1)):"rgb("===t.substr(0,4)?(e=c.exec(t.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},colorToRGBA:function(t){return t=t||"black",e.Util._namedColorToRBA(t)||e.Util._hex3ColorToRGBA(t)||e.Util._hex6ColorToRGBA(t)||e.Util._rgbColorToRGBA(t)||e.Util._rgbaColorToRGBA(t)||e.Util._hslColorToRGBA(t)},_namedColorToRBA:function(t){var e=l[t.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null},_rgbColorToRGBA:function(t){if(0===t.indexOf("rgb(")){var e=(t=t.match(/rgb\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}},_rgbaColorToRGBA:function(t){if(0===t.indexOf("rgba(")){var e=(t=t.match(/rgba\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:e[3]}}},_hex6ColorToRGBA:function(t){if("#"===t[0]&&7===t.length)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:1}},_hex3ColorToRGBA:function(t){if("#"===t[0]&&4===t.length)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:1}},_hslColorToRGBA:function(t){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(t)){var e=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t),r=(e[0],e.slice(1)),n=Number(r[0])/360,i=Number(r[1])/100,o=Number(r[2])/100,a=void 0,s=void 0,l=void 0;if(0===i)return l=255*o,{r:Math.round(l),g:Math.round(l),b:Math.round(l),a:1};for(var c=2*o-(a=o<.5?o*(1+i):o+i-o*i),u=[0,0,0],f=0;f<3;f++)(s=n+1/3*-(f-1))<0&&s++,s>1&&s--,l=6*s<1?c+6*(a-c)*s:2*s<1?a:3*s<2?c+(a-c)*(2/3-s)*6:c,u[f]=255*l;return{r:Math.round(u[0]),g:Math.round(u[1]),b:Math.round(u[2]),a:1}}},haveIntersection:function(t,e){return!(e.x>t.x+t.width||e.x+e.width<t.x||e.y>t.y+t.height||e.y+e.height<t.y)},cloneObject:function(t){var e={};for(var r in t)this._isPlainObject(t[r])?e[r]=this.cloneObject(t[r]):this._isArray(t[r])?e[r]=this.cloneArray(t[r]):e[r]=t[r];return e},cloneArray:function(t){return t.slice(0)},_degToRad:function(t){return t*a},_radToDeg:function(t){return t*s},_capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},throw:function(t){throw new Error("Konva error: "+t)},error:function(t){console.error("Konva error: "+t)},warn:function(t){n.Konva.showWarnings&&console.warn("Konva warning: "+t)},extend:function(t,e){function r(){this.constructor=t}r.prototype=e.prototype;var n=t.prototype;for(var i in t.prototype=new r,n)n.hasOwnProperty(i)&&(t.prototype[i]=n[i]);t.__super__=e.prototype,t.super=e},_getControlPoints:function(t,e,r,n,i,o,a){var s=Math.sqrt(Math.pow(r-t,2)+Math.pow(n-e,2)),l=Math.sqrt(Math.pow(i-r,2)+Math.pow(o-n,2)),c=a*s/(s+l),u=a*l/(s+l);return[r-c*(i-t),n-c*(o-e),r+u*(i-t),n+u*(o-e)]},_expandPoints:function(t,r){var n,i,o=t.length,a=[];for(n=2;n<o-2;n+=2)i=e.Util._getControlPoints(t[n-2],t[n-1],t[n],t[n+1],t[n+2],t[n+3],r),a.push(i[0]),a.push(i[1]),a.push(t[n]),a.push(t[n+1]),a.push(i[2]),a.push(i[3]);return a},each:function(t,e){for(var r in t)e(r,t[r])},_inRange:function(t,e,r){return e<=t&&t<r},_getProjectionToSegment:function(t,e,r,n,i,o){var a,s,l,c=(t-r)*(t-r)+(e-n)*(e-n);if(0==c)a=t,s=e,l=(i-r)*(i-r)+(o-n)*(o-n);else{var u=((i-t)*(r-t)+(o-e)*(n-e))/c;u<0?(a=t,s=e,l=(t-i)*(t-i)+(e-o)*(e-o)):u>1?(a=r,s=n,l=(r-i)*(r-i)+(n-o)*(n-o)):l=((a=t+u*(r-t))-i)*(a-i)+((s=e+u*(n-e))-o)*(s-o)}return[a,s,l]},_getProjectionToLine:function(t,r,n){var i=e.Util.cloneObject(t),o=Number.MAX_VALUE;return r.forEach((function(a,s){if(n||s!==r.length-1){var l=r[(s+1)%r.length],c=e.Util._getProjectionToSegment(a.x,a.y,l.x,l.y,t.x,t.y),u=c[0],f=c[1],h=c[2];h<o&&(i.x=u,i.y=f,o=h)}})),i},_prepareArrayForTween:function(t,r,n){var i,o=[],a=[];if(t.length>r.length){var s=r;r=t,t=s}for(i=0;i<t.length;i+=2)o.push({x:t[i],y:t[i+1]});for(i=0;i<r.length;i+=2)a.push({x:r[i],y:r[i+1]});var l=[];return a.forEach((function(t){var r=e.Util._getProjectionToLine(t,o,n);l.push(r.x),l.push(r.y)})),l},_prepareToStringify:function(t){var r;for(var n in t.visitedByCircularReferenceRemoval=!0,t)if(t.hasOwnProperty(n)&&t[n]&&"object"==typeof t[n])if(r=Object.getOwnPropertyDescriptor(t,n),t[n].visitedByCircularReferenceRemoval||e.Util._isElement(t[n])){if(!r.configurable)return null;delete t[n]}else if(null===e.Util._prepareToStringify(t[n])){if(!r.configurable)return null;delete t[n]}return delete t.visitedByCircularReferenceRemoval,t},_assign:function(t,e){for(var r in e)t[r]=e[r];return t},_getFirstPointerId:function(t){return t.touches?t.changedTouches[0].identifier:999}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(3),i=r(0),o=r(8),a=r(1),s=r(9),l=r(2);e.ids={},e.names={};e._removeId=function(t,r){t&&e.ids[t]===r&&delete e.ids[t]},e._addName=function(t,r){r&&(e.names[r]||(e.names[r]=[]),e.names[r].push(t))},e._removeName=function(t,r){if(t){var n=e.names[t];if(n){for(var i=0;i<n.length;i++){n[i]._id===r&&n.splice(i,1)}0===n.length&&delete e.names[t]}}};var c=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(" "),u=["scaleXChange.konva","scaleYChange.konva"].join(" "),f=new n.Collection,h=1,p=function(){function t(t){var e=this;this._id=h++,this.eventListeners={},this.attrs={},this.index=0,this.parent=null,this._cache=new Map,this._lastPos=null,this._filterUpToDate=!1,this._isUnderCache=!1,this.children=f,this._dragEventId=null,this.setAttrs(t),this.on(c,(function(){e._clearCache("transform"),e._clearSelfAndDescendantCache("absoluteTransform")})),this.on(u,(function(){e._clearSelfAndDescendantCache("absoluteScale")})),this.on("visibleChange.konva",(function(){e._clearSelfAndDescendantCache("visible")})),this.on("listeningChange.konva",(function(){e._clearSelfAndDescendantCache("listening")})),this.on("opacityChange.konva",(function(){e._clearSelfAndDescendantCache("absoluteOpacity")}))}return t.prototype.hasChildren=function(){return!1},t.prototype.getChildren=function(){return f},t.prototype._clearCache=function(t){t?this._cache.delete(t):this._cache.clear()},t.prototype._getCache=function(t,e){var r=this._cache.get(t);return void 0===r&&(r=e.call(this),this._cache.set(t,r)),r},t.prototype._getCanvasCache=function(){return this._cache.get("canvas")},t.prototype._clearSelfAndDescendantCache=function(t){this._clearCache(t),this.isCached()||this.children&&this.children.each((function(e){e._clearSelfAndDescendantCache(t)}))},t.prototype.clearCache=function(){return this._cache.delete("canvas"),this._clearSelfAndDescendantCache(),this},t.prototype.cache=function(t){var e=t||{},r={};void 0!==e.x&&void 0!==e.y&&void 0!==e.width&&void 0!==e.height||(r=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var i=Math.ceil(e.width||r.width),a=Math.ceil(e.height||r.height),s=e.pixelRatio,l=void 0===e.x?r.x:e.x,c=void 0===e.y?r.y:e.y,u=e.offset||0,f=e.drawBorder||!1;if(i&&a){i+=2*u,a+=2*u,l-=u,c-=u;var h=new o.SceneCanvas({pixelRatio:s,width:i,height:a}),p=new o.SceneCanvas({pixelRatio:s,width:i,height:a}),d=new o.HitCanvas({pixelRatio:1,width:i,height:a}),y=h.getContext(),v=d.getContext();return d.isCache=!0,this._cache.delete("canvas"),this._filterUpToDate=!1,!1===e.imageSmoothingEnabled&&(h.getContext()._context.imageSmoothingEnabled=!1,p.getContext()._context.imageSmoothingEnabled=!1,d.getContext()._context.imageSmoothingEnabled=!1),y.save(),v.save(),y.translate(-l,-c),v.translate(-l,-c),this._isUnderCache=!0,this._clearSelfAndDescendantCache("absoluteOpacity"),this._clearSelfAndDescendantCache("absoluteScale"),this.drawScene(h,this,!0),this.drawHit(d,this,!0),this._isUnderCache=!1,y.restore(),v.restore(),f&&(y.save(),y.beginPath(),y.rect(0,0,i,a),y.closePath(),y.setAttr("strokeStyle","red"),y.setAttr("lineWidth",5),y.stroke(),y.restore()),this._cache.set("canvas",{scene:h,filter:p,hit:d,x:l,y:c}),this}n.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.")},t.prototype.isCached=function(){return this._cache.has("canvas")},t.prototype.getClientRect=function(t){throw new Error('abstract "getClientRect" method call')},t.prototype._transformedRect=function(t,e){var r,n,i,o,a=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],s=this.getAbsoluteTransform(e);return a.forEach((function(t){var e=s.point(t);void 0===r&&(r=i=e.x,n=o=e.y),r=Math.min(r,e.x),n=Math.min(n,e.y),i=Math.max(i,e.x),o=Math.max(o,e.y)})),{x:r,y:n,width:i-r,height:o-n}},t.prototype._drawCachedSceneCanvas=function(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);var e=this._getCanvasCache();t.translate(e.x,e.y);var r=this._getCachedSceneCanvas(),n=r.pixelRatio;t.drawImage(r._canvas,0,0,r.width/n,r.height/n),t.restore()},t.prototype._drawCachedHitCanvas=function(t){var e=this._getCanvasCache(),r=e.hit;t.save(),t.translate(e.x,e.y),t.drawImage(r._canvas,0,0),t.restore()},t.prototype._getCachedSceneCanvas=function(){var t,e,r,i,o=this.filters(),a=this._getCanvasCache(),s=a.scene,l=a.filter,c=l.getContext();if(o){if(!this._filterUpToDate){var u=s.pixelRatio;try{for(t=o.length,c.clear(),c.drawImage(s._canvas,0,0,s.getWidth()/u,s.getHeight()/u),e=c.getImageData(0,0,l.getWidth(),l.getHeight()),r=0;r<t;r++)"function"==typeof(i=o[r])?(i.call(this,e),c.putImageData(e,0,0)):n.Util.error("Filter should be type of function, but got "+typeof i+" instead. Please check correct filters")}catch(t){n.Util.error("Unable to apply filter. "+t.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return l}return s},t.prototype.on=function(t,e){if(3===arguments.length)return this._delegate.apply(this,arguments);var r,n,i,o,a=t.split(" "),s=a.length;for(r=0;r<s;r++)i=(n=a[r].split("."))[0],o=n[1]||"",this.eventListeners[i]||(this.eventListeners[i]=[]),this.eventListeners[i].push({name:o,handler:e});return this},t.prototype.off=function(t,e){var r,n,i,o,a,s=(t||"").split(" "),l=s.length;if(!t)for(n in this.eventListeners)this._off(n);for(r=0;r<l;r++)if(o=(i=s[r].split("."))[0],a=i[1],o)this.eventListeners[o]&&this._off(o,a,e);else for(n in this.eventListeners)this._off(n,a,e);return this},t.prototype.dispatchEvent=function(t){var e={target:this,type:t.type,evt:t};return this.fire(t.type,e),this},t.prototype.addEventListener=function(t,e){return this.on(t,(function(t){e.call(this,t.evt)})),this},t.prototype.removeEventListener=function(t){return this.off(t),this},t.prototype._delegate=function(t,e,r){var i=this;this.on(t,(function(t){for(var o=t.target.findAncestors(e,!0,i),a=0;a<o.length;a++)(t=n.Util.cloneObject(t)).currentTarget=o[a],r.call(o[a],t)}))},t.prototype.remove=function(){return this.isDragging()&&this.stopDrag(),s.DD._dragElements.delete(this._id),this._remove(),this},t.prototype._clearCaches=function(){this._clearSelfAndDescendantCache("absoluteTransform"),this._clearSelfAndDescendantCache("absoluteOpacity"),this._clearSelfAndDescendantCache("absoluteScale"),this._clearSelfAndDescendantCache("stage"),this._clearSelfAndDescendantCache("visible"),this._clearSelfAndDescendantCache("listening")},t.prototype._remove=function(){this._clearCaches();var t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)},t.prototype.destroy=function(){e._removeId(this.id(),this);for(var t=(this.name()||"").split(/\s/g),r=0;r<t.length;r++){var n=t[r];e._removeName(n,this._id)}return this.remove(),this},t.prototype.getAttr=function(t){var e="get"+n.Util._capitalize(t);return n.Util._isFunction(this[e])?this[e]():this.attrs[t]},t.prototype.getAncestors=function(){for(var t=this.getParent(),e=new n.Collection;t;)e.push(t),t=t.getParent();return e},t.prototype.getAttrs=function(){return this.attrs||{}},t.prototype.setAttrs=function(t){var e,r;if(!t)return this;for(e in t)"children"!==e&&(r="set"+n.Util._capitalize(e),n.Util._isFunction(this[r])?this[r](t[e]):this._setAttr(e,t[e]));return this},t.prototype.isListening=function(){return this._getCache("listening",this._isListening)},t.prototype._isListening=function(){var t=this.listening(),e=this.getParent();return"inherit"===t?!e||e.isListening():t},t.prototype.isVisible=function(){return this._getCache("visible",this._isVisible)},t.prototype._isVisible=function(t){var e=this.visible(),r=this.getParent();return"inherit"===e?!r||r===t||r._isVisible(t):t&&t!==r?e&&r._isVisible(t):e},t.prototype.shouldDrawHit=function(){var t=this.getLayer();return!t&&this.isListening()&&this.isVisible()||t&&t.hitGraphEnabled()&&this.isListening()&&this.isVisible()},t.prototype.show=function(){return this.visible(!0),this},t.prototype.hide=function(){return this.visible(!1),this},t.prototype.getZIndex=function(){return this.index||0},t.prototype.getAbsoluteZIndex=function(){var t,e,r,n,i=this.getDepth(),o=this,a=0;return"Stage"!==o.nodeType&&function s(l){for(t=[],e=l.length,r=0;r<e;r++)n=l[r],a++,"Shape"!==n.nodeType&&(t=t.concat(n.getChildren().toArray())),n._id===o._id&&(r=e);t.length>0&&t[0].getDepth()<=i&&s(t)}(o.getStage().getChildren()),a},t.prototype.getDepth=function(){for(var t=0,e=this.parent;e;)t++,e=e.parent;return t},t.prototype.setPosition=function(t){return this.x(t.x),this.y(t.y),this},t.prototype.getPosition=function(){return{x:this.x(),y:this.y()}},t.prototype.getAbsolutePosition=function(t){for(var e=!1,r=this.parent;r;){if(r.isCached()){e=!0;break}r=r.parent}e&&!t&&(t=!0);var i=this.getAbsoluteTransform(t).getMatrix(),o=new n.Transform,a=this.offset();return o.m=i.slice(),o.translate(a.x,a.y),o.getTranslation()},t.prototype.setAbsolutePosition=function(t){var e,r=this._clearTransform();return this.attrs.x=r.x,this.attrs.y=r.y,delete r.x,delete r.y,(e=this.getAbsoluteTransform()).invert(),e.translate(t.x,t.y),t={x:this.attrs.x+e.getTranslation().x,y:this.attrs.y+e.getTranslation().y},this.setPosition({x:t.x,y:t.y}),this._setTransform(r),this},t.prototype._setTransform=function(t){var e;for(e in t)this.attrs[e]=t[e];this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")},t.prototype._clearTransform=function(){var t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform"),t},t.prototype.move=function(t){var e=t.x,r=t.y,n=this.x(),i=this.y();return void 0!==e&&(n+=e),void 0!==r&&(i+=r),this.setPosition({x:n,y:i}),this},t.prototype._eachAncestorReverse=function(t,e){var r,n,i=[],o=this.getParent();if(e&&e._id===this._id)t(this);else{for(i.unshift(this);o&&(!e||o._id!==e._id);)i.unshift(o),o=o.parent;for(r=i.length,n=0;n<r;n++)t(i[n])}},t.prototype.rotate=function(t){return this.rotation(this.rotation()+t),this},t.prototype.moveToTop=function(){if(!this.parent)return n.Util.warn("Node has no parent. moveToTop function is ignored."),!1;var t=this.index;return this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0},t.prototype.moveUp=function(){if(!this.parent)return n.Util.warn("Node has no parent. moveUp function is ignored."),!1;var t=this.index;return t<this.parent.getChildren().length-1&&(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0)},t.prototype.moveDown=function(){if(!this.parent)return n.Util.warn("Node has no parent. moveDown function is ignored."),!1;var t=this.index;return t>0&&(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0)},t.prototype.moveToBottom=function(){if(!this.parent)return n.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var t=this.index;return t>0&&(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0)},t.prototype.setZIndex=function(t){if(!this.parent)return n.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&n.Util.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var e=this.index;return this.parent.children.splice(e,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this},t.prototype.getAbsoluteOpacity=function(){return this._getCache("absoluteOpacity",this._getAbsoluteOpacity)},t.prototype._getAbsoluteOpacity=function(){var t=this.opacity(),e=this.getParent();return e&&!e._isUnderCache&&(t*=e.getAbsoluteOpacity()),t},t.prototype.moveTo=function(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this},t.prototype.toObject=function(){var t,e,r,i,o={},a=this.getAttrs();for(t in o.attrs={},a)e=a[t],n.Util.isObject(e)&&!n.Util._isPlainObject(e)&&!n.Util._isArray(e)||(r="function"==typeof this[t]&&this[t],delete a[t],i=r?r.call(this):null,a[t]=e,i!==e&&(o.attrs[t]=e));return o.className=this.getClassName(),n.Util._prepareToStringify(o)},t.prototype.toJSON=function(){return JSON.stringify(this.toObject())},t.prototype.getParent=function(){return this.parent},t.prototype.findAncestors=function(t,e,r){var n=[];e&&this._isMatch(t)&&n.push(this);for(var i=this.parent;i;){if(i===r)return n;i._isMatch(t)&&n.push(i),i=i.parent}return n},t.prototype.isAncestorOf=function(t){return!1},t.prototype.findAncestor=function(t,e,r){return this.findAncestors(t,e,r)[0]},t.prototype._isMatch=function(t){if(!t)return!1;if("function"==typeof t)return t(this);var e,r,i=t.replace(/ /g,"").split(","),o=i.length;for(e=0;e<o;e++)if(r=i[e],n.Util.isValidSelector(r)||(n.Util.warn('Selector "'+r+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),n.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),n.Util.warn("Konva is awesome, right?")),"#"===r.charAt(0)){if(this.id()===r.slice(1))return!0}else if("."===r.charAt(0)){if(this.hasName(r.slice(1)))return!0}else if(this.className===r||this.nodeType===r)return!0;return!1},t.prototype.getLayer=function(){var t=this.getParent();return t?t.getLayer():null},t.prototype.getStage=function(){return this._getCache("stage",this._getStage)},t.prototype._getStage=function(){var t=this.getParent();return t?t.getStage():void 0},t.prototype.fire=function(t,e,r){return(e=e||{}).target=e.target||this,r?this._fireAndBubble(t,e):this._fire(t,e),this},t.prototype.getAbsoluteTransform=function(t){return t?this._getAbsoluteTransform(t):this._getCache("absoluteTransform",this._getAbsoluteTransform)},t.prototype._getAbsoluteTransform=function(t){var e;if(t)return e=new n.Transform,this._eachAncestorReverse((function(t){var r=t.transformsEnabled();"all"===r?e.multiply(t.getTransform()):"position"===r&&e.translate(t.x()-t.offsetX(),t.y()-t.offsetY())}),t),e;e=this.parent?this.parent.getAbsoluteTransform().copy():new n.Transform;var r=this.transformsEnabled();return"all"===r?e.multiply(this.getTransform()):"position"===r&&e.translate(this.x()-this.offsetX(),this.y()-this.offsetY()),e},t.prototype.getAbsoluteScale=function(t){return t?this._getAbsoluteScale(t):this._getCache("absoluteScale",this._getAbsoluteScale)},t.prototype._getAbsoluteScale=function(t){for(var e=this;e;)e._isUnderCache&&(t=e),e=e.getParent();var r=1,n=1;return this._eachAncestorReverse((function(t){r*=t.scaleX(),n*=t.scaleY()}),t),{x:r,y:n}},t.prototype.getAbsoluteRotation=function(){for(var t=this,e=0;t;)e+=t.rotation(),t=t.getParent();return e},t.prototype.getTransform=function(){return this._getCache("transform",this._getTransform)},t.prototype._getTransform=function(){var t=new n.Transform,e=this.x(),r=this.y(),i=a.Konva.getAngle(this.rotation()),o=this.scaleX(),s=this.scaleY(),l=this.skewX(),c=this.skewY(),u=this.offsetX(),f=this.offsetY();return 0===e&&0===r||t.translate(e,r),0!==i&&t.rotate(i),0===l&&0===c||t.skew(l,c),1===o&&1===s||t.scale(o,s),0===u&&0===f||t.translate(-1*u,-1*f),t},t.prototype.clone=function(t){var e,r,i,o,a,s=n.Util.cloneObject(this.attrs);for(e in t)s[e]=t[e];var l=new this.constructor(s);for(e in this.eventListeners)for(i=(r=this.eventListeners[e]).length,o=0;o<i;o++)(a=r[o]).name.indexOf("konva")<0&&(l.eventListeners[e]||(l.eventListeners[e]=[]),l.eventListeners[e].push(a));return l},t.prototype._toKonvaCanvas=function(t){t=t||{};var e=this.getClientRect(),r=this.getStage(),n=void 0!==t.x?t.x:e.x,i=void 0!==t.y?t.y:e.y,a=t.pixelRatio||1,s=new o.SceneCanvas({width:t.width||e.width||(r?r.width():0),height:t.height||e.height||(r?r.height():0),pixelRatio:a}),l=s.getContext();return l.save(),(n||i)&&l.translate(-1*n,-1*i),this.drawScene(s),l.restore(),s},t.prototype.toCanvas=function(t){return this._toKonvaCanvas(t)._canvas},t.prototype.toDataURL=function(t){var e=(t=t||{}).mimeType||null,r=t.quality||null,n=this._toKonvaCanvas(t).toDataURL(e,r);return t.callback&&t.callback(n),n},t.prototype.toImage=function(t){if(!t||!t.callback)throw"callback required for toImage method config argument";var e=t.callback;delete t.callback,n.Util._urlToImage(this.toDataURL(t),(function(t){e(t)}))},t.prototype.setSize=function(t){return this.width(t.width),this.height(t.height),this},t.prototype.getSize=function(){return{width:this.width(),height:this.height()}},t.prototype.getClassName=function(){return this.className||this.nodeType},t.prototype.getType=function(){return this.nodeType},t.prototype.getDragDistance=function(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():a.Konva.dragDistance},t.prototype._off=function(t,e,r){var n,i,o,a=this.eventListeners[t];for(n=0;n<a.length;n++)if(i=a[n].name,o=a[n].handler,!("konva"===i&&"konva"!==e||e&&i!==e||r&&r!==o)){if(a.splice(n,1),0===a.length){delete this.eventListeners[t];break}n--}},t.prototype._fireChangeEvent=function(t,e,r){this._fire(t+"Change",{oldVal:e,newVal:r})},t.prototype.setId=function(t){var r=this.id();return e._removeId(r,this),function(t,r){r&&(e.ids[r]=t)}(this,t),this._setAttr("id",t),this},t.prototype.setName=function(t){var r,n,i=(this.name()||"").split(/\s/g),o=(t||"").split(/\s/g);for(n=0;n<i.length;n++)r=i[n],-1===o.indexOf(r)&&r&&e._removeName(r,this._id);for(n=0;n<o.length;n++)r=o[n],-1===i.indexOf(r)&&r&&e._addName(this,r);return this._setAttr("name",t),this},t.prototype.addName=function(t){if(!this.hasName(t)){var e=this.name(),r=e?e+" "+t:t;this.setName(r)}return this},t.prototype.hasName=function(t){if(!t)return!1;var e=this.name();return!!e&&-1!==(e||"").split(/\s/g).indexOf(t)},t.prototype.removeName=function(t){var e=(this.name()||"").split(/\s/g),r=e.indexOf(t);return-1!==r&&(e.splice(r,1),this.setName(e.join(" "))),this},t.prototype.setAttr=function(t,e){var r=this["set"+n.Util._capitalize(t)];return n.Util._isFunction(r)?r.call(this,e):this._setAttr(t,e),this},t.prototype._setAttr=function(t,e){var r=this.attrs[t];(r!==e||n.Util.isObject(e))&&(null==e?delete this.attrs[t]:this.attrs[t]=e,this._fireChangeEvent(t,r,e))},t.prototype._setComponentAttr=function(t,e,r){var n;void 0!==r&&((n=this.attrs[t])||(this.attrs[t]=this.getAttr(t)),this.attrs[t][e]=r,this._fireChangeEvent(t,n,r))},t.prototype._fireAndBubble=function(t,e,r){if(e&&"Shape"===this.nodeType&&(e.target=this),!(("mouseenter"===t||"mouseleave"===t)&&(r&&(this===r||this.isAncestorOf&&this.isAncestorOf(r))||"Stage"===this.nodeType&&!r))){this._fire(t,e);var n=("mouseenter"===t||"mouseleave"===t)&&r&&r.isAncestorOf&&r.isAncestorOf(this)&&!r.isAncestorOf(this.parent);(e&&!e.cancelBubble||!e)&&this.parent&&this.parent.isListening()&&!n&&(r&&r.parent?this._fireAndBubble.call(this.parent,t,e,r):this._fireAndBubble.call(this.parent,t,e))}},t.prototype._fire=function(t,e){var r,n=this.eventListeners[t];if(n)for((e=e||{}).currentTarget=this,e.type=t,r=0;r<n.length;r++)n[r].handler.call(this,e)},t.prototype.draw=function(){return this.drawScene(),this.drawHit(),this},t.prototype._createDragElement=function(t){var e=t?t.pointerId:void 0,r=this.getStage(),n=this.getAbsolutePosition(),i=r._getPointerById(e)||r._changedPointerPositions[0]||n;s.DD._dragElements.set(this._id,{node:this,startPointerPos:i,offset:{x:i.x-n.x,y:i.y-n.y},dragStatus:"ready",pointerId:e})},t.prototype.startDrag=function(t){s.DD._dragElements.has(this._id)||this._createDragElement(t),s.DD._dragElements.get(this._id).dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},!0)},t.prototype._setDragPosition=function(t,e){var r=this.getStage()._getPointerById(e.pointerId);if(r){var i={x:r.x-e.offset.x,y:r.y-e.offset.y},o=this.dragBoundFunc();if(void 0!==o){var a=o.call(this,i,t);a?i=a:n.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}this._lastPos&&this._lastPos.x===i.x&&this._lastPos.y===i.y||(this.setAbsolutePosition(i),this.getLayer()?this.getLayer().batchDraw():this.getStage()&&this.getStage().batchDraw()),this._lastPos=i}},t.prototype.stopDrag=function(t){var e=s.DD._dragElements.get(this._id);e&&(e.dragStatus="stopped"),s.DD._endDragBefore(t),s.DD._endDragAfter(t)},t.prototype.setDraggable=function(t){this._setAttr("draggable",t),this._dragChange()},t.prototype.isDragging=function(){var t=s.DD._dragElements.get(this._id);return!!t&&"dragging"===t.dragStatus},t.prototype._listenDrag=function(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",(function(t){var e=this;if((!(void 0!==t.evt.button)||a.Konva.dragButtons.indexOf(t.evt.button)>=0)&&!this.isDragging()){var r=!1;s.DD._dragElements.forEach((function(t){e.isAncestorOf(t.node)&&(r=!0)})),r||this._createDragElement(t)}}))},t.prototype._dragChange=function(){this.attrs.draggable?this._listenDrag():(this._dragCleanup(),this.getStage()&&s.DD._dragElements.has(this._id)&&this.stopDrag())},t.prototype._dragCleanup=function(){this.off("mousedown.konva"),this.off("touchstart.konva")},t.create=function(t,e){return n.Util._isString(t)&&(t=JSON.parse(t)),this._createNode(t,e)},t._createNode=function(e,r){var i,o,s,l=t.prototype.getClassName.call(e),c=e.children;if(r&&(e.attrs.container=r),a._NODES_REGISTRY[l]||(n.Util.warn('Can not find a node with class name "'+l+'". Fallback to "Shape".'),l="Shape"),i=new(0,a._NODES_REGISTRY[l])(e.attrs),c)for(o=c.length,s=0;s<o;s++)i.add(t._createNode(c[s]));return i},t}();e.Node=p,p.prototype.nodeType="Node",p.prototype._attrsAffectingSize=[],i.Factory.addGetterSetter(p,"zIndex"),i.Factory.addGetterSetter(p,"absolutePosition"),i.Factory.addGetterSetter(p,"position"),i.Factory.addGetterSetter(p,"x",0,l.getNumberValidator()),i.Factory.addGetterSetter(p,"y",0,l.getNumberValidator()),i.Factory.addGetterSetter(p,"globalCompositeOperation","source-over",l.getStringValidator()),i.Factory.addGetterSetter(p,"opacity",1,l.getNumberValidator()),i.Factory.addGetterSetter(p,"name","",l.getStringValidator()),i.Factory.addGetterSetter(p,"id","",l.getStringValidator()),i.Factory.addGetterSetter(p,"rotation",0,l.getNumberValidator()),i.Factory.addComponentsGetterSetter(p,"scale",["x","y"]),i.Factory.addGetterSetter(p,"scaleX",1,l.getNumberValidator()),i.Factory.addGetterSetter(p,"scaleY",1,l.getNumberValidator()),i.Factory.addComponentsGetterSetter(p,"skew",["x","y"]),i.Factory.addGetterSetter(p,"skewX",0,l.getNumberValidator()),i.Factory.addGetterSetter(p,"skewY",0,l.getNumberValidator()),i.Factory.addComponentsGetterSetter(p,"offset",["x","y"]),i.Factory.addGetterSetter(p,"offsetX",0,l.getNumberValidator()),i.Factory.addGetterSetter(p,"offsetY",0,l.getNumberValidator()),i.Factory.addGetterSetter(p,"dragDistance",null,l.getNumberValidator()),i.Factory.addGetterSetter(p,"width",0,l.getNumberValidator()),i.Factory.addGetterSetter(p,"height",0,l.getNumberValidator()),i.Factory.addGetterSetter(p,"listening","inherit",(function(t){return!0===t||!1===t||"inherit"===t||n.Util.warn(t+' is a not valid value for "listening" attribute. The value may be true, false or "inherit".'),t})),i.Factory.addGetterSetter(p,"preventDefault",!0,l.getBooleanValidator()),i.Factory.addGetterSetter(p,"filters",null,(function(t){return this._filterUpToDate=!1,t})),i.Factory.addGetterSetter(p,"visible","inherit",(function(t){return!0===t||!1===t||"inherit"===t||n.Util.warn(t+' is a not valid value for "visible" attribute. The value may be true, false or "inherit".'),t})),i.Factory.addGetterSetter(p,"transformsEnabled","all",l.getStringValidator()),i.Factory.addGetterSetter(p,"size"),i.Factory.addGetterSetter(p,"dragBoundFunc"),i.Factory.addGetterSetter(p,"draggable",!1,l.getBooleanValidator()),i.Factory.backCompat(p,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),n.Collection.mapMethods(p)},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=r(3),s=r(0),l=r(4),c=r(2),u=r(1),f=r(14);function h(){return o||(o=a.Util.createCanvasElement().getContext("2d"))}function p(){this._clearCache("hasShadow")}function d(){this._clearCache("shadowRGBA")}function y(){this._clearCache("patternImage")}function v(){this._clearCache("linearGradient")}function g(){this._clearCache("radialGradient")}e.shapes={};var b=function(t){function r(r){for(var n,i=t.call(this,r)||this;!(n=a.Util.getRandomColor())||n in e.shapes;);return i.colorKey=n,e.shapes[n]=i,i.on("shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",p),i.on("shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",d),i.on("fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva",y),i.on("fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",v),i.on("fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",g),i}return i(r,t),r.prototype.getContext=function(){return this.getLayer().getContext()},r.prototype.getCanvas=function(){return this.getLayer().getCanvas()},r.prototype.getSceneFunc=function(){return this.attrs.sceneFunc||this._sceneFunc},r.prototype.getHitFunc=function(){return this.attrs.hitFunc||this._hitFunc},r.prototype.hasShadow=function(){return this._getCache("hasShadow",this._hasShadow)},r.prototype._hasShadow=function(){return this.shadowEnabled()&&0!==this.shadowOpacity()&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())},r.prototype._getFillPattern=function(){return this._getCache("patternImage",this.__getFillPattern)},r.prototype.__getFillPattern=function(){if(this.fillPatternImage())return h().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat")},r.prototype._getLinearGradient=function(){return this._getCache("linearGradient",this.__getLinearGradient)},r.prototype.__getLinearGradient=function(){var t=this.fillLinearGradientColorStops();if(t){for(var e=h(),r=this.fillLinearGradientStartPoint(),n=this.fillLinearGradientEndPoint(),i=e.createLinearGradient(r.x,r.y,n.x,n.y),o=0;o<t.length;o+=2)i.addColorStop(t[o],t[o+1]);return i}},r.prototype._getRadialGradient=function(){return this._getCache("radialGradient",this.__getRadialGradient)},r.prototype.__getRadialGradient=function(){var t=this.fillRadialGradientColorStops();if(t){for(var e=h(),r=this.fillRadialGradientStartPoint(),n=this.fillRadialGradientEndPoint(),i=e.createRadialGradient(r.x,r.y,this.fillRadialGradientStartRadius(),n.x,n.y,this.fillRadialGradientEndRadius()),o=0;o<t.length;o+=2)i.addColorStop(t[o],t[o+1]);return i}},r.prototype.getShadowRGBA=function(){return this._getCache("shadowRGBA",this._getShadowRGBA)},r.prototype._getShadowRGBA=function(){if(this.hasShadow()){var t=a.Util.colorToRGBA(this.shadowColor());return"rgba("+t.r+","+t.g+","+t.b+","+t.a*(this.shadowOpacity()||1)+")"}},r.prototype.hasFill=function(){return this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops())},r.prototype.hasStroke=function(){return this.strokeEnabled()&&this.strokeWidth()&&!(!this.stroke()&&!this.strokeLinearGradientColorStops())},r.prototype.hasHitStroke=function(){var t=this.hitStrokeWidth();return"auto"===t?this.hasStroke():this.strokeEnabled()&&!!t},r.prototype.intersects=function(t){var e=this.getStage().bufferHitCanvas;return e.getContext().clear(),this.drawHit(e),e.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data[3]>0},r.prototype.destroy=function(){return l.Node.prototype.destroy.call(this),delete e.shapes[this.colorKey],delete this.colorKey,this},r.prototype._useBufferCanvas=function(t){return!(t&&!this.hasShadow()||!this.perfectDrawEnabled()||1===this.getAbsoluteOpacity()||!this.hasFill()||!this.hasStroke()||!this.getStage())},r.prototype.setStrokeHitEnabled=function(t){a.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),t?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)},r.prototype.getStrokeHitEnabled=function(){return 0!==this.hitStrokeWidth()},r.prototype.getSelfRect=function(){var t=this.size();return{x:this._centroid?-t.width/2:0,y:this._centroid?-t.height/2:0,width:t.width,height:t.height}},r.prototype.getClientRect=function(t){var e=(t=t||{}).skipTransform,r=t.relativeTo,n=this.getSelfRect(),i=!t.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,o=n.width+i,a=n.height+i,s=!t.skipShadow&&this.hasShadow(),l=s?this.shadowOffsetX():0,c=s?this.shadowOffsetY():0,u=o+Math.abs(l),f=a+Math.abs(c),h=s&&this.shadowBlur()||0,p=u+2*h,d=f+2*h,y=0;Math.round(i/2)!==i/2&&(y=1);var v={width:p+y,height:d+y,x:-Math.round(i/2+h)+Math.min(l,0)+n.x,y:-Math.round(i/2+h)+Math.min(c,0)+n.y};return e?v:this._transformedRect(v,r)},r.prototype.drawScene=function(t,e,r,n){var i,o,a=this.getLayer(),s=t||a.getCanvas(),l=s.getContext(),c=this._getCanvasCache(),u=this.sceneFunc(),f=this.hasShadow(),h=this.hasStroke();if(!this.isVisible()&&!r)return this;if(c)return l.save(),a._applyTransform(this,l,e),this._drawCachedSceneCanvas(l),l.restore(),this;if(!u)return this;if(l.save(),this._useBufferCanvas(r)&&!n){if((o=(i=this.getStage().bufferCanvas).getContext()).clear(),o.save(),o._applyLineJoin(this),!r)if(a)a._applyTransform(this,o,e);else{var p=this.getAbsoluteTransform(e).getMatrix();l.transform(p[0],p[1],p[2],p[3],p[4],p[5])}u.call(this,o,this),o.restore();var d=i.pixelRatio;f&&!s.hitCanvas?(l.save(),l._applyShadow(this),l._applyOpacity(this),l._applyGlobalCompositeOperation(this),l.drawImage(i._canvas,0,0,i.width/d,i.height/d),l.restore()):(l._applyOpacity(this),l._applyGlobalCompositeOperation(this),l.drawImage(i._canvas,0,0,i.width/d,i.height/d))}else{if(l._applyLineJoin(this),!r)if(a)a._applyTransform(this,l,e);else{var y=this.getAbsoluteTransform(e).getMatrix();l.transform(y[0],y[1],y[2],y[3],y[4],y[5])}f&&h&&!s.hitCanvas?(l.save(),r||(l._applyOpacity(this),l._applyGlobalCompositeOperation(this)),l._applyShadow(this),u.call(this,l,this),l.restore(),this.hasFill()&&this.shadowForStrokeEnabled()&&u.call(this,l,this)):f&&!s.hitCanvas?(l.save(),r||(l._applyOpacity(this),l._applyGlobalCompositeOperation(this)),l._applyShadow(this),u.call(this,l,this),l.restore()):(r||(l._applyOpacity(this),l._applyGlobalCompositeOperation(this)),u.call(this,l,this))}return l.restore(),this},r.prototype.drawHit=function(t,e,r){var n=this.getLayer(),i=t||n.hitCanvas,o=i&&i.getContext(),s=this.hitFunc()||this.sceneFunc(),l=this._getCanvasCache(),c=l&&l.hit;if(this.colorKey||(console.log(this),a.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. See the shape in logs above. If you want to reuse shape you should call remove() instead of destroy()")),!this.shouldDrawHit()&&!r)return this;if(c)return o.save(),n._applyTransform(this,o,e),this._drawCachedHitCanvas(o),o.restore(),this;if(!s)return this;if(o.save(),o._applyLineJoin(this),!r)if(n)n._applyTransform(this,o,e);else{var u=this.getAbsoluteTransform(e).getMatrix();o.transform(u[0],u[1],u[2],u[3],u[4],u[5])}return s.call(this,o,this),o.restore(),this},r.prototype.drawHitFromCache=function(t){void 0===t&&(t=0);var e,r,n,i,o,s=this._getCanvasCache(),l=this._getCachedSceneCanvas(),c=s.hit,u=c.getContext(),f=c.getWidth(),h=c.getHeight();u.clear(),u.drawImage(l._canvas,0,0,f,h);try{for(n=(r=(e=u.getImageData(0,0,f,h)).data).length,i=a.Util._hexToRgb(this.colorKey),o=0;o<n;o+=4)r[o+3]>t?(r[o]=i.r,r[o+1]=i.g,r[o+2]=i.b,r[o+3]=255):r[o+3]=0;u.putImageData(e,0,0)}catch(t){a.Util.error("Unable to draw hit graph from cached scene canvas. "+t.message)}return this},r.prototype.hasPointerCapture=function(t){return f.hasPointerCapture(t,this)},r.prototype.setPointerCapture=function(t){f.setPointerCapture(t,this)},r.prototype.releaseCapture=function(t){f.releaseCapture(t,this)},r}(l.Node);e.Shape=b,b.prototype._fillFunc=function(t){t.fill()},b.prototype._strokeFunc=function(t){t.stroke()},b.prototype._fillFuncHit=function(t){t.fill()},b.prototype._strokeFuncHit=function(t){t.stroke()},b.prototype._centroid=!1,b.prototype.nodeType="Shape",u._registerNode(b),s.Factory.addGetterSetter(b,"stroke",void 0,c.getStringValidator()),s.Factory.addGetterSetter(b,"strokeWidth",2,c.getNumberValidator()),s.Factory.addGetterSetter(b,"hitStrokeWidth","auto",c.getNumberOrAutoValidator()),s.Factory.addGetterSetter(b,"strokeHitEnabled",!0,c.getBooleanValidator()),s.Factory.addGetterSetter(b,"perfectDrawEnabled",!0,c.getBooleanValidator()),s.Factory.addGetterSetter(b,"shadowForStrokeEnabled",!0,c.getBooleanValidator()),s.Factory.addGetterSetter(b,"lineJoin"),s.Factory.addGetterSetter(b,"lineCap"),s.Factory.addGetterSetter(b,"sceneFunc"),s.Factory.addGetterSetter(b,"hitFunc"),s.Factory.addGetterSetter(b,"dash"),s.Factory.addGetterSetter(b,"dashOffset",0,c.getNumberValidator()),s.Factory.addGetterSetter(b,"shadowColor",void 0,c.getStringValidator()),s.Factory.addGetterSetter(b,"shadowBlur",0,c.getNumberValidator()),s.Factory.addGetterSetter(b,"shadowOpacity",1,c.getNumberValidator()),s.Factory.addComponentsGetterSetter(b,"shadowOffset",["x","y"]),s.Factory.addGetterSetter(b,"shadowOffsetX",0,c.getNumberValidator()),s.Factory.addGetterSetter(b,"shadowOffsetY",0,c.getNumberValidator()),s.Factory.addGetterSetter(b,"fillPatternImage"),s.Factory.addGetterSetter(b,"fill",void 0,c.getStringValidator()),s.Factory.addGetterSetter(b,"fillPatternX",0,c.getNumberValidator()),s.Factory.addGetterSetter(b,"fillPatternY",0,c.getNumberValidator()),s.Factory.addGetterSetter(b,"fillLinearGradientColorStops"),s.Factory.addGetterSetter(b,"strokeLinearGradientColorStops"),s.Factory.addGetterSetter(b,"fillRadialGradientStartRadius",0),s.Factory.addGetterSetter(b,"fillRadialGradientEndRadius",0),s.Factory.addGetterSetter(b,"fillRadialGradientColorStops"),s.Factory.addGetterSetter(b,"fillPatternRepeat","repeat"),s.Factory.addGetterSetter(b,"fillEnabled",!0),s.Factory.addGetterSetter(b,"strokeEnabled",!0),s.Factory.addGetterSetter(b,"shadowEnabled",!0),s.Factory.addGetterSetter(b,"dashEnabled",!0),s.Factory.addGetterSetter(b,"strokeScaleEnabled",!0),s.Factory.addGetterSetter(b,"fillPriority","color"),s.Factory.addComponentsGetterSetter(b,"fillPatternOffset",["x","y"]),s.Factory.addGetterSetter(b,"fillPatternOffsetX",0,c.getNumberValidator()),s.Factory.addGetterSetter(b,"fillPatternOffsetY",0,c.getNumberValidator()),s.Factory.addComponentsGetterSetter(b,"fillPatternScale",["x","y"]),s.Factory.addGetterSetter(b,"fillPatternScaleX",1,c.getNumberValidator()),s.Factory.addGetterSetter(b,"fillPatternScaleY",1,c.getNumberValidator()),s.Factory.addComponentsGetterSetter(b,"fillLinearGradientStartPoint",["x","y"]),s.Factory.addComponentsGetterSetter(b,"strokeLinearGradientStartPoint",["x","y"]),s.Factory.addGetterSetter(b,"fillLinearGradientStartPointX",0),s.Factory.addGetterSetter(b,"strokeLinearGradientStartPointX",0),s.Factory.addGetterSetter(b,"fillLinearGradientStartPointY",0),s.Factory.addGetterSetter(b,"strokeLinearGradientStartPointY",0),s.Factory.addComponentsGetterSetter(b,"fillLinearGradientEndPoint",["x","y"]),s.Factory.addComponentsGetterSetter(b,"strokeLinearGradientEndPoint",["x","y"]),s.Factory.addGetterSetter(b,"fillLinearGradientEndPointX",0),s.Factory.addGetterSetter(b,"strokeLinearGradientEndPointX",0),s.Factory.addGetterSetter(b,"fillLinearGradientEndPointY",0),s.Factory.addGetterSetter(b,"strokeLinearGradientEndPointY",0),s.Factory.addComponentsGetterSetter(b,"fillRadialGradientStartPoint",["x","y"]),s.Factory.addGetterSetter(b,"fillRadialGradientStartPointX",0),s.Factory.addGetterSetter(b,"fillRadialGradientStartPointY",0),s.Factory.addComponentsGetterSetter(b,"fillRadialGradientEndPoint",["x","y"]),s.Factory.addGetterSetter(b,"fillRadialGradientEndPointX",0),s.Factory.addGetterSetter(b,"fillRadialGradientEndPointY",0),s.Factory.addGetterSetter(b,"fillPatternRotation",0),s.Factory.backCompat(b,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"}),a.Collection.mapMethods(b)},function(t,e,r){var n=r(20).Konva;n._injectGlobal(n),e.default=n,t.exports=e.default},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(3),a=r(0),s=r(4),l=r(9),c=r(2),u=r(1),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.children=new o.Collection,e}return i(e,t),e.prototype.getChildren=function(t){if(!t)return this.children;var e=new o.Collection;return this.children.each((function(r){t(r)&&e.push(r)})),e},e.prototype.hasChildren=function(){return this.getChildren().length>0},e.prototype.removeChildren=function(){for(var t,e=0;e<this.children.length;e++)(t=this.children[e]).parent=null,t.index=0,t.remove();return this.children=new o.Collection,this},e.prototype.destroyChildren=function(){for(var t,e=0;e<this.children.length;e++)(t=this.children[e]).parent=null,t.index=0,t.destroy();return this.children=new o.Collection,this},e.prototype.add=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(arguments.length>1){for(var r=0;r<arguments.length;r++)this.add(arguments[r]);return this}var n=t[0];if(n.getParent())return n.moveTo(this),this;var i=this.children;return this._validateAdd(n),n._clearCaches(),n.index=i.length,n.parent=this,i.push(n),this._fire("add",{child:n}),this},e.prototype.destroy=function(){return this.hasChildren()&&this.destroyChildren(),t.prototype.destroy.call(this),this},e.prototype.find=function(t){return this._generalFind(t,!1)},e.prototype.get=function(t){return o.Util.warn("collection.get() method is deprecated. Please use collection.find() instead."),this.find(t)},e.prototype.findOne=function(t){var e=this._generalFind(t,!0);return e.length>0?e[0]:void 0},e.prototype._generalFind=function(t,e){var r=[];return this._descendants((function(n){var i=n._isMatch(t);return i&&r.push(n),!(!i||!e)})),o.Collection.toCollection(r)},e.prototype._descendants=function(t){for(var e=0;e<this.children.length;e++){var r=this.children[e];if(t(r))return!0;if(r.hasChildren()&&r._descendants(t))return!0}return!1},e.prototype.toObject=function(){var t=s.Node.prototype.toObject.call(this);t.children=[];for(var e=this.getChildren(),r=e.length,n=0;n<r;n++){var i=e[n];t.children.push(i.toObject())}return t},e.prototype._getDescendants=function(t){for(var e=[],r=t.length,n=0;n<r;n++){var i=t[n];this.isAncestorOf(i)&&e.push(i)}return e},e.prototype.isAncestorOf=function(t){for(var e=t.getParent();e;){if(e._id===this._id)return!0;e=e.getParent()}return!1},e.prototype.clone=function(t){var e=s.Node.prototype.clone.call(this,t);return this.getChildren().each((function(t){e.add(t.clone())})),e},e.prototype.getAllIntersections=function(t){var e=[];return this.find("Shape").each((function(r){r.isVisible()&&r.intersects(t)&&e.push(r)})),e},e.prototype._setChildrenIndices=function(){this.children.each((function(t,e){t.index=e}))},e.prototype.drawScene=function(t,e,r){var n=this.getLayer(),i=t||n&&n.getCanvas(),o=i&&i.getContext(),a=this._getCanvasCache(),s=a&&a.scene;return(this.isVisible()||r)&&(!r&&s?(o.save(),n._applyTransform(this,o,e),this._drawCachedSceneCanvas(o),o.restore()):this._drawChildren(i,"drawScene",e,!1,r,r)),this},e.prototype.drawHit=function(t,e,r){var n=this.getLayer(),i=t||n&&n.hitCanvas,o=i&&i.getContext(),a=this._getCanvasCache(),s=a&&a.hit;return(this.shouldDrawHit(i)||r)&&(!r&&s?(o.save(),n._applyTransform(this,o,e),this._drawCachedHitCanvas(o),o.restore()):this._drawChildren(i,"drawHit",e,!1,r,r)),this},e.prototype._drawChildren=function(t,e,r,n,i,o){var a,s,l=this.getLayer(),c=t&&t.getContext(),u=this.clipWidth(),f=this.clipHeight(),h=this.clipFunc(),p=u&&f||h;if(p&&l){c.save();var d=this.getAbsoluteTransform(r),y=d.getMatrix();c.transform(y[0],y[1],y[2],y[3],y[4],y[5]),c.beginPath(),h?h.call(this,c,this):(a=this.clipX(),s=this.clipY(),c.rect(a,s,u,f)),c.clip(),y=d.copy().invert().getMatrix(),c.transform(y[0],y[1],y[2],y[3],y[4],y[5])}var v="source-over"!==this.globalCompositeOperation()&&!o&&"drawScene"===e;v&&l&&(c.save(),c._applyGlobalCompositeOperation(this)),this.children.each((function(o){o[e](t,r,n,i)})),v&&l&&c.restore(),p&&l&&c.restore()},e.prototype.shouldDrawHit=function(t){if(t&&t.isCache)return!0;var e=this.getLayer(),r=!1;l.DD._dragElements.forEach((function(t){"dragging"===t.dragStatus&&t.node.getLayer()===e&&(r=!0)}));var n=!u.Konva.hitOnDragEnabled&&r;return e&&e.hitGraphEnabled()&&this.isVisible()&&!n},e.prototype.getClientRect=function(t){var e,r,n,i,o=(t=t||{}).skipTransform,a=t.relativeTo,s={x:1/0,y:1/0,width:0,height:0},l=this;this.children.each((function(o){if(o.visible()){var a=o.getClientRect({relativeTo:l,skipShadow:t.skipShadow,skipStroke:t.skipStroke});0===a.width&&0===a.height||(void 0===e?(e=a.x,r=a.y,n=a.x+a.width,i=a.y+a.height):(e=Math.min(e,a.x),r=Math.min(r,a.y),n=Math.max(n,a.x+a.width),i=Math.max(i,a.y+a.height)))}}));for(var c=this.find("Shape"),u=!1,f=0;f<c.length;f++){if(c[f]._isVisible(this)){u=!0;break}}return s=u&&void 0!==e?{x:e,y:r,width:n-e,height:i-r}:{x:0,y:0,width:0,height:0},o?s:this._transformedRect(s,a)},e}(s.Node);e.Container=f,a.Factory.addComponentsGetterSetter(f,"clip",["x","y","width","height"]),a.Factory.addGetterSetter(f,"clipX",void 0,c.getNumberValidator()),a.Factory.addGetterSetter(f,"clipY",void 0,c.getNumberValidator()),a.Factory.addGetterSetter(f,"clipWidth",void 0,c.getNumberValidator()),a.Factory.addGetterSetter(f,"clipHeight",void 0,c.getNumberValidator()),a.Factory.addGetterSetter(f,"clipFunc"),o.Collection.mapMethods(f)},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=r(3),s=r(13),l=r(1),c=r(0),u=r(2);var f=function(){function t(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var e=(t||{}).pixelRatio||l.Konva.pixelRatio||function(){if(o)return o;var t=a.Util.createCanvasElement().getContext("2d");return o=(l.Konva._global.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)}();this.pixelRatio=e,this._canvas=a.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}return t.prototype.getContext=function(){return this.context},t.prototype.getPixelRatio=function(){return this.pixelRatio},t.prototype.setPixelRatio=function(t){var e=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/e,this.getHeight()/e)},t.prototype.setWidth=function(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";var e=this.pixelRatio;this.getContext()._context.scale(e,e)},t.prototype.setHeight=function(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";var e=this.pixelRatio;this.getContext()._context.scale(e,e)},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.setSize=function(t,e){this.setWidth(t||0),this.setHeight(e||0)},t.prototype.toDataURL=function(t,e){try{return this._canvas.toDataURL(t,e)}catch(t){try{return this._canvas.toDataURL()}catch(t){return a.Util.error("Unable to get data URL. "+t.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}},t}();e.Canvas=f,c.Factory.addGetterSetter(f,"pixelRatio",void 0,u.getNumberValidator());var h=function(t){function e(e){void 0===e&&(e={width:0,height:0});var r=t.call(this,e)||this;return r.context=new s.SceneContext(r),r.setSize(e.width,e.height),r}return i(e,t),e}(f);e.SceneCanvas=h;var p=function(t){function e(e){void 0===e&&(e={width:0,height:0});var r=t.call(this,e)||this;return r.hitCanvas=!0,r.context=new s.HitContext(r),r.setSize(e.width,e.height),r}return i(e,t),e}(f);e.HitCanvas=p},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=r(3);e.DD={get isDragging(){var t=!1;return e.DD._dragElements.forEach((function(e){"dragging"===e.dragStatus&&(t=!0)})),t},justDragged:!1,get node(){var t;return e.DD._dragElements.forEach((function(e){t=e.node})),t},_dragElements:new Map,_drag:function(t){e.DD._dragElements.forEach((function(e,r){var n=e.node,o=n.getStage();o.setPointersPositions(t),void 0===e.pointerId&&(e.pointerId=i.Util._getFirstPointerId(t));var a=o._changedPointerPositions.find((function(t){return t.id===e.pointerId}));if(a){if("dragging"!==e.dragStatus){var s=n.dragDistance();if(Math.max(Math.abs(a.x-e.startPointerPos.x),Math.abs(a.y-e.startPointerPos.y))<s)return;if(n.startDrag({evt:t}),!n.isDragging())return}n._setDragPosition(t,e),n.fire("dragmove",{type:"dragmove",target:n,evt:t},!0)}}))},_endDragBefore:function(t){e.DD._dragElements.forEach((function(r,i){var o=r.node.getStage();if(t&&o.setPointersPositions(t),o._changedPointerPositions.find((function(t){return t.id===r.pointerId}))){"dragging"!==r.dragStatus&&"stopped"!==r.dragStatus||(e.DD.justDragged=!0,n.Konva.listenClickTap=!1,r.dragStatus="stopped");var a=r.node.getLayer()||r.node instanceof n.Konva.Stage&&r.node;a&&a.draw()}}))},_endDragAfter:function(t){e.DD._dragElements.forEach((function(r,n){"stopped"===r.dragStatus&&r.node.fire("dragend",{type:"dragend",target:r.node,evt:t},!0),"dragging"!==r.dragStatus&&e.DD._dragElements.delete(n)}))}},n.Konva.isBrowser&&(window.addEventListener("mouseup",e.DD._endDragBefore,!0),window.addEventListener("touchend",e.DD._endDragBefore,!0),window.addEventListener("mousemove",e.DD._drag),window.addEventListener("touchmove",e.DD._drag),window.addEventListener("mouseup",e.DD._endDragAfter,!1),window.addEventListener("touchend",e.DD._endDragAfter,!1))},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(3),a=r(7),s=r(1),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._validateAdd=function(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&o.Util.throw("You may only add groups and shapes to groups.")},e}(a.Container);e.Group=l,l.prototype.nodeType="Group",s._registerNode(l),o.Collection.mapMethods(l)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=n.glob.performance&&n.glob.performance.now?function(){return n.glob.performance.now()}:function(){return(new Date).getTime()},o=function(){function t(e,r){this.id=t.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:i(),frameRate:0},this.func=e,this.setLayers(r)}return t.prototype.setLayers=function(t){var e=[];return e=t?t.length>0?t:[t]:[],this.layers=e,this},t.prototype.getLayers=function(){return this.layers},t.prototype.addLayer=function(t){var e,r=this.layers,n=r.length;for(e=0;e<n;e++)if(r[e]._id===t._id)return!1;return this.layers.push(t),!0},t.prototype.isRunning=function(){var e,r=t.animations,n=r.length;for(e=0;e<n;e++)if(r[e].id===this.id)return!0;return!1},t.prototype.start=function(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=i(),t._addAnimation(this),this},t.prototype.stop=function(){return t._removeAnimation(this),this},t.prototype._updateFrameObject=function(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff},t._addAnimation=function(t){this.animations.push(t),this._handleAnimation()},t._removeAnimation=function(t){var e,r=t.id,n=this.animations,i=n.length;for(e=0;e<i;e++)if(n[e].id===r){this.animations.splice(e,1);break}},t._runFrames=function(){var t,e,r,n,o,a,s,l,c={},u=this.animations;for(n=0;n<u.length;n++)if(e=(t=u[n]).layers,r=t.func,t._updateFrameObject(i()),a=e.length,!r||!1!==r.call(t,t.frame))for(o=0;o<a;o++)void 0!==(s=e[o])._id&&(c[s._id]=s);for(l in c)c.hasOwnProperty(l)&&c[l].draw()},t._animationLoop=function(){var e=t;e.animations.length?(e._runFrames(),requestAnimationFrame(e._animationLoop)):e.animRunning=!1},t._handleAnimation=function(){this.animRunning||(this.animRunning=!0,requestAnimationFrame(this._animationLoop))},t.animations=[],t.animIdCounter=0,t.animRunning=!1,t}();e.Animation=o},function(t,e){},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(3),a=r(1),s=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],l=function(){function t(t){this.canvas=t,this._context=t._canvas.getContext("2d"),a.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}return t.prototype.fillShape=function(t){t.fillEnabled()&&this._fill(t)},t.prototype._fill=function(t){},t.prototype.strokeShape=function(t){t.hasStroke()&&this._stroke(t)},t.prototype._stroke=function(t){},t.prototype.fillStrokeShape=function(t){this.fillShape(t),this.strokeShape(t)},t.prototype.getTrace=function(t){var e,r,n,i,a=this.traceArr,s=a.length,l="";for(e=0;e<s;e++)(n=(r=a[e]).method)?(i=r.args,l+=n,t?l+="()":o.Util._isArray(i[0])?l+="(["+i.join(",")+"])":l+="("+i.join(",")+")"):(l+=r.property,t||(l+="="+r.val)),l+=";";return l},t.prototype.clearTrace=function(){this.traceArr=[]},t.prototype._trace=function(t){var e=this.traceArr;e.push(t),e.length>=100&&e.shift()},t.prototype.reset=function(){var t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)},t.prototype.getCanvas=function(){return this.canvas},t.prototype.clear=function(t){var e=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,e.getWidth()/e.pixelRatio,e.getHeight()/e.pixelRatio)},t.prototype._applyLineCap=function(t){var e=t.getLineCap();e&&this.setAttr("lineCap",e)},t.prototype._applyOpacity=function(t){var e=t.getAbsoluteOpacity();1!==e&&this.setAttr("globalAlpha",e)},t.prototype._applyLineJoin=function(t){var e=t.getLineJoin();e&&this.setAttr("lineJoin",e)},t.prototype.setAttr=function(t,e){this._context[t]=e},t.prototype.arc=function(t,e,r,n,i,o){this._context.arc(t,e,r,n,i,o)},t.prototype.arcTo=function(t,e,r,n,i){this._context.arcTo(t,e,r,n,i)},t.prototype.beginPath=function(){this._context.beginPath()},t.prototype.bezierCurveTo=function(t,e,r,n,i,o){this._context.bezierCurveTo(t,e,r,n,i,o)},t.prototype.clearRect=function(t,e,r,n){this._context.clearRect(t,e,r,n)},t.prototype.clip=function(){this._context.clip()},t.prototype.closePath=function(){this._context.closePath()},t.prototype.createImageData=function(t,e){var r=arguments;return 2===r.length?this._context.createImageData(t,e):1===r.length?this._context.createImageData(t):void 0},t.prototype.createLinearGradient=function(t,e,r,n){return this._context.createLinearGradient(t,e,r,n)},t.prototype.createPattern=function(t,e){return this._context.createPattern(t,e)},t.prototype.createRadialGradient=function(t,e,r,n,i,o){return this._context.createRadialGradient(t,e,r,n,i,o)},t.prototype.drawImage=function(t,e,r,n,i,o,a,s,l){var c=arguments,u=this._context;3===c.length?u.drawImage(t,e,r):5===c.length?u.drawImage(t,e,r,n,i):9===c.length&&u.drawImage(t,e,r,n,i,o,a,s,l)},t.prototype.ellipse=function(t,e,r,n,i,o,a,s){this._context.ellipse(t,e,r,n,i,o,a,s)},t.prototype.isPointInPath=function(t,e){return this._context.isPointInPath(t,e)},t.prototype.fill=function(){this._context.fill()},t.prototype.fillRect=function(t,e,r,n){this._context.fillRect(t,e,r,n)},t.prototype.strokeRect=function(t,e,r,n){this._context.strokeRect(t,e,r,n)},t.prototype.fillText=function(t,e,r){this._context.fillText(t,e,r)},t.prototype.measureText=function(t){return this._context.measureText(t)},t.prototype.getImageData=function(t,e,r,n){return this._context.getImageData(t,e,r,n)},t.prototype.lineTo=function(t,e){this._context.lineTo(t,e)},t.prototype.moveTo=function(t,e){this._context.moveTo(t,e)},t.prototype.rect=function(t,e,r,n){this._context.rect(t,e,r,n)},t.prototype.putImageData=function(t,e,r){this._context.putImageData(t,e,r)},t.prototype.quadraticCurveTo=function(t,e,r,n){this._context.quadraticCurveTo(t,e,r,n)},t.prototype.restore=function(){this._context.restore()},t.prototype.rotate=function(t){this._context.rotate(t)},t.prototype.save=function(){this._context.save()},t.prototype.scale=function(t,e){this._context.scale(t,e)},t.prototype.setLineDash=function(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)},t.prototype.getLineDash=function(){return this._context.getLineDash()},t.prototype.setTransform=function(t,e,r,n,i,o){this._context.setTransform(t,e,r,n,i,o)},t.prototype.stroke=function(){this._context.stroke()},t.prototype.strokeText=function(t,e,r,n){this._context.strokeText(t,e,r,n)},t.prototype.transform=function(t,e,r,n,i,o){this._context.transform(t,e,r,n,i,o)},t.prototype.translate=function(t,e){this._context.translate(t,e)},t.prototype._enableTrace=function(){var t,e,r=this,n=s.length,i=o.Util._simplifyArray,a=this.setAttr,l=function(t){var n,o=r[t];r[t]=function(){return e=i(Array.prototype.slice.call(arguments,0)),n=o.apply(r,arguments),r._trace({method:t,args:e}),n}};for(t=0;t<n;t++)l(s[t]);r.setAttr=function(){a.apply(r,arguments);var t=arguments[0],e=arguments[1];"shadowOffsetX"!==t&&"shadowOffsetY"!==t&&"shadowBlur"!==t||(e/=this.canvas.getPixelRatio()),r._trace({property:t,val:e})}},t.prototype._applyGlobalCompositeOperation=function(t){var e=t.getGlobalCompositeOperation();"source-over"!==e&&this.setAttr("globalCompositeOperation",e)},t}();e.Context=l,["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"].forEach((function(t){Object.defineProperty(l.prototype,t,{get:function(){return this._context[t]},set:function(e){this._context[t]=e}})}));var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._fillColor=function(t){var e=t.fill();this.setAttr("fillStyle",e),t._fillFunc(this)},e.prototype._fillPattern=function(t){var e=t.getFillPatternX(),r=t.getFillPatternY(),n=a.Konva.getAngle(t.getFillPatternRotation()),i=t.getFillPatternOffsetX(),o=t.getFillPatternOffsetY(),s=t.getFillPatternScaleX(),l=t.getFillPatternScaleY();(e||r)&&this.translate(e||0,r||0),n&&this.rotate(n),(s||l)&&this.scale(s,l),(i||o)&&this.translate(-1*i,-1*o),this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)},e.prototype._fillLinearGradient=function(t){var e=t._getLinearGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))},e.prototype._fillRadialGradient=function(t){var e=t._getRadialGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))},e.prototype._fill=function(t){var e=t.fill(),r=t.getFillPriority();if(e&&"color"===r)this._fillColor(t);else{var n=t.getFillPatternImage();if(n&&"pattern"===r)this._fillPattern(t);else{var i=t.getFillLinearGradientColorStops();if(i&&"linear-gradient"===r)this._fillLinearGradient(t);else{var o=t.getFillRadialGradientColorStops();o&&"radial-gradient"===r?this._fillRadialGradient(t):e?this._fillColor(t):n?this._fillPattern(t):i?this._fillLinearGradient(t):o&&this._fillRadialGradient(t)}}}},e.prototype._strokeLinearGradient=function(t){var e=t.getStrokeLinearGradientStartPoint(),r=t.getStrokeLinearGradientEndPoint(),n=t.getStrokeLinearGradientColorStops(),i=this.createLinearGradient(e.x,e.y,r.x,r.y);if(n){for(var o=0;o<n.length;o+=2)i.addColorStop(n[o],n[o+1]);this.setAttr("strokeStyle",i)}},e.prototype._stroke=function(t){var e=t.dash(),r=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!r){this.save();var n=this.getCanvas().getPixelRatio();this.setTransform(n,0,0,n,0,0)}this._applyLineCap(t),e&&t.dashEnabled()&&(this.setLineDash(e),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),t.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),r||this.restore()}},e.prototype._applyShadow=function(t){var e=o.Util,r=e.get(t.getShadowRGBA(),"black"),n=e.get(t.getShadowBlur(),5),i=e.get(t.getShadowOffset(),{x:0,y:0}),a=t.getAbsoluteScale(),s=this.canvas.getPixelRatio(),l=a.x*s,c=a.y*s;this.setAttr("shadowColor",r),this.setAttr("shadowBlur",n*Math.min(Math.abs(l),Math.abs(c))),this.setAttr("shadowOffsetX",i.x*l),this.setAttr("shadowOffsetY",i.y*c)},e}(l);e.SceneContext=c;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._fill=function(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()},e.prototype.strokeShape=function(t){t.hasHitStroke()&&this._stroke(t)},e.prototype._stroke=function(t){if(t.hasHitStroke()){var e=t.getStrokeScaleEnabled();if(!e){this.save();var r=this.getCanvas().getPixelRatio();this.setTransform(r,0,0,r,0,0)}this._applyLineCap(t);var n=t.hitStrokeWidth(),i="auto"===n?t.strokeWidth():n;this.setAttr("lineWidth",i),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),e||this.restore()}},e}(l);e.HitContext=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=new Map,o=void 0!==n.Konva._global.PointerEvent;function a(t){return{evt:t,pointerId:t.pointerId}}function s(t,e){var r=i.get(t);if(r){var n=r.getStage();n&&n.content,i.delete(t),o&&r._fire("lostpointercapture",a(new PointerEvent("lostpointercapture")))}}e.getCapturedShape=function(t){return i.get(t)},e.createEvent=a,e.hasPointerCapture=function(t,e){return i.get(t)===e},e.setPointerCapture=function(t,e){s(t),e.getStage()&&(i.set(t,e),o&&e._fire("gotpointercapture",a(new PointerEvent("gotpointercapture"))))},e.releaseCapture=s},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(3),a=r(7),s=r(4),l=r(0),c=r(8),u=function(t){function e(e){var r=t.call(this,e)||this;return r.canvas=new c.SceneCanvas,r._waitingForDraw=!1,r.on("visibleChange",r._checkVisibility),r._checkVisibility(),r.on("imageSmoothingEnabledChange",r._checkSmooth),r._checkSmooth(),r}return i(e,t),e.prototype.createPNGStream=function(){return this.canvas._canvas.createPNGStream()},e.prototype.getCanvas=function(){return this.canvas},e.prototype.getHitCanvas=function(){return this.hitCanvas},e.prototype.getContext=function(){return this.getCanvas().getContext()},e.prototype.clear=function(t){return this.getContext().clear(t),this},e.prototype.setZIndex=function(e){t.prototype.setZIndex.call(this,e);var r=this.getStage();return r&&(r.content.removeChild(this.getCanvas()._canvas),e<r.children.length-1?r.content.insertBefore(this.getCanvas()._canvas,r.children[e+1].getCanvas()._canvas):r.content.appendChild(this.getCanvas()._canvas)),this},e.prototype.moveToTop=function(){s.Node.prototype.moveToTop.call(this);var t=this.getStage();return t&&(t.content.removeChild(this.getCanvas()._canvas),t.content.appendChild(this.getCanvas()._canvas)),!0},e.prototype.moveUp=function(){if(!s.Node.prototype.moveUp.call(this))return!1;var t=this.getStage();return!!t&&(t.content.removeChild(this.getCanvas()._canvas),this.index<t.children.length-1?t.content.insertBefore(this.getCanvas()._canvas,t.children[this.index+1].getCanvas()._canvas):t.content.appendChild(this.getCanvas()._canvas),!0)},e.prototype.moveDown=function(){if(s.Node.prototype.moveDown.call(this)){var t=this.getStage();if(t){var e=t.children;t.content.removeChild(this.getCanvas()._canvas),t.content.insertBefore(this.getCanvas()._canvas,e[this.index+1].getCanvas()._canvas)}return!0}return!1},e.prototype.moveToBottom=function(){if(s.Node.prototype.moveToBottom.call(this)){var t=this.getStage();if(t){var e=t.children;t.content.removeChild(this.getCanvas()._canvas),t.content.insertBefore(this.getCanvas()._canvas,e[1].getCanvas()._canvas)}return!0}return!1},e.prototype.getLayer=function(){return this},e.prototype.hitGraphEnabled=function(){return!0},e.prototype.remove=function(){var t=this.getCanvas()._canvas;return s.Node.prototype.remove.call(this),t&&t.parentNode&&o.Util._isInDocument(t)&&t.parentNode.removeChild(t),this},e.prototype.getStage=function(){return this.parent},e.prototype.setSize=function(t){var e=t.width,r=t.height;return this.canvas.setSize(e,r),this},e.prototype._toKonvaCanvas=function(t){return(t=t||{}).width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=void 0!==t.x?t.x:this.x(),t.y=void 0!==t.y?t.y:this.y(),s.Node.prototype._toKonvaCanvas.call(this,t)},e.prototype._checkVisibility=function(){var t=this.visible();this.canvas._canvas.style.display=t?"block":"none"},e.prototype._checkSmooth=function(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()},e.prototype.getWidth=function(){if(this.parent)return this.parent.width()},e.prototype.setWidth=function(){o.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')},e.prototype.getHeight=function(){if(this.parent)return this.parent.height()},e.prototype.setHeight=function(){o.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')},e.prototype.getIntersection=function(t,e){return null},e.prototype.batchDraw=function(){var t=this;return this._waitingForDraw||(this._waitingForDraw=!0,o.Util.requestAnimFrame((function(){t.draw(),t._waitingForDraw=!1}))),this},e.prototype._applyTransform=function(t,e,r){var n=t.getAbsoluteTransform(r).getMatrix();e.transform(n[0],n[1],n[2],n[3],n[4],n[5])},e}(a.Container);e.BaseLayer=u,u.prototype.nodeType="BaseLayer",l.Factory.addGetterSetter(u,"imageSmoothingEnabled",!0),l.Factory.addGetterSetter(u,"clearBeforeDraw",!0),o.Collection.mapMethods(u)},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),o=this&&this.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<r;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n};Object.defineProperty(e,"__esModule",{value:!0});var a=r(3),s=r(0),l=r(5),c=r(2),u=r(1),f=function(t){function e(e){var r=t.call(this,e)||this;return r.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",(function(){this._clearCache("tensionPoints")})),r}return i(e,t),e.prototype._sceneFunc=function(t){var e,r,n,i=this.points(),o=i.length,a=this.tension(),s=this.closed(),l=this.bezier();if(o){if(t.beginPath(),t.moveTo(i[0],i[1]),0!==a&&o>4){for(r=(e=this.getTensionPoints()).length,n=s?0:4,s||t.quadraticCurveTo(e[0],e[1],e[2],e[3]);n<r-2;)t.bezierCurveTo(e[n++],e[n++],e[n++],e[n++],e[n++],e[n++]);s||t.quadraticCurveTo(e[r-2],e[r-1],i[o-2],i[o-1])}else if(l)for(n=2;n<o;)t.bezierCurveTo(i[n++],i[n++],i[n++],i[n++],i[n++],i[n++]);else for(n=2;n<o;n+=2)t.lineTo(i[n],i[n+1]);s?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}},e.prototype.getTensionPoints=function(){return this._getCache("tensionPoints",this._getTensionPoints)},e.prototype._getTensionPoints=function(){return this.closed()?this._getTensionPointsClosed():a.Util._expandPoints(this.points(),this.tension())},e.prototype._getTensionPointsClosed=function(){var t=this.points(),e=t.length,r=this.tension(),n=a.Util._getControlPoints(t[e-2],t[e-1],t[0],t[1],t[2],t[3],r),i=a.Util._getControlPoints(t[e-4],t[e-3],t[e-2],t[e-1],t[0],t[1],r),o=a.Util._expandPoints(t,r);return[n[2],n[3]].concat(o).concat([i[0],i[1],t[e-2],t[e-1],i[2],i[3],n[0],n[1],t[0],t[1]])},e.prototype.getWidth=function(){return this.getSelfRect().width},e.prototype.getHeight=function(){return this.getSelfRect().height},e.prototype.getSelfRect=function(){var t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};for(var e,r,n=(t=0!==this.tension()?o([t[0],t[1]],this._getTensionPoints(),[t[t.length-2],t[t.length-1]]):this.points())[0],i=t[0],a=t[1],s=t[1],l=0;l<t.length/2;l++)e=t[2*l],r=t[2*l+1],n=Math.min(n,e),i=Math.max(i,e),a=Math.min(a,r),s=Math.max(s,r);return{x:n,y:a,width:i-n,height:s-a}},e}(l.Shape);e.Line=f,f.prototype.className="Line",f.prototype._attrsAffectingSize=["points","bezier","tension"],u._registerNode(f),s.Factory.addGetterSetter(f,"closed",!1),s.Factory.addGetterSetter(f,"bezier",!1),s.Factory.addGetterSetter(f,"tension",0,c.getNumberValidator()),s.Factory.addGetterSetter(f,"points",[],c.getNumberArrayValidator()),a.Collection.mapMethods(f)},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(3),a=r(0),s=r(5),l=r(1),c=function(t){function e(r){var n=t.call(this,r)||this;n.dataArray=[],n.pathLength=0,n.dataArray=e.parsePathData(n.data()),n.pathLength=0;for(var i=0;i<n.dataArray.length;++i)n.pathLength+=n.dataArray[i].pathLength;return n.on("dataChange.konva",(function(){this.dataArray=e.parsePathData(this.data()),this.pathLength=0;for(var t=0;t<this.dataArray.length;++t)this.pathLength+=this.dataArray[t].pathLength})),n}return i(e,t),e.prototype._sceneFunc=function(t){var e=this.dataArray;t.beginPath();for(var r=!1,n=0;n<e.length;n++){var i=e[n].command,o=e[n].points;switch(i){case"L":t.lineTo(o[0],o[1]);break;case"M":t.moveTo(o[0],o[1]);break;case"C":t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"Q":t.quadraticCurveTo(o[0],o[1],o[2],o[3]);break;case"A":var a=o[0],s=o[1],l=o[2],c=o[3],u=o[4],f=o[5],h=o[6],p=o[7],d=l>c?l:c,y=l>c?1:l/c,v=l>c?c/l:1;t.translate(a,s),t.rotate(h),t.scale(y,v),t.arc(0,0,d,u,u+f,1-p),t.scale(1/y,1/v),t.rotate(-h),t.translate(-a,-s);break;case"z":r=!0,t.closePath()}}r||this.hasFill()?t.fillStrokeShape(this):t.strokeShape(this)},e.prototype.getSelfRect=function(){var t=[];this.dataArray.forEach((function(r){if("A"===r.command){var n=r.points[4],i=r.points[5],o=r.points[4]+i,a=Math.PI/180;if(Math.abs(n-o)<a&&(a=Math.abs(n-o)),i<0)for(var s=n-a;s>o;s-=a){var l=e.getPointOnEllipticalArc(r.points[0],r.points[1],r.points[2],r.points[3],s,0);t.push(l.x,l.y)}else for(s=n+a;s<o;s+=a){l=e.getPointOnEllipticalArc(r.points[0],r.points[1],r.points[2],r.points[3],s,0);t.push(l.x,l.y)}}else if("C"===r.command)for(s=0;s<=1;s+=.01){l=e.getPointOnCubicBezier(s,r.start.x,r.start.y,r.points[0],r.points[1],r.points[2],r.points[3],r.points[4],r.points[5]);t.push(l.x,l.y)}else t=t.concat(r.points)}));for(var r,n,i=t[0],o=t[0],a=t[1],s=t[1],l=0;l<t.length/2;l++)r=t[2*l],n=t[2*l+1],isNaN(r)||(i=Math.min(i,r),o=Math.max(o,r)),isNaN(n)||(a=Math.min(a,n),s=Math.max(s,n));return{x:Math.round(i),y:Math.round(a),width:Math.round(o-i),height:Math.round(s-a)}},e.prototype.getLength=function(){return this.pathLength},e.prototype.getPointAtLength=function(t){var r,n=0,i=this.dataArray.length;if(!i)return null;for(;n<i&&t>this.dataArray[n].pathLength;)t-=this.dataArray[n].pathLength,++n;if(n===i)return{x:(r=this.dataArray[n-1].points.slice(-2))[0],y:r[1]};if(t<.01)return{x:(r=this.dataArray[n].points.slice(0,2))[0],y:r[1]};var o=this.dataArray[n],a=o.points;switch(o.command){case"L":return e.getPointOnLine(t,o.start.x,o.start.y,a[0],a[1]);case"C":return e.getPointOnCubicBezier(t/o.pathLength,o.start.x,o.start.y,a[0],a[1],a[2],a[3],a[4],a[5]);case"Q":return e.getPointOnQuadraticBezier(t/o.pathLength,o.start.x,o.start.y,a[0],a[1],a[2],a[3]);case"A":var s=a[0],l=a[1],c=a[2],u=a[3],f=a[4],h=a[5],p=a[6];return f+=h*t/o.pathLength,e.getPointOnEllipticalArc(s,l,c,u,f,p)}return null},e.getLineLength=function(t,e,r,n){return Math.sqrt((r-t)*(r-t)+(n-e)*(n-e))},e.getPointOnLine=function(t,e,r,n,i,o,a){void 0===o&&(o=e),void 0===a&&(a=r);var s=(i-r)/(n-e+1e-8),l=Math.sqrt(t*t/(1+s*s));n<e&&(l*=-1);var c,u=s*l;if(n===e)c={x:o,y:a+u};else if((a-r)/(o-e+1e-8)===s)c={x:o+l,y:a+u};else{var f,h,p=this.getLineLength(e,r,n,i);if(p<1e-8)return;var d=(o-e)*(n-e)+(a-r)*(i-r);f=e+(d/=p*p)*(n-e),h=r+d*(i-r);var y=this.getLineLength(o,a,f,h),v=Math.sqrt(t*t-y*y);l=Math.sqrt(v*v/(1+s*s)),n<e&&(l*=-1),c={x:f+l,y:h+(u=s*l)}}return c},e.getPointOnCubicBezier=function(t,e,r,n,i,o,a,s,l){function c(t){return t*t*t}function u(t){return 3*t*t*(1-t)}function f(t){return 3*t*(1-t)*(1-t)}function h(t){return(1-t)*(1-t)*(1-t)}return{x:s*c(t)+o*u(t)+n*f(t)+e*h(t),y:l*c(t)+a*u(t)+i*f(t)+r*h(t)}},e.getPointOnQuadraticBezier=function(t,e,r,n,i,o,a){function s(t){return t*t}function l(t){return 2*t*(1-t)}function c(t){return(1-t)*(1-t)}return{x:o*s(t)+n*l(t)+e*c(t),y:a*s(t)+i*l(t)+r*c(t)}},e.getPointOnEllipticalArc=function(t,e,r,n,i,o){var a=Math.cos(o),s=Math.sin(o),l=r*Math.cos(i),c=n*Math.sin(i);return{x:t+(l*a-c*s),y:e+(l*s+c*a)}},e.parsePathData=function(t){if(!t)return[];var e=t,r=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];e=e.replace(new RegExp(" ","g"),",");for(var n=0;n<r.length;n++)e=e.replace(new RegExp(r[n],"g"),"|"+r[n]);var i,o=e.split("|"),a=[],s=[],l=0,c=0,u=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;for(n=1;n<o.length;n++){var f=o[n],h=f.charAt(0);for(f=f.slice(1),s.length=0;i=u.exec(f);)s.push(i[0]);for(var p=[],d=0,y=s.length;d<y;d++){var v=parseFloat(s[d]);isNaN(v)?p.push(0):p.push(v)}for(;p.length>0&&!isNaN(p[0]);){var g,b,m,w,_,S,O,x,P,k,C=null,T=[],j=l,E=c;switch(h){case"l":l+=p.shift(),c+=p.shift(),C="L",T.push(l,c);break;case"L":l=p.shift(),c=p.shift(),T.push(l,c);break;case"m":var A=p.shift(),R=p.shift();if(l+=A,c+=R,C="M",a.length>2&&"z"===a[a.length-1].command)for(var M=a.length-2;M>=0;M--)if("M"===a[M].command){l=a[M].points[0]+A,c=a[M].points[1]+R;break}T.push(l,c),h="l";break;case"M":l=p.shift(),c=p.shift(),C="M",T.push(l,c),h="L";break;case"h":l+=p.shift(),C="L",T.push(l,c);break;case"H":l=p.shift(),C="L",T.push(l,c);break;case"v":c+=p.shift(),C="L",T.push(l,c);break;case"V":c=p.shift(),C="L",T.push(l,c);break;case"C":T.push(p.shift(),p.shift(),p.shift(),p.shift()),l=p.shift(),c=p.shift(),T.push(l,c);break;case"c":T.push(l+p.shift(),c+p.shift(),l+p.shift(),c+p.shift()),l+=p.shift(),c+=p.shift(),C="C",T.push(l,c);break;case"S":b=l,m=c,"C"===(g=a[a.length-1]).command&&(b=l+(l-g.points[2]),m=c+(c-g.points[3])),T.push(b,m,p.shift(),p.shift()),l=p.shift(),c=p.shift(),C="C",T.push(l,c);break;case"s":b=l,m=c,"C"===(g=a[a.length-1]).command&&(b=l+(l-g.points[2]),m=c+(c-g.points[3])),T.push(b,m,l+p.shift(),c+p.shift()),l+=p.shift(),c+=p.shift(),C="C",T.push(l,c);break;case"Q":T.push(p.shift(),p.shift()),l=p.shift(),c=p.shift(),T.push(l,c);break;case"q":T.push(l+p.shift(),c+p.shift()),l+=p.shift(),c+=p.shift(),C="Q",T.push(l,c);break;case"T":b=l,m=c,"Q"===(g=a[a.length-1]).command&&(b=l+(l-g.points[0]),m=c+(c-g.points[1])),l=p.shift(),c=p.shift(),C="Q",T.push(b,m,l,c);break;case"t":b=l,m=c,"Q"===(g=a[a.length-1]).command&&(b=l+(l-g.points[0]),m=c+(c-g.points[1])),l+=p.shift(),c+=p.shift(),C="Q",T.push(b,m,l,c);break;case"A":w=p.shift(),_=p.shift(),S=p.shift(),O=p.shift(),x=p.shift(),P=l,k=c,l=p.shift(),c=p.shift(),C="A",T=this.convertEndpointToCenterParameterization(P,k,l,c,O,x,w,_,S);break;case"a":w=p.shift(),_=p.shift(),S=p.shift(),O=p.shift(),x=p.shift(),P=l,k=c,l+=p.shift(),c+=p.shift(),C="A",T=this.convertEndpointToCenterParameterization(P,k,l,c,O,x,w,_,S)}a.push({command:C||h,points:T,start:{x:j,y:E},pathLength:this.calcLength(j,E,C||h,T)})}"z"!==h&&"Z"!==h||a.push({command:"z",points:[],start:void 0,pathLength:0})}return a},e.calcLength=function(t,r,n,i){var o,a,s,l,c=e;switch(n){case"L":return c.getLineLength(t,r,i[0],i[1]);case"C":for(o=0,a=c.getPointOnCubicBezier(0,t,r,i[0],i[1],i[2],i[3],i[4],i[5]),l=.01;l<=1;l+=.01)s=c.getPointOnCubicBezier(l,t,r,i[0],i[1],i[2],i[3],i[4],i[5]),o+=c.getLineLength(a.x,a.y,s.x,s.y),a=s;return o;case"Q":for(o=0,a=c.getPointOnQuadraticBezier(0,t,r,i[0],i[1],i[2],i[3]),l=.01;l<=1;l+=.01)s=c.getPointOnQuadraticBezier(l,t,r,i[0],i[1],i[2],i[3]),o+=c.getLineLength(a.x,a.y,s.x,s.y),a=s;return o;case"A":o=0;var u=i[4],f=i[5],h=i[4]+f,p=Math.PI/180;if(Math.abs(u-h)<p&&(p=Math.abs(u-h)),a=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],u,0),f<0)for(l=u-p;l>h;l-=p)s=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],l,0),o+=c.getLineLength(a.x,a.y,s.x,s.y),a=s;else for(l=u+p;l<h;l+=p)s=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],l,0),o+=c.getLineLength(a.x,a.y,s.x,s.y),a=s;return s=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],h,0),o+=c.getLineLength(a.x,a.y,s.x,s.y)}return 0},e.convertEndpointToCenterParameterization=function(t,e,r,n,i,o,a,s,l){var c=l*(Math.PI/180),u=Math.cos(c)*(t-r)/2+Math.sin(c)*(e-n)/2,f=-1*Math.sin(c)*(t-r)/2+Math.cos(c)*(e-n)/2,h=u*u/(a*a)+f*f/(s*s);h>1&&(a*=Math.sqrt(h),s*=Math.sqrt(h));var p=Math.sqrt((a*a*(s*s)-a*a*(f*f)-s*s*(u*u))/(a*a*(f*f)+s*s*(u*u)));i===o&&(p*=-1),isNaN(p)&&(p=0);var d=p*a*f/s,y=p*-s*u/a,v=(t+r)/2+Math.cos(c)*d-Math.sin(c)*y,g=(e+n)/2+Math.sin(c)*d+Math.cos(c)*y,b=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},m=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(b(t)*b(e))},w=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(m(t,e))},_=w([1,0],[(u-d)/a,(f-y)/s]),S=[(u-d)/a,(f-y)/s],O=[(-1*u-d)/a,(-1*f-y)/s],x=w(S,O);return m(S,O)<=-1&&(x=Math.PI),m(S,O)>=1&&(x=0),0===o&&x>0&&(x-=2*Math.PI),1===o&&x<0&&(x+=2*Math.PI),[v,g,a,s,_,x,c,o]},e}(s.Shape);e.Path=c,c.prototype.className="Path",c.prototype._attrsAffectingSize=["data"],l._registerNode(c),a.Factory.addGetterSetter(c,"data"),o.Collection.mapMethods(c)},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(3),a=r(0),s=r(5),l=r(1),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(t){var e=this.cornerRadius(),r=this.width(),n=this.height();if(t.beginPath(),e){var i=0,o=0,a=0,s=0;"number"==typeof e?i=o=a=s=Math.min(e,r/2,n/2):(i=Math.min(e[0],r/2,n/2),o=Math.min(e[1],r/2,n/2),s=Math.min(e[2],r/2,n/2),a=Math.min(e[3],r/2,n/2)),t.moveTo(i,0),t.lineTo(r-o,0),t.arc(r-o,o,o,3*Math.PI/2,0,!1),t.lineTo(r,n-s),t.arc(r-s,n-s,s,0,Math.PI/2,!1),t.lineTo(a,n),t.arc(a,n-a,a,Math.PI/2,Math.PI,!1),t.lineTo(0,i),t.arc(i,i,i,Math.PI,3*Math.PI/2,!1)}else t.rect(0,0,r,n);t.closePath(),t.fillStrokeShape(this)},e}(s.Shape);e.Rect=c,c.prototype.className="Rect",l._registerNode(c),a.Factory.addGetterSetter(c,"cornerRadius",0),o.Collection.mapMethods(c)},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=r(3),s=r(0),l=r(5),c=r(1),u=r(2),f=r(1),h=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],p=h.length;function d(){return o||(o=a.Util.createCanvasElement().getContext("2d"))}String.prototype.trimRight;var y=function(t){function e(e){var r=t.call(this,function(t){return(t=t||{}).fillLinearGradientColorStops||t.fillRadialGradientColorStops||t.fillPatternImage||(t.fill=t.fill||"black"),t}(e))||this;r._partialTextX=0,r._partialTextY=0;for(var n=0;n<p;n++)r.on(h[n]+"Change.konva",r._setTextData);return r._setTextData(),r}return i(e,t),e.prototype._sceneFunc=function(t){var e,r=this.padding(),n=this.fontSize(),i=this.lineHeight()*n,o=this.textArr,a=o.length,s=this.verticalAlign(),l=0,c=this.align(),u=this.getWidth(),f=this.letterSpacing(),h=this.fill(),p=this.textDecoration(),d=-1!==p.indexOf("underline"),y=-1!==p.indexOf("line-through"),v=0,g=(v=i/2,0),b=0;for(t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline","middle"),t.setAttr("textAlign","left"),"middle"===s?l=(this.getHeight()-a*i-2*r)/2:"bottom"===s&&(l=this.getHeight()-a*i-2*r),t.translate(r,l+r),e=0;e<a;e++){g=0,b=0;var m,w,_,S=o[e],O=S.text,x=S.width,P=e!==a-1;if(t.save(),"right"===c?g+=u-x-2*r:"center"===c&&(g+=(u-x-2*r)/2),d&&(t.save(),t.beginPath(),t.moveTo(g,v+b+Math.round(n/2)),w=0===(m=O.split(" ").length-1),_="justify"===c&&P&&!w?u-2*r:x,t.lineTo(g+Math.round(_),v+b+Math.round(n/2)),t.lineWidth=n/15,t.strokeStyle=h,t.stroke(),t.restore()),y&&(t.save(),t.beginPath(),t.moveTo(g,v+b),w=0===(m=O.split(" ").length-1),_="justify"===c&&P&&!w?u-2*r:x,t.lineTo(g+Math.round(_),v+b),t.lineWidth=n/15,t.strokeStyle=h,t.stroke(),t.restore()),0!==f||"justify"===c){m=O.split(" ").length-1;for(var k=0;k<O.length;k++){var C=O[k];" "===C&&e!==a-1&&"justify"===c&&(g+=Math.floor((u-2*r-x)/m)),this._partialTextX=g,this._partialTextY=v+b,this._partialText=C,t.fillStrokeShape(this),g+=Math.round(this.measureSize(C).width)+f}}else this._partialTextX=g,this._partialTextY=v+b,this._partialText=O,t.fillStrokeShape(this);t.restore(),a>1&&(v+=i)}},e.prototype._hitFunc=function(t){var e=this.getWidth(),r=this.getHeight();t.beginPath(),t.rect(0,0,e,r),t.closePath(),t.fillStrokeShape(this)},e.prototype.setText=function(t){var e=a.Util._isString(t)?t:null==t?"":t+"";return this._setAttr("text",e),this},e.prototype.getWidth=function(){return"auto"===this.attrs.width||void 0===this.attrs.width?this.getTextWidth()+2*this.padding():this.attrs.width},e.prototype.getHeight=function(){return"auto"===this.attrs.height||void 0===this.attrs.height?this.fontSize()*this.textArr.length*this.lineHeight()+2*this.padding():this.attrs.height},e.prototype.getTextWidth=function(){return this.textWidth},e.prototype.getTextHeight=function(){return a.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight},e.prototype.measureSize=function(t){var e,r=d(),n=this.fontSize();return r.save(),r.font=this._getContextFont(),e=r.measureText(t),r.restore(),{width:e.width,height:n}},e.prototype._getContextFont=function(){return c.Konva.UA.isIE?this.fontStyle()+" "+this.fontSize()+"px "+this.fontFamily():this.fontStyle()+" "+this.fontVariant()+" "+this.fontSize()+"px "+this.fontFamily()},e.prototype._addTextLine=function(t){"justify"===this.align()&&(t=t.trim());var e=this._getTextWidth(t);return this.textArr.push({text:t,width:e})},e.prototype._getTextWidth=function(t){var e=this.letterSpacing(),r=t.length;return d().measureText(t).width+(r?e*(r-1):0)},e.prototype._setTextData=function(){var t=this.text().split("\n"),e=+this.fontSize(),r=0,n=this.lineHeight()*e,i=this.attrs.width,o=this.attrs.height,a="auto"!==i&&void 0!==i,s="auto"!==o&&void 0!==o,l=this.padding(),c=i-2*l,u=o-2*l,f=0,h=this.wrap(),p="none"!==h,y="char"!==h&&p,v=this.ellipsis()&&!p;this.textArr=[],d().font=this._getContextFont();for(var g=v?this._getTextWidth(""):0,b=0,m=t.length;b<m;++b){var w=t[b],_=this._getTextWidth(w);if(a&&_>c)for(;w.length>0;){for(var S=0,O=w.length,x="",P=0;S<O;){var k=S+O>>>1,C=w.slice(0,k+1),T=this._getTextWidth(C)+g;T<=c?(S=k+1,x=C+(v?"":""),P=T):O=k}if(!x)break;if(y){var j,E=w[x.length];(j=(" "===E||"-"===E)&&P<=c?x.length:Math.max(x.lastIndexOf(" "),x.lastIndexOf("-"))+1)>0&&(S=j,x=x.slice(0,S),P=this._getTextWidth(x))}if(x=x.trimRight(),this._addTextLine(x),r=Math.max(r,P),f+=n,!p||s&&f+n>u)break;if((w=(w=w.slice(S)).trimLeft()).length>0&&(_=this._getTextWidth(w))<=c){this._addTextLine(w),f+=n,r=Math.max(r,_);break}}else this._addTextLine(w),f+=n,r=Math.max(r,_);if(s&&f+n>u)break}this.textHeight=e,this.textWidth=r},e.prototype.getStrokeScaleEnabled=function(){return!0},e}(l.Shape);e.Text=y,y.prototype._fillFunc=function(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)},y.prototype._strokeFunc=function(t){t.strokeText(this._partialText,this._partialTextX,this._partialTextY)},y.prototype.className="Text",y.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight"],f._registerNode(y),s.Factory.overWriteSetter(y,"width",u.getNumberOrAutoValidator()),s.Factory.overWriteSetter(y,"height",u.getNumberOrAutoValidator()),s.Factory.addGetterSetter(y,"fontFamily","Arial"),s.Factory.addGetterSetter(y,"fontSize",12,u.getNumberValidator()),s.Factory.addGetterSetter(y,"fontStyle","normal"),s.Factory.addGetterSetter(y,"fontVariant","normal"),s.Factory.addGetterSetter(y,"padding",0,u.getNumberValidator()),s.Factory.addGetterSetter(y,"align","left"),s.Factory.addGetterSetter(y,"verticalAlign","top"),s.Factory.addGetterSetter(y,"lineHeight",1,u.getNumberValidator()),s.Factory.addGetterSetter(y,"wrap","word"),s.Factory.addGetterSetter(y,"ellipsis",!1),s.Factory.addGetterSetter(y,"letterSpacing",0,u.getNumberValidator()),s.Factory.addGetterSetter(y,"text","",u.getStringValidator()),s.Factory.addGetterSetter(y,"textDecoration",""),a.Collection.mapMethods(y)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(21),i=r(27),o=r(28),a=r(29),s=r(30),l=r(31),c=r(32),u=r(16),f=r(17),h=r(18),p=r(33),d=r(34),y=r(35),v=r(36),g=r(19),b=r(37),m=r(38),w=r(39),_=r(40),S=r(41),O=r(42),x=r(43),P=r(44),k=r(45),C=r(46),T=r(47),j=r(48),E=r(49),A=r(50),R=r(51),M=r(52),F=r(53),I=r(54),D=r(55),N=r(56),G=r(57),L=r(58);e.Konva=n.Konva.Util._assign(n.Konva,{Arc:i.Arc,Arrow:o.Arrow,Circle:a.Circle,Ellipse:s.Ellipse,Image:l.Image,Label:c.Label,Tag:c.Tag,Line:u.Line,Path:f.Path,Rect:h.Rect,RegularPolygon:p.RegularPolygon,Ring:d.Ring,Sprite:y.Sprite,Star:v.Star,Text:g.Text,TextPath:b.TextPath,Transformer:m.Transformer,Wedge:w.Wedge,Filters:{Blur:_.Blur,Brighten:S.Brighten,Contrast:O.Contrast,Emboss:x.Emboss,Enhance:P.Enhance,Grayscale:k.Grayscale,HSL:C.HSL,HSV:T.HSV,Invert:j.Invert,Kaleidoscope:E.Kaleidoscope,Mask:A.Mask,Noise:R.Noise,Pixelate:M.Pixelate,Posterize:F.Posterize,RGB:I.RGB,RGBA:D.RGBA,Sepia:N.Sepia,Solarize:G.Solarize,Threshold:L.Threshold}})},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=r(3),o=r(4),a=r(7),s=r(23),l=r(24),c=r(25),u=r(10),f=r(9),h=r(5),p=r(11),d=r(26),y=r(13),v=r(8);e.Konva=i.Util._assign(n.Konva,{Collection:i.Collection,Util:i.Util,Transform:i.Transform,Node:o.Node,ids:o.ids,names:o.names,Container:a.Container,Stage:s.Stage,stages:s.stages,Layer:l.Layer,FastLayer:c.FastLayer,Group:u.Group,DD:f.DD,Shape:h.Shape,shapes:h.shapes,Animation:p.Animation,Tween:d.Tween,Easings:d.Easings,Context:y.Context,Canvas:v.Canvas})},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(3),a=r(0),s=r(7),l=r(1),c=r(8),u=r(9),f=r(1),h=r(14),p=["mouseenter","mousedown","mousemove","mouseup","mouseout","touchstart","touchmove","touchend","mouseover","wheel","contextmenu","pointerdown","pointermove","pointerup","pointercancel","lostpointercapture"],d=p.length;function y(t,e){t.content.addEventListener(e,(function(r){t["_"+e](r)}),!1)}function v(t){return void 0===t&&(t={}),(t.clipFunc||t.clipWidth||t.clipHeight)&&o.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),t}e.stages=[];var g=function(t){function r(r){var n=t.call(this,v(r))||this;return n._pointerPositions=[],n._changedPointerPositions=[],n._buildDOM(),n._bindContentEvents(),e.stages.push(n),n.on("widthChange.konva heightChange.konva",n._resizeDOM),n.on("visibleChange.konva",n._checkVisibility),n.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",(function(){v(n.attrs)})),n._checkVisibility(),n}return i(r,t),r.prototype._validateAdd=function(t){var e="Layer"===t.getType(),r="FastLayer"===t.getType();e||r||o.Util.throw("You may only add layers to the stage.")},r.prototype._checkVisibility=function(){if(this.content){var t=this.visible()?"":"none";this.content.style.display=t}},r.prototype.setContainer=function(t){if("string"==typeof t){if("."===t.charAt(0)){var e=t.slice(1);t=document.getElementsByClassName(e)[0]}else{var r;r="#"!==t.charAt(0)?t:t.slice(1),t=document.getElementById(r)}if(!t)throw"Can not find container in document with id "+r}return this._setAttr("container",t),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),t.appendChild(this.content)),this},r.prototype.shouldDrawHit=function(){return!0},r.prototype.clear=function(){var t,e=this.children,r=e.length;for(t=0;t<r;t++)e[t].clear();return this},r.prototype.clone=function(t){return t||(t={}),t.container=document.createElement("div"),s.Container.prototype.clone.call(this,t)},r.prototype.destroy=function(){t.prototype.destroy.call(this);var r=this.content;r&&o.Util._isInDocument(r)&&this.container().removeChild(r);var n=e.stages.indexOf(this);return n>-1&&e.stages.splice(n,1),this},r.prototype.getPointerPosition=function(){var t=this._pointerPositions[0]||this._changedPointerPositions[0];return t?{x:t.x,y:t.y}:(o.Util.warn("Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);"),null)},r.prototype._getPointerById=function(t){return this._pointerPositions.find((function(e){return e.id===t}))},r.prototype.getPointersPositions=function(){return this._pointerPositions},r.prototype.getStage=function(){return this},r.prototype.getContent=function(){return this.content},r.prototype._toKonvaCanvas=function(t){var e=(t=t||{}).x||0,r=t.y||0,n=new c.SceneCanvas({width:t.width||this.width(),height:t.height||this.height(),pixelRatio:t.pixelRatio||1}),i=n.getContext()._context,o=this.children;return(e||r)&&i.translate(-1*e,-1*r),o.each((function(n){if(n.isVisible()){var o=n._toKonvaCanvas(t);i.drawImage(o._canvas,e,r,o.getWidth()/o.getPixelRatio(),o.getHeight()/o.getPixelRatio())}})),n},r.prototype.getIntersection=function(t,e){if(!t)return null;var r,n,i=this.children;for(r=i.length-1;r>=0;r--)if(n=i[r].getIntersection(t,e))return n;return null},r.prototype._resizeDOM=function(){var t=this.width(),e=this.height();this.content&&(this.content.style.width=t+"px",this.content.style.height=e+"px"),this.bufferCanvas.setSize(t,e),this.bufferHitCanvas.setSize(t,e),this.children.each((function(r){r.setSize({width:t,height:e}),r.draw()}))},r.prototype.add=function(e){if(arguments.length>1){for(var r=0;r<arguments.length;r++)this.add(arguments[r]);return this}t.prototype.add.call(this,e);var n=this.children.length;return n>5&&o.Util.warn("The stage has "+n+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),e._setCanvasSize(this.width(),this.height()),e.draw(),l.Konva.isBrowser&&this.content.appendChild(e.canvas._canvas),this},r.prototype.getParent=function(){return null},r.prototype.getLayer=function(){return null},r.prototype.hasPointerCapture=function(t){return h.hasPointerCapture(t,this)},r.prototype.setPointerCapture=function(t){h.setPointerCapture(t,this)},r.prototype.releaseCapture=function(t){h.releaseCapture(t,this)},r.prototype.getLayers=function(){return this.getChildren()},r.prototype._bindContentEvents=function(){if(l.Konva.isBrowser)for(var t=0;t<d;t++)y(this,p[t])},r.prototype._mouseenter=function(t){this.setPointersPositions(t),this._fire("mouseenter",{evt:t,target:this,currentTarget:this})},r.prototype._mouseover=function(t){this.setPointersPositions(t),this._fire("contentMouseover",{evt:t}),this._fire("mouseover",{evt:t,target:this,currentTarget:this})},r.prototype._mouseout=function(t){this.setPointersPositions(t);var e=this.targetShape,r=!u.DD.isDragging||l.Konva.hitOnDragEnabled;e&&r?(e._fireAndBubble("mouseout",{evt:t}),e._fireAndBubble("mouseleave",{evt:t}),this._fire("mouseleave",{evt:t,target:this,currentTarget:this}),this.targetShape=null):r&&(this._fire("mouseleave",{evt:t,target:this,currentTarget:this}),this._fire("mouseout",{evt:t,target:this,currentTarget:this})),this.pointerPos=void 0,this._pointerPositions=[],this._fire("contentMouseout",{evt:t})},r.prototype._mousemove=function(t){if(l.Konva.UA.ieMobile)return this._touchmove(t);this.setPointersPositions(t);var e,r=o.Util._getFirstPointerId(t),n=!u.DD.isDragging||l.Konva.hitOnDragEnabled;if(n){if((e=this.getIntersection(this.getPointerPosition()))&&e.isListening()){var i=!this.targetShape||this.targetShape!==e;n&&i?(this.targetShape&&(this.targetShape._fireAndBubble("mouseout",{evt:t,pointerId:r},e),this.targetShape._fireAndBubble("mouseleave",{evt:t,pointerId:r},e)),e._fireAndBubble("mouseover",{evt:t,pointerId:r},this.targetShape),e._fireAndBubble("mouseenter",{evt:t,pointerId:r},this.targetShape),e._fireAndBubble("mousemove",{evt:t,pointerId:r}),this.targetShape=e):e._fireAndBubble("mousemove",{evt:t,pointerId:r})}else this.targetShape&&n&&(this.targetShape._fireAndBubble("mouseout",{evt:t,pointerId:r}),this.targetShape._fireAndBubble("mouseleave",{evt:t,pointerId:r}),this._fire("mouseover",{evt:t,target:this,currentTarget:this,pointerId:r}),this.targetShape=null),this._fire("mousemove",{evt:t,target:this,currentTarget:this,pointerId:r});this._fire("contentMousemove",{evt:t})}t.cancelable&&t.preventDefault()},r.prototype._mousedown=function(t){if(l.Konva.UA.ieMobile)return this._touchstart(t);this.setPointersPositions(t);var e=o.Util._getFirstPointerId(t),r=this.getIntersection(this.getPointerPosition());u.DD.justDragged=!1,l.Konva.listenClickTap=!0,r&&r.isListening()?(this.clickStartShape=r,r._fireAndBubble("mousedown",{evt:t,pointerId:e})):this._fire("mousedown",{evt:t,target:this,currentTarget:this,pointerId:e}),this._fire("contentMousedown",{evt:t})},r.prototype._mouseup=function(t){if(l.Konva.UA.ieMobile)return this._touchend(t);this.setPointersPositions(t);var e=o.Util._getFirstPointerId(t),r=this.getIntersection(this.getPointerPosition()),n=this.clickStartShape,i=this.clickEndShape,a=!1;l.Konva.inDblClickWindow?(a=!0,clearTimeout(this.dblTimeout)):u.DD.justDragged||(l.Konva.inDblClickWindow=!0,clearTimeout(this.dblTimeout)),this.dblTimeout=setTimeout((function(){l.Konva.inDblClickWindow=!1}),l.Konva.dblClickWindow),r&&r.isListening()?(this.clickEndShape=r,r._fireAndBubble("mouseup",{evt:t,pointerId:e}),l.Konva.listenClickTap&&n&&n._id===r._id&&(r._fireAndBubble("click",{evt:t,pointerId:e}),a&&i&&i===r&&r._fireAndBubble("dblclick",{evt:t,pointerId:e}))):(this._fire("mouseup",{evt:t,target:this,currentTarget:this,pointerId:e}),l.Konva.listenClickTap&&this._fire("click",{evt:t,target:this,currentTarget:this,pointerId:e}),a&&this._fire("dblclick",{evt:t,target:this,currentTarget:this,pointerId:e})),this._fire("contentMouseup",{evt:t}),l.Konva.listenClickTap&&(this._fire("contentClick",{evt:t}),a&&this._fire("contentDblclick",{evt:t})),l.Konva.listenClickTap=!1,t.cancelable&&t.preventDefault()},r.prototype._contextmenu=function(t){this.setPointersPositions(t);var e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble("contextmenu",{evt:t}):this._fire("contextmenu",{evt:t,target:this,currentTarget:this}),this._fire("contentContextmenu",{evt:t})},r.prototype._touchstart=function(t){var e=this;this.setPointersPositions(t);var r=!1;this._changedPointerPositions.forEach((function(n){var i=e.getIntersection(n);l.Konva.listenClickTap=!0,u.DD.justDragged=!1,i&&i.isListening()&&(l.Konva.captureTouchEventsEnabled&&i.setPointerCapture(n.id),e.tapStartShape=i,i._fireAndBubble("touchstart",{evt:t,pointerId:n.id},e),r=!0,i.isListening()&&i.preventDefault()&&t.cancelable&&t.preventDefault())})),r||this._fire("touchstart",{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),this._fire("contentTouchstart",{evt:t})},r.prototype._touchmove=function(t){var e=this;if(this.setPointersPositions(t),!u.DD.isDragging||l.Konva.hitOnDragEnabled){var r=!1,n={};this._changedPointerPositions.forEach((function(i){var o=h.getCapturedShape(i.id)||e.getIntersection(i);o&&o.isListening()&&(n[o._id]||(n[o._id]=!0,o._fireAndBubble("touchmove",{evt:t,pointerId:i.id}),r=!0,o.isListening()&&o.preventDefault()&&t.cancelable&&t.preventDefault()))})),r||this._fire("touchmove",{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),this._fire("contentTouchmove",{evt:t})}u.DD.isDragging&&u.DD.node.preventDefault()&&t.cancelable&&t.preventDefault()},r.prototype._touchend=function(t){var e=this;this.setPointersPositions(t);var r=this.clickEndShape,n=!1;l.Konva.inDblClickWindow?(n=!0,clearTimeout(this.dblTimeout)):u.DD.justDragged||(l.Konva.inDblClickWindow=!0,clearTimeout(this.dblTimeout)),this.dblTimeout=setTimeout((function(){l.Konva.inDblClickWindow=!1}),l.Konva.dblClickWindow);var i=!1,o={},a=!1,s=!1;this._changedPointerPositions.forEach((function(c){var u=h.getCapturedShape(c.id)||e.getIntersection(c);u&&u.releaseCapture(c.id),u&&u.isListening()&&(o[u._id]||(o[u._id]=!0,e.clickEndShape=u,u._fireAndBubble("touchend",{evt:t,pointerId:c.id}),i=!0,l.Konva.listenClickTap&&u===e.tapStartShape&&(a=!0,u._fireAndBubble("tap",{evt:t,pointerId:c.id}),n&&r&&r===u&&(s=!0,u._fireAndBubble("dbltap",{evt:t,pointerId:c.id}))),u.isListening()&&u.preventDefault()&&t.cancelable&&t.preventDefault()))})),i||this._fire("touchend",{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),l.Konva.listenClickTap&&!a&&this._fire("tap",{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),n&&!s&&this._fire("dbltap",{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),this._fire("contentTouchend",{evt:t}),l.Konva.listenClickTap&&(this._fire("contentTap",{evt:t}),n&&this._fire("contentDbltap",{evt:t})),l.Konva.listenClickTap=!1},r.prototype._wheel=function(t){this.setPointersPositions(t);var e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble("wheel",{evt:t}):this._fire("wheel",{evt:t,target:this,currentTarget:this}),this._fire("contentWheel",{evt:t})},r.prototype._pointerdown=function(t){if(l.Konva._pointerEventsEnabled){this.setPointersPositions(t);var e=h.getCapturedShape(t.pointerId)||this.getIntersection(this.getPointerPosition());e&&e._fireAndBubble("pointerdown",h.createEvent(t))}},r.prototype._pointermove=function(t){if(l.Konva._pointerEventsEnabled){this.setPointersPositions(t);var e=h.getCapturedShape(t.pointerId)||this.getIntersection(this.getPointerPosition());e&&e._fireAndBubble("pointermove",h.createEvent(t))}},r.prototype._pointerup=function(t){if(l.Konva._pointerEventsEnabled){this.setPointersPositions(t);var e=h.getCapturedShape(t.pointerId)||this.getIntersection(this.getPointerPosition());e&&e._fireAndBubble("pointerup",h.createEvent(t)),h.releaseCapture(t.pointerId)}},r.prototype._pointercancel=function(t){if(l.Konva._pointerEventsEnabled){this.setPointersPositions(t);var e=h.getCapturedShape(t.pointerId)||this.getIntersection(this.getPointerPosition());e&&e._fireAndBubble("pointerup",h.createEvent(t)),h.releaseCapture(t.pointerId)}},r.prototype._lostpointercapture=function(t){h.releaseCapture(t.pointerId)},r.prototype.setPointersPositions=function(t){var e=this,r=this._getContentPosition(),n=null,i=null;void 0!==(t=t||window.event).touches?(this._pointerPositions=[],this._changedPointerPositions=[],o.Collection.prototype.each.call(t.touches,(function(t){e._pointerPositions.push({id:t.identifier,x:(t.clientX-r.left)/r.scaleX,y:(t.clientY-r.top)/r.scaleY})})),o.Collection.prototype.each.call(t.changedTouches||t.touches,(function(t){e._changedPointerPositions.push({id:t.identifier,x:(t.clientX-r.left)/r.scaleX,y:(t.clientY-r.top)/r.scaleY})}))):(n=(t.clientX-r.left)/r.scaleX,i=(t.clientY-r.top)/r.scaleY,this.pointerPos={x:n,y:i},this._pointerPositions=[{x:n,y:i,id:o.Util._getFirstPointerId(t)}],this._changedPointerPositions=[{x:n,y:i,id:o.Util._getFirstPointerId(t)}])},r.prototype._setPointerPosition=function(t){o.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(t)},r.prototype._getContentPosition=function(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var t=this.content.getBoundingClientRect();return{top:t.top,left:t.left,scaleX:t.width/this.content.clientWidth||1,scaleY:t.height/this.content.clientHeight||1}},r.prototype._buildDOM=function(){if(this.bufferCanvas=new c.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new c.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),l.Konva.isBrowser){var t=this.container();if(!t)throw"Stage has no container. A container is required.";t.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),t.appendChild(this.content),this._resizeDOM()}},r.prototype.cache=function(){return o.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this},r.prototype.clearCache=function(){return this},r.prototype.batchDraw=function(){return this.children.each((function(t){t.batchDraw()})),this},r}(s.Container);e.Stage=g,g.prototype.nodeType="Stage",f._registerNode(g),a.Factory.addGetterSetter(g,"container")},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(3),a=r(7),s=r(0),l=r(15),c=r(8),u=r(5),f=r(2),h=r(1),p=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],d=p.length,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hitCanvas=new c.HitCanvas({pixelRatio:1}),e}return i(e,t),e.prototype._setCanvasSize=function(t,e){this.canvas.setSize(t,e),this.hitCanvas.setSize(t,e),this._checkSmooth()},e.prototype._validateAdd=function(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&o.Util.throw("You may only add groups and shapes to a layer.")},e.prototype.getIntersection=function(t,e){var r,n,i,o;if(!this.hitGraphEnabled()||!this.isVisible())return null;for(var a=1,s=!1;;){for(n=0;n<d;n++){if(i=p[n],(o=(r=this._getIntersection({x:t.x+i.x*a,y:t.y+i.y*a})).shape)&&e)return o.findAncestor(e,!0);if(o)return o;if(s=!!r.antialiased,!r.antialiased)break}if(!s)return null;a+=1}},e.prototype._getIntersection=function(t){var e,r,n=this.hitCanvas.pixelRatio,i=this.hitCanvas.context.getImageData(Math.round(t.x*n),Math.round(t.y*n),1,1).data,a=i[3];return 255===a?(e=o.Util._rgbToHex(i[0],i[1],i[2]),(r=u.shapes["#"+e])?{shape:r}:{antialiased:!0}):a>0?{antialiased:!0}:{}},e.prototype.drawScene=function(t,e){var r=this.getLayer(),n=t||r&&r.getCanvas();return this._fire("beforeDraw",{node:this}),this.clearBeforeDraw()&&n.getContext().clear(),a.Container.prototype.drawScene.call(this,n,e),this._fire("draw",{node:this}),this},e.prototype.drawHit=function(t,e){var r=this.getLayer(),n=t||r&&r.hitCanvas;return r&&r.clearBeforeDraw()&&r.getHitCanvas().getContext().clear(),a.Container.prototype.drawHit.call(this,n,e),this},e.prototype.clear=function(t){return l.BaseLayer.prototype.clear.call(this,t),this.getHitCanvas().getContext().clear(t),this},e.prototype.enableHitGraph=function(){return this.hitGraphEnabled(!0),this},e.prototype.disableHitGraph=function(){return this.hitGraphEnabled(!1),this},e.prototype.toggleHitCanvas=function(){if(this.parent){var t=this.parent;!!this.hitCanvas._canvas.parentNode?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}},e.prototype.setSize=function(e){var r=e.width,n=e.height;return t.prototype.setSize.call(this,{width:r,height:n}),this.hitCanvas.setSize(r,n),this},e}(l.BaseLayer);e.Layer=y,y.prototype.nodeType="Layer",h._registerNode(y),s.Factory.addGetterSetter(y,"hitGraphEnabled",!0,f.getBooleanValidator()),o.Collection.mapMethods(y)},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(3),a=r(7),s=r(15),l=r(1),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._validateAdd=function(t){"Shape"!==t.getType()&&o.Util.throw("You may only add shapes to a fast layer.")},e.prototype._setCanvasSize=function(t,e){this.canvas.setSize(t,e),this._checkSmooth()},e.prototype.hitGraphEnabled=function(){return!1},e.prototype.drawScene=function(t){var e=this.getLayer(),r=t||e&&e.getCanvas();return this.clearBeforeDraw()&&r.getContext().clear(),a.Container.prototype.drawScene.call(this,r),this},e.prototype.draw=function(){return this.drawScene(),this},e}(s.BaseLayer);e.FastLayer=c,c.prototype.nodeType="FastLayer",l._registerNode(c),o.Collection.mapMethods(c)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(3),i=r(11),o=r(4),a=r(1),s={node:1,duration:1,easing:1,onFinish:1,yoyo:1},l=0,c=["fill","stroke","shadowColor"],u=function(){function t(t,e,r,n,i,o,a){this.prop=t,this.propFunc=e,this.begin=n,this._pos=n,this.duration=o,this._change=0,this.prevPos=0,this.yoyo=a,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=r,this._change=i-this.begin,this.pause()}return t.prototype.fire=function(t){var e=this[t];e&&e()},t.prototype.setTime=function(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():t<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())},t.prototype.getTime=function(){return this._time},t.prototype.setPosition=function(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t},t.prototype.getPosition=function(t){return void 0===t&&(t=this._time),this.func(t,this.begin,this._change,this.duration)},t.prototype.play=function(){this.state=2,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")},t.prototype.reverse=function(){this.state=3,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")},t.prototype.seek=function(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")},t.prototype.reset=function(){this.pause(),this._time=0,this.update(),this.fire("onReset")},t.prototype.finish=function(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")},t.prototype.update=function(){this.setPosition(this.getPosition(this._time))},t.prototype.onEnterFrame=function(){var t=this.getTimer()-this._startTime;2===this.state?this.setTime(t):3===this.state&&this.setTime(this.duration-t)},t.prototype.pause=function(){this.state=1,this.fire("onPause")},t.prototype.getTimer=function(){return(new Date).getTime()},t}(),f=function(){function t(r){var o,c,f=this,h=r.node,p=h._id,d=r.easing||e.Easings.Linear,y=!!r.yoyo;o=void 0===r.duration?.3:0===r.duration?.001:r.duration,this.node=h,this._id=l++;var v=h.getLayer()||(h instanceof a.Konva.Stage?h.getLayers():null);for(c in v||n.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new i.Animation((function(){f.tween.onEnterFrame()}),v),this.tween=new u(c,(function(t){f._tweenFunc(t)}),d,0,1,1e3*o,y),this._addListeners(),t.attrs[p]||(t.attrs[p]={}),t.attrs[p][this._id]||(t.attrs[p][this._id]={}),t.tweens[p]||(t.tweens[p]={}),r)void 0===s[c]&&this._addAttr(c,r[c]);this.reset(),this.onFinish=r.onFinish,this.onReset=r.onReset}return t.prototype._addAttr=function(e,r){var i,o,a,s,l,u,f,h,p=this.node,d=p._id;if((a=t.tweens[d][e])&&delete t.attrs[d][a][e],i=p.getAttr(e),n.Util._isArray(r))if(o=[],l=Math.max(r.length,i.length),"points"===e&&r.length!==i.length&&(r.length>i.length?(f=i,i=n.Util._prepareArrayForTween(i,r,p.closed())):(u=r,r=n.Util._prepareArrayForTween(r,i,p.closed()))),0===e.indexOf("fill"))for(s=0;s<l;s++)if(s%2==0)o.push(r[s]-i[s]);else{var y=n.Util.colorToRGBA(i[s]);h=n.Util.colorToRGBA(r[s]),i[s]=y,o.push({r:h.r-y.r,g:h.g-y.g,b:h.b-y.b,a:h.a-y.a})}else for(s=0;s<l;s++)o.push(r[s]-i[s]);else-1!==c.indexOf(e)?(i=n.Util.colorToRGBA(i),o={r:(h=n.Util.colorToRGBA(r)).r-i.r,g:h.g-i.g,b:h.b-i.b,a:h.a-i.a}):o=r-i;t.attrs[d][this._id][e]={start:i,diff:o,end:r,trueEnd:u,trueStart:f},t.tweens[d][e]=this._id},t.prototype._tweenFunc=function(e){var r,i,o,a,s,l,u,f,h=this.node,p=t.attrs[h._id][this._id];for(r in p){if(o=(i=p[r]).start,a=i.diff,f=i.end,n.Util._isArray(o))if(s=[],u=Math.max(o.length,f.length),0===r.indexOf("fill"))for(l=0;l<u;l++)l%2==0?s.push((o[l]||0)+a[l]*e):s.push("rgba("+Math.round(o[l].r+a[l].r*e)+","+Math.round(o[l].g+a[l].g*e)+","+Math.round(o[l].b+a[l].b*e)+","+(o[l].a+a[l].a*e)+")");else for(l=0;l<u;l++)s.push((o[l]||0)+a[l]*e);else s=-1!==c.indexOf(r)?"rgba("+Math.round(o.r+a.r*e)+","+Math.round(o.g+a.g*e)+","+Math.round(o.b+a.b*e)+","+(o.a+a.a*e)+")":o+a*e;h.setAttr(r,s)}},t.prototype._addListeners=function(){var e=this;this.tween.onPlay=function(){e.anim.start()},this.tween.onReverse=function(){e.anim.start()},this.tween.onPause=function(){e.anim.stop()},this.tween.onFinish=function(){var r=e.node,n=t.attrs[r._id][e._id];n.points&&n.points.trueEnd&&r.setAttr("points",n.points.trueEnd),e.onFinish&&e.onFinish.call(e)},this.tween.onReset=function(){var r=e.node,n=t.attrs[r._id][e._id];n.points&&n.points.trueStart&&r.points(n.points.trueStart),e.onReset&&e.onReset()}},t.prototype.play=function(){return this.tween.play(),this},t.prototype.reverse=function(){return this.tween.reverse(),this},t.prototype.reset=function(){return this.tween.reset(),this},t.prototype.seek=function(t){return this.tween.seek(1e3*t),this},t.prototype.pause=function(){return this.tween.pause(),this},t.prototype.finish=function(){return this.tween.finish(),this},t.prototype.destroy=function(){var e,r=this.node._id,n=this._id,i=t.tweens[r];for(e in this.pause(),i)delete t.tweens[r][e];delete t.attrs[r][n]},t.attrs={},t.tweens={},t}();e.Tween=f,o.Node.prototype.to=function(t){var e=t.onFinish;t.node=this,t.onFinish=function(){this.destroy(),e&&e()},new f(t).play()},e.Easings={BackEaseIn:function(t,e,r,n){var i=1.70158;return r*(t/=n)*t*((i+1)*t-i)+e},BackEaseOut:function(t,e,r,n){var i=1.70158;return r*((t=t/n-1)*t*((i+1)*t+i)+1)+e},BackEaseInOut:function(t,e,r,n){var i=1.70158;return(t/=n/2)<1?r/2*(t*t*((1+(i*=1.525))*t-i))+e:r/2*((t-=2)*t*((1+(i*=1.525))*t+i)+2)+e},ElasticEaseIn:function(t,e,r,n,i,o){var a=0;return 0===t?e:1==(t/=n)?e+r:(o||(o=.3*n),!i||i<Math.abs(r)?(i=r,a=o/4):a=o/(2*Math.PI)*Math.asin(r/i),-i*Math.pow(2,10*(t-=1))*Math.sin((t*n-a)*(2*Math.PI)/o)+e)},ElasticEaseOut:function(t,e,r,n,i,o){var a=0;return 0===t?e:1==(t/=n)?e+r:(o||(o=.3*n),!i||i<Math.abs(r)?(i=r,a=o/4):a=o/(2*Math.PI)*Math.asin(r/i),i*Math.pow(2,-10*t)*Math.sin((t*n-a)*(2*Math.PI)/o)+r+e)},ElasticEaseInOut:function(t,e,r,n,i,o){var a=0;return 0===t?e:2==(t/=n/2)?e+r:(o||(o=n*(.3*1.5)),!i||i<Math.abs(r)?(i=r,a=o/4):a=o/(2*Math.PI)*Math.asin(r/i),t<1?i*Math.pow(2,10*(t-=1))*Math.sin((t*n-a)*(2*Math.PI)/o)*-.5+e:i*Math.pow(2,-10*(t-=1))*Math.sin((t*n-a)*(2*Math.PI)/o)*.5+r+e)},BounceEaseOut:function(t,e,r,n){return(t/=n)<1/2.75?r*(7.5625*t*t)+e:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+e:r*(7.5625*(t-=2.625/2.75)*t+.984375)+e},BounceEaseIn:function(t,r,n,i){return n-e.Easings.BounceEaseOut(i-t,0,n,i)+r},BounceEaseInOut:function(t,r,n,i){return t<i/2?.5*e.Easings.BounceEaseIn(2*t,0,n,i)+r:.5*e.Easings.BounceEaseOut(2*t-i,0,n,i)+.5*n+r},EaseIn:function(t,e,r,n){return r*(t/=n)*t+e},EaseOut:function(t,e,r,n){return-r*(t/=n)*(t-2)+e},EaseInOut:function(t,e,r,n){return(t/=n/2)<1?r/2*t*t+e:-r/2*(--t*(t-2)-1)+e},StrongEaseIn:function(t,e,r,n){return r*(t/=n)*t*t*t*t+e},StrongEaseOut:function(t,e,r,n){return r*((t=t/n-1)*t*t*t*t+1)+e},StrongEaseInOut:function(t,e,r,n){return(t/=n/2)<1?r/2*t*t*t*t*t+e:r/2*((t-=2)*t*t*t*t+2)+e},Linear:function(t,e,r,n){return r*t/n+e}}},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(3),a=r(0),s=r(5),l=r(1),c=r(2),u=r(1),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(t){var e=l.Konva.getAngle(this.angle()),r=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,e,r),t.arc(0,0,this.innerRadius(),e,0,!r),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return 2*this.outerRadius()},e.prototype.getHeight=function(){return 2*this.outerRadius()},e.prototype.setWidth=function(t){this.outerRadius(t/2)},e.prototype.setHeight=function(t){this.outerRadius(t/2)},e}(s.Shape);e.Arc=f,f.prototype._centroid=!0,f.prototype.className="Arc",f.prototype._attrsAffectingSize=["innerRadius","outerRadius"],u._registerNode(f),a.Factory.addGetterSetter(f,"innerRadius",0,c.getNumberValidator()),a.Factory.addGetterSetter(f,"outerRadius",0,c.getNumberValidator()),a.Factory.addGetterSetter(f,"angle",0,c.getNumberValidator()),a.Factory.addGetterSetter(f,"clockwise",!1,c.getBooleanValidator()),o.Collection.mapMethods(f)},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(3),a=r(0),s=r(16),l=r(2),c=r(1),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(e){t.prototype._sceneFunc.call(this,e);var r=2*Math.PI,n=this.points(),i=n,o=0!==this.tension()&&n.length>4;o&&(i=this.getTensionPoints());var a,s,l=n.length;o?(a=n[l-2]-(i[i.length-2]+i[i.length-4])/2,s=n[l-1]-(i[i.length-1]+i[i.length-3])/2):(a=n[l-2]-n[l-4],s=n[l-1]-n[l-3]);var c=(Math.atan2(s,a)+r)%r,u=this.pointerLength(),f=this.pointerWidth();e.save(),e.beginPath(),e.translate(n[l-2],n[l-1]),e.rotate(c),e.moveTo(0,0),e.lineTo(-u,f/2),e.lineTo(-u,-f/2),e.closePath(),e.restore(),this.pointerAtBeginning()&&(e.save(),e.translate(n[0],n[1]),o?(a=(i[0]+i[2])/2-n[0],s=(i[1]+i[3])/2-n[1]):(a=n[2]-n[0],s=n[3]-n[1]),e.rotate((Math.atan2(-s,-a)+r)%r),e.moveTo(0,0),e.lineTo(-u,f/2),e.lineTo(-u,-f/2),e.closePath(),e.restore());var h=this.dashEnabled();h&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),h&&(this.attrs.dashEnabled=!0)},e.prototype.getSelfRect=function(){var e=t.prototype.getSelfRect.call(this),r=this.pointerWidth()/2;return{x:e.x-r,y:e.y-r,width:e.width+2*r,height:e.height+2*r}},e}(s.Line);e.Arrow=u,u.prototype.className="Arrow",c._registerNode(u),a.Factory.addGetterSetter(u,"pointerLength",10,l.getNumberValidator()),a.Factory.addGetterSetter(u,"pointerWidth",10,l.getNumberValidator()),a.Factory.addGetterSetter(u,"pointerAtBeginning",!1),o.Collection.mapMethods(u)},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(3),a=r(0),s=r(5),l=r(2),c=r(1),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(t){t.beginPath(),t.arc(0,0,this.radius(),0,2*Math.PI,!1),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return 2*this.radius()},e.prototype.getHeight=function(){return 2*this.radius()},e.prototype.setWidth=function(t){this.radius()!==t/2&&this.radius(t/2)},e.prototype.setHeight=function(t){this.radius()!==t/2&&this.radius(t/2)},e}(s.Shape);e.Circle=u,u.prototype._centroid=!0,u.prototype.className="Circle",u.prototype._attrsAffectingSize=["radius"],c._registerNode(u),a.Factory.addGetterSetter(u,"radius",0,l.getNumberValidator()),o.Collection.mapMethods(u)},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(3),a=r(0),s=r(5),l=r(2),c=r(1),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(t){var e=this.radiusX(),r=this.radiusY();t.beginPath(),t.save(),e!==r&&t.scale(1,r/e),t.arc(0,0,e,0,2*Math.PI,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return 2*this.radiusX()},e.prototype.getHeight=function(){return 2*this.radiusY()},e.prototype.setWidth=function(t){this.radiusX(t/2)},e.prototype.setHeight=function(t){this.radiusY(t/2)},e}(s.Shape);e.Ellipse=u,u.prototype.className="Ellipse",u.prototype._centroid=!0,u.prototype._attrsAffectingSize=["radiusX","radiusY"],c._registerNode(u),a.Factory.addComponentsGetterSetter(u,"radius",["x","y"]),a.Factory.addGetterSetter(u,"radiusX",0,l.getNumberValidator()),a.Factory.addGetterSetter(u,"radiusY",0,l.getNumberValidator()),o.Collection.mapMethods(u)},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(3),a=r(0),s=r(5),l=r(2),c=r(1),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._useBufferCanvas=function(){return!(!this.hasShadow()&&1===this.getAbsoluteOpacity()||!this.hasStroke()||!this.getStage())},e.prototype._sceneFunc=function(t){var e,r,n,i=this.width(),o=this.height(),a=this.image();a&&(e=this.cropWidth(),r=this.cropHeight(),n=e&&r?[a,this.cropX(),this.cropY(),e,r,0,0,i,o]:[a,0,0,i,o]),(this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,i,o),t.closePath(),t.fillStrokeShape(this)),a&&t.drawImage.apply(t,n)},e.prototype._hitFunc=function(t){var e=this.width(),r=this.height();t.beginPath(),t.rect(0,0,e,r),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){var t,e=this.image();return null!=(t=this.attrs.width)?t:e?e.width:0},e.prototype.getHeight=function(){var t,e=this.image();return null!=(t=this.attrs.height)?t:e?e.height:0},e.fromURL=function(t,r){var n=o.Util.createImageElement();n.onload=function(){var t=new e({image:n});r(t)},n.crossOrigin="Anonymous",n.src=t},e}(s.Shape);e.Image=u,u.prototype.className="Image",c._registerNode(u),a.Factory.addGetterSetter(u,"image"),a.Factory.addComponentsGetterSetter(u,"crop",["x","y","width","height"]),a.Factory.addGetterSetter(u,"cropX",0,l.getNumberValidator()),a.Factory.addGetterSetter(u,"cropY",0,l.getNumberValidator()),a.Factory.addGetterSetter(u,"cropWidth",0,l.getNumberValidator()),a.Factory.addGetterSetter(u,"cropHeight",0,l.getNumberValidator()),o.Collection.mapMethods(u)},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(3),a=r(0),s=r(5),l=r(10),c=r(2),u=r(1),f=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width"],h=f.length,p=function(t){function e(e){var r=t.call(this,e)||this;return r.on("add.konva",(function(t){this._addListeners(t.child),this._sync()})),r}return i(e,t),e.prototype.getText=function(){return this.find("Text")[0]},e.prototype.getTag=function(){return this.find("Tag")[0]},e.prototype._addListeners=function(t){var e,r=this,n=function(){r._sync()};for(e=0;e<h;e++)t.on(f[e]+"Change.konva",n)},e.prototype.getWidth=function(){return this.getText().width()},e.prototype.getHeight=function(){return this.getText().height()},e.prototype._sync=function(){var t,e,r,n,i,o,a,s=this.getText(),l=this.getTag();if(s&&l){switch(t=s.width(),e=s.height(),r=l.pointerDirection(),n=l.pointerWidth(),a=l.pointerHeight(),i=0,o=0,r){case"up":i=t/2,o=-1*a;break;case"right":i=t+n,o=e/2;break;case"down":i=t/2,o=e+a;break;case"left":i=-1*n,o=e/2}l.setAttrs({x:-1*i,y:-1*o,width:t,height:e}),s.setAttrs({x:-1*i,y:-1*o})}},e}(l.Group);e.Label=p,p.prototype.className="Label",u._registerNode(p),o.Collection.mapMethods(p);var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(t){var e=this.width(),r=this.height(),n=this.pointerDirection(),i=this.pointerWidth(),o=this.pointerHeight(),a=Math.min(this.cornerRadius(),e/2,r/2);t.beginPath(),a?t.moveTo(a,0):t.moveTo(0,0),"up"===n&&(t.lineTo((e-i)/2,0),t.lineTo(e/2,-1*o),t.lineTo((e+i)/2,0)),a?(t.lineTo(e-a,0),t.arc(e-a,a,a,3*Math.PI/2,0,!1)):t.lineTo(e,0),"right"===n&&(t.lineTo(e,(r-o)/2),t.lineTo(e+i,r/2),t.lineTo(e,(r+o)/2)),a?(t.lineTo(e,r-a),t.arc(e-a,r-a,a,0,Math.PI/2,!1)):t.lineTo(e,r),"down"===n&&(t.lineTo((e+i)/2,r),t.lineTo(e/2,r+o),t.lineTo((e-i)/2,r)),a?(t.lineTo(a,r),t.arc(a,r-a,a,Math.PI/2,Math.PI,!1)):t.lineTo(0,r),"left"===n&&(t.lineTo(0,(r+o)/2),t.lineTo(-1*i,r/2),t.lineTo(0,(r-o)/2)),a&&(t.lineTo(0,a),t.arc(a,a,a,Math.PI,3*Math.PI/2,!1)),t.closePath(),t.fillStrokeShape(this)},e.prototype.getSelfRect=function(){var t=0,e=0,r=this.pointerWidth(),n=this.pointerHeight(),i=this.pointerDirection(),o=this.width(),a=this.height();return"up"===i?(e-=n,a+=n):"down"===i?a+=n:"left"===i?(t-=1.5*r,o+=r):"right"===i&&(o+=1.5*r),{x:t,y:e,width:o,height:a}},e}(s.Shape);e.Tag=d,d.prototype.className="Tag",u._registerNode(d),a.Factory.addGetterSetter(d,"pointerDirection","none"),a.Factory.addGetterSetter(d,"pointerWidth",0,c.getNumberValidator()),a.Factory.addGetterSetter(d,"pointerHeight",0,c.getNumberValidator()),a.Factory.addGetterSetter(d,"cornerRadius",0,c.getNumberValidator()),o.Collection.mapMethods(d)},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(3),a=r(0),s=r(5),l=r(2),c=r(1),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(t){var e,r,n,i=this.sides(),o=this.radius();for(t.beginPath(),t.moveTo(0,0-o),e=1;e<i;e++)r=o*Math.sin(2*e*Math.PI/i),n=-1*o*Math.cos(2*e*Math.PI/i),t.lineTo(r,n);t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return 2*this.radius()},e.prototype.getHeight=function(){return 2*this.radius()},e.prototype.setWidth=function(t){this.radius(t/2)},e.prototype.setHeight=function(t){this.radius(t/2)},e}(s.Shape);e.RegularPolygon=u,u.prototype.className="RegularPolygon",u.prototype._centroid=!0,u.prototype._attrsAffectingSize=["radius"],c._registerNode(u),a.Factory.addGetterSetter(u,"radius",0,l.getNumberValidator()),a.Factory.addGetterSetter(u,"sides",0,l.getNumberValidator()),o.Collection.mapMethods(u)},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(3),a=r(0),s=r(5),l=r(2),c=r(1),u=2*Math.PI,f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,u,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),u,0,!0),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return 2*this.outerRadius()},e.prototype.getHeight=function(){return 2*this.outerRadius()},e.prototype.setWidth=function(t){this.outerRadius(t/2)},e.prototype.setHeight=function(t){this.outerRadius(t/2)},e}(s.Shape);e.Ring=f,f.prototype.className="Ring",f.prototype._centroid=!0,f.prototype._attrsAffectingSize=["innerRadius","outerRadius"],c._registerNode(f),a.Factory.addGetterSetter(f,"innerRadius",0,l.getNumberValidator()),a.Factory.addGetterSetter(f,"outerRadius",0,l.getNumberValidator()),o.Collection.mapMethods(f)},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(3),a=r(0),s=r(5),l=r(11),c=r(2),u=r(1),f=function(t){function e(e){var r=t.call(this,e)||this;return r._updated=!0,r.anim=new l.Animation((function(){var t=r._updated;return r._updated=!1,t})),r.on("animationChange.konva",(function(){this.frameIndex(0)})),r.on("frameIndexChange.konva",(function(){this._updated=!0})),r.on("frameRateChange.konva",(function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})),r}return i(e,t),e.prototype._sceneFunc=function(t){var e=this.animation(),r=this.frameIndex(),n=4*r,i=this.animations()[e],o=this.frameOffsets(),a=i[n+0],s=i[n+1],l=i[n+2],c=i[n+3],u=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,l,c),t.closePath(),t.fillStrokeShape(this)),u)if(o){var f=o[e],h=2*r;t.drawImage(u,a,s,l,c,f[h+0],f[h+1],l,c)}else t.drawImage(u,a,s,l,c,0,0,l,c)},e.prototype._hitFunc=function(t){var e=this.animation(),r=this.frameIndex(),n=4*r,i=this.animations()[e],o=this.frameOffsets(),a=i[n+2],s=i[n+3];if(t.beginPath(),o){var l=o[e],c=2*r;t.rect(l[c+0],l[c+1],a,s)}else t.rect(0,0,a,s);t.closePath(),t.fillShape(this)},e.prototype._useBufferCanvas=function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasStroke()},e.prototype._setInterval=function(){var t=this;this.interval=setInterval((function(){t._updateIndex()}),1e3/this.frameRate())},e.prototype.start=function(){if(!this.isRunning()){var t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}},e.prototype.stop=function(){this.anim.stop(),clearInterval(this.interval)},e.prototype.isRunning=function(){return this.anim.isRunning()},e.prototype._updateIndex=function(){var t=this.frameIndex(),e=this.animation();t<this.animations()[e].length/4-1?this.frameIndex(t+1):this.frameIndex(0)},e}(s.Shape);e.Sprite=f,f.prototype.className="Sprite",u._registerNode(f),a.Factory.addGetterSetter(f,"animation"),a.Factory.addGetterSetter(f,"animations"),a.Factory.addGetterSetter(f,"frameOffsets"),a.Factory.addGetterSetter(f,"image"),a.Factory.addGetterSetter(f,"frameIndex",0,c.getNumberValidator()),a.Factory.addGetterSetter(f,"frameRate",17,c.getNumberValidator()),a.Factory.backCompat(f,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),o.Collection.mapMethods(f)},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(3),a=r(0),s=r(5),l=r(2),c=r(1),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(t){var e=this.innerRadius(),r=this.outerRadius(),n=this.numPoints();t.beginPath(),t.moveTo(0,0-r);for(var i=1;i<2*n;i++){var o=i%2==0?r:e,a=o*Math.sin(i*Math.PI/n),s=-1*o*Math.cos(i*Math.PI/n);t.lineTo(a,s)}t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return 2*this.outerRadius()},e.prototype.getHeight=function(){return 2*this.outerRadius()},e.prototype.setWidth=function(t){this.outerRadius(t/2)},e.prototype.setHeight=function(t){this.outerRadius(t/2)},e}(s.Shape);e.Star=u,u.prototype.className="Star",u.prototype._centroid=!0,u.prototype._attrsAffectingSize=["innerRadius","outerRadius"],c._registerNode(u),a.Factory.addGetterSetter(u,"numPoints",5,l.getNumberValidator()),a.Factory.addGetterSetter(u,"innerRadius",0,l.getNumberValidator()),a.Factory.addGetterSetter(u,"outerRadius",0,l.getNumberValidator()),o.Collection.mapMethods(u)},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(3),a=r(0),s=r(5),l=r(17),c=r(19),u=r(2),f=r(1);function h(t){t.fillText(this.partialText,0,0)}function p(t){t.strokeText(this.partialText,0,0)}var d=function(t){function e(e){var r=t.call(this,e)||this;return r.dummyCanvas=o.Util.createCanvasElement(),r.dataArray=[],r.dataArray=l.Path.parsePathData(r.attrs.data),r.on("dataChange.konva",(function(){this.dataArray=l.Path.parsePathData(this.attrs.data),this._setTextData()})),r.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva",r._setTextData),e&&e.getKerning&&(o.Util.warn('getKerning TextPath API is deprecated. Please use "kerningFunc" instead.'),r.kerningFunc(e.getKerning)),r._setTextData(),r}return i(e,t),e.prototype._sceneFunc=function(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();var e=this.textDecoration(),r=this.fill(),n=this.fontSize(),i=this.glyphInfo;"underline"===e&&t.beginPath();for(var o=0;o<i.length;o++){t.save();var a=i[o].p0;t.translate(a.x,a.y),t.rotate(i[o].rotation),this.partialText=i[o].text,t.fillStrokeShape(this),"underline"===e&&(0===o&&t.moveTo(0,n/2+1),t.lineTo(n,n/2+1)),t.restore()}"underline"===e&&(t.strokeStyle=r,t.lineWidth=n/20,t.stroke()),t.restore()},e.prototype._hitFunc=function(t){t.beginPath();var e=this.glyphInfo;if(e.length>=1){var r=e[0].p0;t.moveTo(r.x,r.y)}for(var n=0;n<e.length;n++){var i=e[n].p1;t.lineTo(i.x,i.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()},e.prototype.getTextWidth=function(){return this.textWidth},e.prototype.getTextHeight=function(){return o.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight},e.prototype.setText=function(t){return c.Text.prototype.setText.call(this,t)},e.prototype._getContextFont=function(){return c.Text.prototype._getContextFont.call(this)},e.prototype._getTextSize=function(t){var e=this.dummyCanvas.getContext("2d");e.save(),e.font=this._getContextFont();var r=e.measureText(t);return e.restore(),{width:r.width,height:parseInt(this.attrs.fontSize,10)}},e.prototype._setTextData=function(){var t=this,e=this._getTextSize(this.attrs.text),r=this.letterSpacing(),n=this.align(),i=this.kerningFunc();this.textWidth=e.width,this.textHeight=e.height;var o=Math.max(this.textWidth+((this.attrs.text||"").length-1)*r,0);this.glyphInfo=[];for(var a=0,s=0;s<t.dataArray.length;s++)t.dataArray[s].pathLength>0&&(a+=t.dataArray[s].pathLength);var c=0;"center"===n&&(c=Math.max(0,a/2-o/2)),"right"===n&&(c=Math.max(0,a-o));for(var u,f,h,p=this.text().split(""),d=this.text().split(" ").length-1,y=-1,v=0,g=function(){v=0;for(var e=t.dataArray,r=y+1;r<e.length;r++){if(e[r].pathLength>0)return y=r,e[r];"M"===e[r].command&&(u={x:e[r].points[0],y:e[r].points[1]})}return{}},b=function(e){var i=t._getTextSize(e).width+r;" "===e&&"justify"===n&&(i+=(a-o)/d);var s=0,c=0;for(f=void 0;Math.abs(i-s)/i>.01&&c<25;){c++;for(var p=s;void 0===h;)(h=g())&&p+h.pathLength<i&&(p+=h.pathLength,h=void 0);if(h==={}||void 0===u)return;var y=!1;switch(h.command){case"L":l.Path.getLineLength(u.x,u.y,h.points[0],h.points[1])>i?f=l.Path.getPointOnLine(i,u.x,u.y,h.points[0],h.points[1],u.x,u.y):h=void 0;break;case"A":var b=h.points[4],m=h.points[5],w=h.points[4]+m;0===v?v=b+1e-8:i>s?v+=Math.PI/180*m/Math.abs(m):v-=Math.PI/360*m/Math.abs(m),(m<0&&v<w||m>=0&&v>w)&&(v=w,y=!0),f=l.Path.getPointOnEllipticalArc(h.points[0],h.points[1],h.points[2],h.points[3],v,h.points[6]);break;case"C":0===v?v=i>h.pathLength?1e-8:i/h.pathLength:i>s?v+=(i-s)/h.pathLength:v-=(s-i)/h.pathLength,v>1&&(v=1,y=!0),f=l.Path.getPointOnCubicBezier(v,h.start.x,h.start.y,h.points[0],h.points[1],h.points[2],h.points[3],h.points[4],h.points[5]);break;case"Q":0===v?v=i/h.pathLength:i>s?v+=(i-s)/h.pathLength:v-=(s-i)/h.pathLength,v>1&&(v=1,y=!0),f=l.Path.getPointOnQuadraticBezier(v,h.start.x,h.start.y,h.points[0],h.points[1],h.points[2],h.points[3])}void 0!==f&&(s=l.Path.getLineLength(u.x,u.y,f.x,f.y)),y&&(y=!1,h=void 0)}},m=c/(t._getTextSize("C").width+r)-1,w=0;w<m&&(b("C"),void 0!==u&&void 0!==f);w++)u=f;for(var _=0;_<p.length&&(b(p[_]),void 0!==u&&void 0!==f);_++){var S=l.Path.getLineLength(u.x,u.y,f.x,f.y),O=0;if(i)try{O=i(p[_-1],p[_])*this.fontSize()}catch(t){O=0}u.x+=O,f.x+=O,this.textWidth+=O;var x=l.Path.getPointOnLine(O+S/2,u.x,u.y,f.x,f.y),P=Math.atan2(f.y-u.y,f.x-u.x);this.glyphInfo.push({transposeX:x.x,transposeY:x.y,text:p[_],rotation:P,p0:u,p1:f}),u=f}},e.prototype.getSelfRect=function(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var t=[];this.glyphInfo.forEach((function(e){t.push(e.p0.x),t.push(e.p0.y),t.push(e.p1.x),t.push(e.p1.y)}));for(var e,r,n=t[0]||0,i=t[0]||0,o=t[1]||0,a=t[1]||0,s=0;s<t.length/2;s++)e=t[2*s],r=t[2*s+1],n=Math.min(n,e),i=Math.max(i,e),o=Math.min(o,r),a=Math.max(a,r);var l=this.fontSize();return{x:n-l/2,y:o-l/2,width:i-n+l,height:a-o+l}},e}(s.Shape);e.TextPath=d,d.prototype._fillFunc=h,d.prototype._strokeFunc=p,d.prototype._fillFuncHit=h,d.prototype._strokeFuncHit=p,d.prototype.className="TextPath",d.prototype._attrsAffectingSize=["text","fontSize","data"],f._registerNode(d),a.Factory.addGetterSetter(d,"data"),a.Factory.addGetterSetter(d,"fontFamily","Arial"),a.Factory.addGetterSetter(d,"fontSize",12,u.getNumberValidator()),a.Factory.addGetterSetter(d,"fontStyle","normal"),a.Factory.addGetterSetter(d,"align","left"),a.Factory.addGetterSetter(d,"letterSpacing",0,u.getNumberValidator()),a.Factory.addGetterSetter(d,"textBaseline","middle"),a.Factory.addGetterSetter(d,"fontVariant","normal"),a.Factory.addGetterSetter(d,"text",""),a.Factory.addGetterSetter(d,"textDecoration",null),a.Factory.addGetterSetter(d,"kerningFunc",null),o.Collection.mapMethods(d)},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(3),a=r(0),s=r(4),l=r(5),c=r(18),u=r(10),f=r(1),h=r(2),p=r(1),d=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange"].map((function(t){return t+".tr-konva"})).join(" "),y=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"].map((function(t){return t+".tr-konva"})).join(" "),v={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},g="ontouchstart"in f.Konva._global;var b=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],m=function(t){function e(e){var r=t.call(this,e)||this;return r._transforming=!1,r._createElements(),r._handleMouseMove=r._handleMouseMove.bind(r),r._handleMouseUp=r._handleMouseUp.bind(r),r.update=r.update.bind(r),r.on(d,r.update),r.getNode()&&r.update(),r}return i(e,t),e.prototype.attachTo=function(t){return this.setNode(t),this},e.prototype.setNode=function(t){var e=this;this._node&&this.detach(),this._node=t,this._resetTransformCache();var r=t._attrsAffectingSize.map((function(t){return t+"Change.tr-konva"})).join(" "),n=function(){e._resetTransformCache(),e._transforming||e.update()};return t.on(r,n),t.on(y,n),t.on("xChange.tr-konva yChange.tr-konva",(function(){return e._resetTransformCache()})),!!this.findOne(".top-left")&&this.update(),this},e.prototype.getNode=function(){return this._node},e.prototype.getActiveAnchor=function(){return this._movingAnchorName},e.prototype.detach=function(){this.getNode()&&(this.getNode().off(".tr-konva"),this._node=void 0),this._resetTransformCache()},e.prototype._resetTransformCache=function(){this._clearCache("nodeRect"),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")},e.prototype._getNodeRect=function(){return this._getCache("nodeRect",this.__getNodeRect)},e.prototype.__getNodeRect=function(){var t=this.getNode();if(!t)return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};t.parent&&this.parent&&t.parent!==this.parent&&o.Util.warn("Transformer and attached node have different parents. Konva does not support such case right now. Please move Transformer to the parent of attaching node.");var e=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),r=f.Konva.getAngle(t.rotation()),n=e.x*t.scaleX()-t.offsetX()*t.scaleX(),i=e.y*t.scaleY()-t.offsetY()*t.scaleY();return{x:t.x()+n*Math.cos(r)+i*Math.sin(-r),y:t.y()+i*Math.cos(r)+n*Math.sin(r),width:e.width*t.scaleX(),height:e.height*t.scaleY(),rotation:t.rotation()}},e.prototype.getX=function(){return this._getNodeRect().x},e.prototype.getY=function(){return this._getNodeRect().y},e.prototype.getRotation=function(){return this._getNodeRect().rotation},e.prototype.getWidth=function(){return this._getNodeRect().width},e.prototype.getHeight=function(){return this._getNodeRect().height},e.prototype._createElements=function(){this._createBack(),b.forEach(function(t){this._createAnchor(t)}.bind(this)),this._createAnchor("rotater")},e.prototype._createAnchor=function(t){var e=this,r=new c.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:g?10:"auto"}),n=this;r.on("mousedown touchstart",(function(t){n._handleMouseDown(t)})),r.on("dragstart",(function(t){t.cancelBubble=!0})),r.on("dragmove",(function(t){t.cancelBubble=!0})),r.on("dragend",(function(t){t.cancelBubble=!0})),r.on("mouseenter",(function(){var n=f.Konva.getAngle(e.getAbsoluteRotation()),i=e.getNode().getAbsoluteScale(),a=i.y*i.x<0,s=function(t,e,r){if("rotater"===t)return"crosshair";e+=o.Util._degToRad(v[t]||0),r&&(e*=-1);var n=(o.Util._radToDeg(e)%360+360)%360;return o.Util._inRange(n,337.5,360)||o.Util._inRange(n,0,22.5)?"ns-resize":o.Util._inRange(n,22.5,67.5)?"nesw-resize":o.Util._inRange(n,67.5,112.5)?"ew-resize":o.Util._inRange(n,112.5,157.5)?"nwse-resize":o.Util._inRange(n,157.5,202.5)?"ns-resize":o.Util._inRange(n,202.5,247.5)?"nesw-resize":o.Util._inRange(n,247.5,292.5)?"ew-resize":o.Util._inRange(n,292.5,337.5)?"nwse-resize":(o.Util.error("Transformer has unknown angle for cursor detection: "+n),"pointer")}(t,n,a);r.getStage().content.style.cursor=s,e._cursorChange=!0})),r.on("mouseout",(function(){r.getStage()&&r.getParent()&&(r.getStage().content.style.cursor="",e._cursorChange=!1)})),this.add(r)},e.prototype._createBack=function(){var t=new l.Shape({name:"back",width:0,height:0,listening:!1,sceneFunc:function(t){var e=this.getParent(),r=e.padding();t.beginPath(),t.rect(-r,-r,this.width()+2*r,this.height()+2*r),t.moveTo(this.width()/2,-r),e.rotateEnabled()&&t.lineTo(this.width()/2,-e.rotateAnchorOffset()*o.Util._sign(this.height())-r),t.fillStrokeShape(this)}});this.add(t)},e.prototype._handleMouseDown=function(t){this._movingAnchorName=t.target.name().split(" ")[0];var e=this._getNodeRect(),r=e.width,n=e.height,i=Math.sqrt(Math.pow(r,2)+Math.pow(n,2));this.sin=Math.abs(n/i),this.cos=Math.abs(r/i),window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0),this._transforming=!0,this._fire("transformstart",{evt:t,target:this.getNode()}),this.getNode()._fire("transformstart",{evt:t,target:this.getNode()})},e.prototype._handleMouseMove=function(t){var e,r,n,i=this.findOne("."+this._movingAnchorName),a=i.getStage();a.setPointersPositions(t),i.setAbsolutePosition(a.getPointerPosition());var s=this.keepRatio()||t.shiftKey,l=this.padding();if("top-left"===this._movingAnchorName){if(s){n=Math.sqrt(Math.pow(this.findOne(".bottom-right").x()-i.x()-2*l,2)+Math.pow(this.findOne(".bottom-right").y()-i.y()-2*l,2));var c=this.findOne(".top-left").x()>this.findOne(".bottom-right").x()?-1:1,u=this.findOne(".top-left").y()>this.findOne(".bottom-right").y()?-1:1;e=n*this.cos*c,r=n*this.sin*u,this.findOne(".top-left").x(this.findOne(".bottom-right").x()-e-2*l),this.findOne(".top-left").y(this.findOne(".bottom-right").y()-r-2*l)}}else if("top-center"===this._movingAnchorName)this.findOne(".top-left").y(i.y());else if("top-right"===this._movingAnchorName){if(s){n=Math.sqrt(Math.pow(i.x()-this.findOne(".bottom-left").x()-2*l,2)+Math.pow(this.findOne(".bottom-left").y()-i.y()-2*l,2));c=this.findOne(".top-right").x()<this.findOne(".top-left").x()?-1:1,u=this.findOne(".top-right").y()>this.findOne(".bottom-left").y()?-1:1;e=n*this.cos*c,r=n*this.sin*u,this.findOne(".top-right").x(e+l),this.findOne(".top-right").y(this.findOne(".bottom-left").y()-r-2*l)}var h=i.position();this.findOne(".top-left").y(h.y),this.findOne(".bottom-right").x(h.x)}else if("middle-left"===this._movingAnchorName)this.findOne(".top-left").x(i.x());else if("middle-right"===this._movingAnchorName)this.findOne(".bottom-right").x(i.x());else if("bottom-left"===this._movingAnchorName){if(s){n=Math.sqrt(Math.pow(this.findOne(".top-right").x()-i.x()-2*l,2)+Math.pow(i.y()-this.findOne(".top-right").y()-2*l,2));c=this.findOne(".top-right").x()<this.findOne(".bottom-left").x()?-1:1,u=this.findOne(".bottom-right").y()<this.findOne(".top-left").y()?-1:1;e=n*this.cos*c,r=n*this.sin*u,this.findOne(".bottom-left").x(this.findOne(".top-right").x()-e-2*l),this.findOne(".bottom-left").y(r+l)}h=i.position(),this.findOne(".top-left").x(h.x),this.findOne(".bottom-right").y(h.y)}else if("bottom-center"===this._movingAnchorName)this.findOne(".bottom-right").y(i.y());else if("bottom-right"===this._movingAnchorName){if(s){n=Math.sqrt(Math.pow(this.findOne(".bottom-right").x()-l,2)+Math.pow(this.findOne(".bottom-right").y()-l,2));c=this.findOne(".top-left").x()>this.findOne(".bottom-right").x()?-1:1,u=this.findOne(".top-left").y()>this.findOne(".bottom-right").y()?-1:1;e=n*this.cos*c,r=n*this.sin*u,this.findOne(".bottom-right").x(e+l),this.findOne(".bottom-right").y(r+l)}}else if("rotater"===this._movingAnchorName){var p=this._getNodeRect();e=i.x()-p.width/2,r=-i.y()+p.height/2;var d=Math.atan2(-r,e)+Math.PI/2;p.height<0&&(d-=Math.PI);for(var y=f.Konva.getAngle(this.rotation()),v=o.Util._radToDeg(y)+o.Util._radToDeg(d),g=f.Konva.getAngle(this.getNode().rotation()),b=o.Util._degToRad(v),m=this.rotationSnaps(),w=f.Konva.getAngle(this.rotationSnapTolerance()),_=0;_<m.length;_++){var S=f.Konva.getAngle(m[_]);Math.abs(S-o.Util._degToRad(v))%(2*Math.PI)<w&&(v=o.Util._radToDeg(S),b=o.Util._degToRad(v))}var O=l,x=l;this._fitNodeInto({rotation:f.Konva.angleDeg?v:o.Util._degToRad(v),x:p.x+(p.width/2+l)*(Math.cos(g)-Math.cos(b))+(p.height/2+l)*(Math.sin(-g)-Math.sin(-b))-(O*Math.cos(y)+x*Math.sin(-y)),y:p.y+(p.height/2+l)*(Math.cos(g)-Math.cos(b))+(p.width/2+l)*(Math.sin(g)-Math.sin(b))-(x*Math.cos(y)+O*Math.sin(y)),width:p.width+2*l,height:p.height+2*l},t)}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if("rotater"!==this._movingAnchorName){if(this.centeredScaling()||t.altKey){var P=this.findOne(".top-left"),k=this.findOne(".bottom-right"),C=P.x()+l,T=P.y()+l,j=this.getWidth()-k.x()+l,E=this.getHeight()-k.y()+l;k.move({x:-C,y:-T}),P.move({x:j,y:E})}var A=this.findOne(".top-left").getAbsolutePosition(this.getParent());e=A.x,r=A.y;var R=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),M=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodeInto({x:e+this.offsetX(),y:r+this.offsetY(),width:R,height:M},t)}},e.prototype._handleMouseUp=function(t){this._removeEvents(t)},e.prototype._removeEvents=function(t){if(this._transforming){this._transforming=!1,window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0);var e=this.getNode();this._fire("transformend",{evt:t,target:e}),e&&e.fire("transformend",{evt:t,target:e}),this._movingAnchorName=null}},e.prototype._fitNodeInto=function(t,e){var r=this.boundBoxFunc();if(r){var n=this._getNodeRect();t=r.call(this,n,t)}var i=this.getNode();void 0!==t.rotation&&this.getNode().rotation(t.rotation);var o=i.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),a=this.padding(),s=o.width?(t.width-2*a)/o.width:1,l=o.height?(t.height-2*a)/o.height:1,c=f.Konva.getAngle(i.rotation()),u=o.x*s-a-i.offsetX()*s,h=o.y*l-a-i.offsetY()*l;this.getNode().setAttrs({scaleX:s,scaleY:l,x:t.x-(u*Math.cos(c)+h*Math.sin(-c)),y:t.y-(h*Math.cos(c)+u*Math.sin(c))}),this._fire("transform",{evt:e,target:this.getNode()}),this.getNode()._fire("transform",{evt:e,target:this.getNode()}),this.update(),this.getLayer().batchDraw()},e.prototype.forceUpdate=function(){this._resetTransformCache(),this.update()},e.prototype.update=function(){var t=this,e=this._getNodeRect(),r=this.getNode(),n={x:1,y:1};r&&r.getParent()&&(n=r.getParent().getAbsoluteScale());var i={x:1/n.x,y:1/n.y},a=e.width,s=e.height,l=this.enabledAnchors(),c=this.resizeEnabled(),u=this.padding(),f=this.anchorSize();this.find("._anchor").each((function(e){return e.setAttrs({width:f,height:f,offsetX:f/2,offsetY:f/2,stroke:t.anchorStroke(),strokeWidth:t.anchorStrokeWidth(),fill:t.anchorFill(),cornerRadius:t.anchorCornerRadius()})})),this.findOne(".top-left").setAttrs({x:-u,y:-u,scale:i,visible:c&&l.indexOf("top-left")>=0}),this.findOne(".top-center").setAttrs({x:a/2,y:-u,scale:i,visible:c&&l.indexOf("top-center")>=0}),this.findOne(".top-right").setAttrs({x:a+u,y:-u,scale:i,visible:c&&l.indexOf("top-right")>=0}),this.findOne(".middle-left").setAttrs({x:-u,y:s/2,scale:i,visible:c&&l.indexOf("middle-left")>=0}),this.findOne(".middle-right").setAttrs({x:a+u,y:s/2,scale:i,visible:c&&l.indexOf("middle-right")>=0}),this.findOne(".bottom-left").setAttrs({x:-u,y:s+u,scale:i,visible:c&&l.indexOf("bottom-left")>=0}),this.findOne(".bottom-center").setAttrs({x:a/2,y:s+u,scale:i,visible:c&&l.indexOf("bottom-center")>=0}),this.findOne(".bottom-right").setAttrs({x:a+u,y:s+u,scale:i,visible:c&&l.indexOf("bottom-right")>=0});var h=-this.rotateAnchorOffset()*Math.abs(i.y);this.findOne(".rotater").setAttrs({x:a/2,y:h*o.Util._sign(s)-u,scale:i,visible:this.rotateEnabled()}),this.findOne(".back").setAttrs({width:a*n.x,height:s*n.y,scale:i,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash()})},e.prototype.isTransforming=function(){return this._transforming},e.prototype.stopTransform=function(){if(this._transforming){this._removeEvents();var t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}},e.prototype.destroy=function(){return this.getStage()&&this._cursorChange&&(this.getStage().content.style.cursor=""),u.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this},e.prototype.toObject=function(){return s.Node.prototype.toObject.call(this)},e}(u.Group);e.Transformer=m,m.prototype.className="Transformer",p._registerNode(m),a.Factory.addGetterSetter(m,"enabledAnchors",b,(function(t){return t instanceof Array||o.Util.warn("enabledAnchors value should be an array"),t instanceof Array&&t.forEach((function(t){-1===b.indexOf(t)&&o.Util.warn("Unknown anchor name: "+t+". Available names are: "+b.join(", "))})),t||[]})),a.Factory.addGetterSetter(m,"resizeEnabled",!0),a.Factory.addGetterSetter(m,"anchorSize",10,h.getNumberValidator()),a.Factory.addGetterSetter(m,"rotateEnabled",!0),a.Factory.addGetterSetter(m,"rotationSnaps",[]),a.Factory.addGetterSetter(m,"rotateAnchorOffset",50,h.getNumberValidator()),a.Factory.addGetterSetter(m,"rotationSnapTolerance",5,h.getNumberValidator()),a.Factory.addGetterSetter(m,"borderEnabled",!0),a.Factory.addGetterSetter(m,"anchorStroke","rgb(0, 161, 255)"),a.Factory.addGetterSetter(m,"anchorStrokeWidth",1,h.getNumberValidator()),a.Factory.addGetterSetter(m,"anchorFill","white"),a.Factory.addGetterSetter(m,"anchorCornerRadius",0,h.getNumberValidator()),a.Factory.addGetterSetter(m,"borderStroke","rgb(0, 161, 255)"),a.Factory.addGetterSetter(m,"borderStrokeWidth",1,h.getNumberValidator()),a.Factory.addGetterSetter(m,"borderDash"),a.Factory.addGetterSetter(m,"keepRatio",!0),a.Factory.addGetterSetter(m,"centeredScaling",!1),a.Factory.addGetterSetter(m,"ignoreStroke",!1),a.Factory.addGetterSetter(m,"padding",0,h.getNumberValidator()),a.Factory.addGetterSetter(m,"node"),a.Factory.addGetterSetter(m,"boundBoxFunc"),a.Factory.backCompat(m,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),o.Collection.mapMethods(m)},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(3),a=r(0),s=r(5),l=r(1),c=r(2),u=r(1),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._sceneFunc=function(t){t.beginPath(),t.arc(0,0,this.radius(),0,l.Konva.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return 2*this.radius()},e.prototype.getHeight=function(){return 2*this.radius()},e.prototype.setWidth=function(t){this.radius(t/2)},e.prototype.setHeight=function(t){this.radius(t/2)},e}(s.Shape);e.Wedge=f,f.prototype.className="Wedge",f.prototype._centroid=!0,f.prototype._attrsAffectingSize=["radius"],u._registerNode(f),a.Factory.addGetterSetter(f,"radius",0,c.getNumberValidator()),a.Factory.addGetterSetter(f,"angle",0,c.getNumberValidator()),a.Factory.addGetterSetter(f,"clockwise",!1),a.Factory.backCompat(f,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),o.Collection.mapMethods(f)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),i=r(4),o=r(2);function a(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var s=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],l=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];e.Blur=function(t){var e=Math.round(this.blurRadius());e>0&&function(t,e){var r,n,i,o,c,u,f,h,p,d,y,v,g,b,m,w,_,S,O,x,P,k,C,T,j=t.data,E=t.width,A=t.height,R=e+e+1,M=E-1,F=A-1,I=e+1,D=I*(I+1)/2,N=new a,G=null,L=N,B=null,U=null,z=s[e],H=l[e];for(i=1;i<R;i++)L=L.next=new a,i===I&&(G=L);for(L.next=N,f=u=0,n=0;n<A;n++){for(w=_=S=O=h=p=d=y=0,v=I*(x=j[u]),g=I*(P=j[u+1]),b=I*(k=j[u+2]),m=I*(C=j[u+3]),h+=D*x,p+=D*P,d+=D*k,y+=D*C,L=N,i=0;i<I;i++)L.r=x,L.g=P,L.b=k,L.a=C,L=L.next;for(i=1;i<I;i++)o=u+((M<i?M:i)<<2),h+=(L.r=x=j[o])*(T=I-i),p+=(L.g=P=j[o+1])*T,d+=(L.b=k=j[o+2])*T,y+=(L.a=C=j[o+3])*T,w+=x,_+=P,S+=k,O+=C,L=L.next;for(B=N,U=G,r=0;r<E;r++)j[u+3]=C=y*z>>H,0!==C?(C=255/C,j[u]=(h*z>>H)*C,j[u+1]=(p*z>>H)*C,j[u+2]=(d*z>>H)*C):j[u]=j[u+1]=j[u+2]=0,h-=v,p-=g,d-=b,y-=m,v-=B.r,g-=B.g,b-=B.b,m-=B.a,o=f+((o=r+e+1)<M?o:M)<<2,h+=w+=B.r=j[o],p+=_+=B.g=j[o+1],d+=S+=B.b=j[o+2],y+=O+=B.a=j[o+3],B=B.next,v+=x=U.r,g+=P=U.g,b+=k=U.b,m+=C=U.a,w-=x,_-=P,S-=k,O-=C,U=U.next,u+=4;f+=E}for(r=0;r<E;r++){for(_=S=O=w=p=d=y=h=0,v=I*(x=j[u=r<<2]),g=I*(P=j[u+1]),b=I*(k=j[u+2]),m=I*(C=j[u+3]),h+=D*x,p+=D*P,d+=D*k,y+=D*C,L=N,i=0;i<I;i++)L.r=x,L.g=P,L.b=k,L.a=C,L=L.next;for(c=E,i=1;i<=e;i++)u=c+r<<2,h+=(L.r=x=j[u])*(T=I-i),p+=(L.g=P=j[u+1])*T,d+=(L.b=k=j[u+2])*T,y+=(L.a=C=j[u+3])*T,w+=x,_+=P,S+=k,O+=C,L=L.next,i<F&&(c+=E);for(u=r,B=N,U=G,n=0;n<A;n++)j[(o=u<<2)+3]=C=y*z>>H,C>0?(C=255/C,j[o]=(h*z>>H)*C,j[o+1]=(p*z>>H)*C,j[o+2]=(d*z>>H)*C):j[o]=j[o+1]=j[o+2]=0,h-=v,p-=g,d-=b,y-=m,v-=B.r,g-=B.g,b-=B.b,m-=B.a,o=r+((o=n+I)<F?o:F)*E<<2,h+=w+=B.r=j[o],p+=_+=B.g=j[o+1],d+=S+=B.b=j[o+2],y+=O+=B.a=j[o+3],B=B.next,v+=x=U.r,g+=P=U.g,b+=k=U.b,m+=C=U.a,w-=x,_-=P,S-=k,O-=C,U=U.next,u+=E}}(t,e)},n.Factory.addGetterSetter(i.Node,"blurRadius",0,o.getNumberValidator(),n.Factory.afterSetFilter)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),i=r(4),o=r(2);e.Brighten=function(t){var e,r=255*this.brightness(),n=t.data,i=n.length;for(e=0;e<i;e+=4)n[e]+=r,n[e+1]+=r,n[e+2]+=r},n.Factory.addGetterSetter(i.Node,"brightness",0,o.getNumberValidator(),n.Factory.afterSetFilter)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),i=r(4),o=r(2);e.Contrast=function(t){var e,r=Math.pow((this.contrast()+100)/100,2),n=t.data,i=n.length,o=150,a=150,s=150;for(e=0;e<i;e+=4)o=n[e],a=n[e+1],s=n[e+2],o/=255,o-=.5,o*=r,o+=.5,a/=255,a-=.5,a*=r,a+=.5,s/=255,s-=.5,s*=r,s+=.5,o=(o*=255)<0?0:o>255?255:o,a=(a*=255)<0?0:a>255?255:a,s=(s*=255)<0?0:s>255?255:s,n[e]=o,n[e+1]=a,n[e+2]=s},n.Factory.addGetterSetter(i.Node,"contrast",0,o.getNumberValidator(),n.Factory.afterSetFilter)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),i=r(4),o=r(3),a=r(2);e.Emboss=function(t){var e=10*this.embossStrength(),r=255*this.embossWhiteLevel(),n=this.embossDirection(),i=this.embossBlend(),a=0,s=0,l=t.data,c=t.width,u=t.height,f=4*c,h=u;switch(n){case"top-left":a=-1,s=-1;break;case"top":a=-1,s=0;break;case"top-right":a=-1,s=1;break;case"right":a=0,s=1;break;case"bottom-right":a=1,s=1;break;case"bottom":a=1,s=0;break;case"bottom-left":a=1,s=-1;break;case"left":a=0,s=-1;break;default:o.Util.error("Unknown emboss direction: "+n)}do{var p=(h-1)*f,d=a;h+d<1&&(d=0),h+d>u&&(d=0);var y=(h-1+d)*c*4,v=c;do{var g=p+4*(v-1),b=s;v+b<1&&(b=0),v+b>c&&(b=0);var m=y+4*(v-1+b),w=l[g]-l[m],_=l[g+1]-l[m+1],S=l[g+2]-l[m+2],O=w,x=O>0?O:-O;if((_>0?_:-_)>x&&(O=_),(S>0?S:-S)>x&&(O=S),O*=e,i){var P=l[g]+O,k=l[g+1]+O,C=l[g+2]+O;l[g]=P>255?255:P<0?0:P,l[g+1]=k>255?255:k<0?0:k,l[g+2]=C>255?255:C<0?0:C}else{var T=r-O;T<0?T=0:T>255&&(T=255),l[g]=l[g+1]=l[g+2]=T}}while(--v)}while(--h)},n.Factory.addGetterSetter(i.Node,"embossStrength",.5,a.getNumberValidator(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(i.Node,"embossWhiteLevel",.5,a.getNumberValidator(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(i.Node,"embossDirection","top-left",null,n.Factory.afterSetFilter),n.Factory.addGetterSetter(i.Node,"embossBlend",!1,null,n.Factory.afterSetFilter)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),i=r(4),o=r(2);function a(t,e,r,n,i){var o=r-e,a=i-n;return 0===o?n+a/2:0===a?n:a*((t-e)/o)+n}e.Enhance=function(t){var e,r,n,i,o=t.data,s=o.length,l=o[0],c=l,u=o[1],f=u,h=o[2],p=h,d=this.enhance();if(0!==d){for(i=0;i<s;i+=4)(e=o[i+0])<l?l=e:e>c&&(c=e),(r=o[i+1])<u?u=r:r>f&&(f=r),(n=o[i+2])<h?h=n:n>p&&(p=n);var y,v,g,b,m,w,_,S,O;for(c===l&&(c=255,l=0),f===u&&(f=255,u=0),p===h&&(p=255,h=0),d>0?(v=c+d*(255-c),g=l-d*(l-0),m=f+d*(255-f),w=u-d*(u-0),S=p+d*(255-p),O=h-d*(h-0)):(v=c+d*(c-(y=.5*(c+l))),g=l+d*(l-y),m=f+d*(f-(b=.5*(f+u))),w=u+d*(u-b),S=p+d*(p-(_=.5*(p+h))),O=h+d*(h-_)),i=0;i<s;i+=4)o[i+0]=a(o[i+0],l,c,g,v),o[i+1]=a(o[i+1],u,f,w,m),o[i+2]=a(o[i+2],h,p,O,S)}},n.Factory.addGetterSetter(i.Node,"enhance",0,o.getNumberValidator(),n.Factory.afterSetFilter)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Grayscale=function(t){var e,r,n=t.data,i=n.length;for(e=0;e<i;e+=4)r=.34*n[e]+.5*n[e+1]+.16*n[e+2],n[e]=r,n[e+1]=r,n[e+2]=r}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),i=r(4),o=r(2);n.Factory.addGetterSetter(i.Node,"hue",0,o.getNumberValidator(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(i.Node,"saturation",0,o.getNumberValidator(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(i.Node,"luminance",0,o.getNumberValidator(),n.Factory.afterSetFilter),e.HSL=function(t){var e,r,n,i,o,a=t.data,s=a.length,l=Math.pow(2,this.saturation()),c=Math.abs(this.hue()+360)%360,u=127*this.luminance(),f=1*l*Math.cos(c*Math.PI/180),h=1*l*Math.sin(c*Math.PI/180),p=.299+.701*f+.167*h,d=.587-.587*f+.33*h,y=.114-.114*f-.497*h,v=.299-.299*f-.328*h,g=.587+.413*f+.035*h,b=.114-.114*f+.293*h,m=.299-.3*f+1.25*h,w=.587-.586*f-1.05*h,_=.114+.886*f-.2*h;for(e=0;e<s;e+=4)r=a[e+0],n=a[e+1],i=a[e+2],o=a[e+3],a[e+0]=p*r+d*n+y*i+u,a[e+1]=v*r+g*n+b*i+u,a[e+2]=m*r+w*n+_*i+u,a[e+3]=o}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),i=r(4),o=r(2);e.HSV=function(t){var e,r,n,i,o,a=t.data,s=a.length,l=Math.pow(2,this.value()),c=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,f=l*c*Math.cos(u*Math.PI/180),h=l*c*Math.sin(u*Math.PI/180),p=.299*l+.701*f+.167*h,d=.587*l-.587*f+.33*h,y=.114*l-.114*f-.497*h,v=.299*l-.299*f-.328*h,g=.587*l+.413*f+.035*h,b=.114*l-.114*f+.293*h,m=.299*l-.3*f+1.25*h,w=.587*l-.586*f-1.05*h,_=.114*l+.886*f-.2*h;for(e=0;e<s;e+=4)r=a[e+0],n=a[e+1],i=a[e+2],o=a[e+3],a[e+0]=p*r+d*n+y*i,a[e+1]=v*r+g*n+b*i,a[e+2]=m*r+w*n+_*i,a[e+3]=o},n.Factory.addGetterSetter(i.Node,"hue",0,o.getNumberValidator(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(i.Node,"saturation",0,o.getNumberValidator(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(i.Node,"value",0,o.getNumberValidator(),n.Factory.afterSetFilter)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Invert=function(t){var e,r=t.data,n=r.length;for(e=0;e<n;e+=4)r[e]=255-r[e],r[e+1]=255-r[e+1],r[e+2]=255-r[e+2]}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),i=r(4),o=r(3),a=r(2);e.Kaleidoscope=function(t){var e,r,n,i,a,s,l,c,u,f=t.width,h=t.height,p=Math.round(this.kaleidoscopePower()),d=Math.round(this.kaleidoscopeAngle()),y=Math.floor(f*(d%360)/360);if(!(p<1)){var v=o.Util.createCanvasElement();v.width=f,v.height=h;var g=v.getContext("2d").getImageData(0,0,f,h);!function(t,e,r){var n,i,o,a,s=t.data,l=e.data,c=t.width,u=t.height,f=r.polarCenterX||c/2,h=r.polarCenterY||u/2,p=0,d=0,y=0,v=0,g=Math.sqrt(f*f+h*h);i=c-f,o=u-h,g=(a=Math.sqrt(i*i+o*o))>g?a:g;var b,m,w,_,S=u,O=c,x=360/O*Math.PI/180;for(m=0;m<O;m+=1)for(w=Math.sin(m*x),_=Math.cos(m*x),b=0;b<S;b+=1)i=Math.floor(f+g*b/S*_),p=s[(n=4*((o=Math.floor(h+g*b/S*w))*c+i))+0],d=s[n+1],y=s[n+2],v=s[n+3],l[(n=4*(m+b*c))+0]=p,l[n+1]=d,l[n+2]=y,l[n+3]=v}(t,g,{polarCenterX:f/2,polarCenterY:h/2});for(var b=f/Math.pow(2,p);b<=8;)b*=2,p-=1;var m=b=Math.ceil(b),w=0,_=m,S=1;for(y+b>f&&(w=m,_=0,S=-1),r=0;r<h;r+=1)for(e=w;e!==_;e+=S)c=4*(f*r+Math.round(e+y)%f),i=g.data[c+0],a=g.data[c+1],s=g.data[c+2],l=g.data[c+3],u=4*(f*r+e),g.data[u+0]=i,g.data[u+1]=a,g.data[u+2]=s,g.data[u+3]=l;for(r=0;r<h;r+=1)for(m=Math.floor(b),n=0;n<p;n+=1){for(e=0;e<m+1;e+=1)c=4*(f*r+e),i=g.data[c+0],a=g.data[c+1],s=g.data[c+2],l=g.data[c+3],u=4*(f*r+2*m-e-1),g.data[u+0]=i,g.data[u+1]=a,g.data[u+2]=s,g.data[u+3]=l;m*=2}!function(t,e,r){var n,i,o,a,s,l,c=t.data,u=e.data,f=t.width,h=t.height,p=r.polarCenterX||f/2,d=r.polarCenterY||h/2,y=0,v=0,g=0,b=0,m=Math.sqrt(p*p+d*d);i=f-p,o=h-d,m=(l=Math.sqrt(i*i+o*o))>m?l:m;var w,_,S,O=h,x=f,P=r.polarRotation||0;for(i=0;i<f;i+=1)for(o=0;o<h;o+=1)a=i-p,s=o-d,w=Math.sqrt(a*a+s*s)*O/m,_=(_=(180*Math.atan2(s,a)/Math.PI+360+P)%360)*x/360,S=Math.floor(_),y=c[(n=4*(Math.floor(w)*f+S))+0],v=c[n+1],g=c[n+2],b=c[n+3],u[(n=4*(o*f+i))+0]=y,u[n+1]=v,u[n+2]=g,u[n+3]=b}(g,t,{polarRotation:0})}},n.Factory.addGetterSetter(i.Node,"kaleidoscopePower",2,a.getNumberValidator(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(i.Node,"kaleidoscopeAngle",0,a.getNumberValidator(),n.Factory.afterSetFilter)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),i=r(4),o=r(2);function a(t,e,r){var n=4*(r*t.width+e),i=[];return i.push(t.data[n++],t.data[n++],t.data[n++],t.data[n++]),i}function s(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}e.Mask=function(t){var e=function(t,e){var r=a(t,0,0),n=a(t,t.width-1,0),i=a(t,0,t.height-1),o=a(t,t.width-1,t.height-1),l=e||10;if(s(r,n)<l&&s(n,o)<l&&s(o,i)<l&&s(i,r)<l){for(var c=function(t){for(var e=[0,0,0],r=0;r<t.length;r++)e[0]+=t[r][0],e[1]+=t[r][1],e[2]+=t[r][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}([n,r,o,i]),u=[],f=0;f<t.width*t.height;f++){var h=s(c,[t.data[4*f],t.data[4*f+1],t.data[4*f+2]]);u[f]=h<l?0:255}return u}}(t,this.threshold());return e&&function(t,e){for(var r=0;r<t.width*t.height;r++)t.data[4*r+3]=e[r]}(t,e=function(t,e,r){for(var n=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],i=Math.round(Math.sqrt(n.length)),o=Math.floor(i/2),a=[],s=0;s<r;s++)for(var l=0;l<e;l++){for(var c=s*e+l,u=0,f=0;f<i;f++)for(var h=0;h<i;h++){var p=s+f-o,d=l+h-o;if(p>=0&&p<r&&d>=0&&d<e){var y=n[f*i+h];u+=t[p*e+d]*y}}a[c]=u}return a}(e=function(t,e,r){for(var n=[1,1,1,1,1,1,1,1,1],i=Math.round(Math.sqrt(n.length)),o=Math.floor(i/2),a=[],s=0;s<r;s++)for(var l=0;l<e;l++){for(var c=s*e+l,u=0,f=0;f<i;f++)for(var h=0;h<i;h++){var p=s+f-o,d=l+h-o;if(p>=0&&p<r&&d>=0&&d<e){var y=n[f*i+h];u+=t[p*e+d]*y}}a[c]=u>=1020?255:0}return a}(e=function(t,e,r){for(var n=[1,1,1,1,0,1,1,1,1],i=Math.round(Math.sqrt(n.length)),o=Math.floor(i/2),a=[],s=0;s<r;s++)for(var l=0;l<e;l++){for(var c=s*e+l,u=0,f=0;f<i;f++)for(var h=0;h<i;h++){var p=s+f-o,d=l+h-o;if(p>=0&&p<r&&d>=0&&d<e){var y=n[f*i+h];u+=t[p*e+d]*y}}a[c]=2040===u?255:0}return a}(e,t.width,t.height),t.width,t.height),t.width,t.height)),t},n.Factory.addGetterSetter(i.Node,"threshold",0,o.getNumberValidator(),n.Factory.afterSetFilter)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),i=r(4),o=r(2);e.Noise=function(t){var e,r=255*this.noise(),n=t.data,i=n.length,o=r/2;for(e=0;e<i;e+=4)n[e+0]+=o-2*o*Math.random(),n[e+1]+=o-2*o*Math.random(),n[e+2]+=o-2*o*Math.random()},n.Factory.addGetterSetter(i.Node,"noise",.2,o.getNumberValidator(),n.Factory.afterSetFilter)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),i=r(3),o=r(4),a=r(2);e.Pixelate=function(t){var e,r,n,o,a,s,l,c,u,f,h,p,d,y,v=Math.ceil(this.pixelSize()),g=t.width,b=t.height,m=Math.ceil(g/v),w=Math.ceil(b/v),_=t.data;if(v<=0)i.Util.error("pixelSize value can not be <= 0");else for(p=0;p<m;p+=1)for(d=0;d<w;d+=1){for(o=0,a=0,s=0,l=0,u=(c=p*v)+v,h=(f=d*v)+v,y=0,e=c;e<u;e+=1)if(!(e>=g))for(r=f;r<h;r+=1)r>=b||(o+=_[(n=4*(g*r+e))+0],a+=_[n+1],s+=_[n+2],l+=_[n+3],y+=1);for(o/=y,a/=y,s/=y,l/=y,e=c;e<u;e+=1)if(!(e>=g))for(r=f;r<h;r+=1)r>=b||(_[(n=4*(g*r+e))+0]=o,_[n+1]=a,_[n+2]=s,_[n+3]=l)}},n.Factory.addGetterSetter(o.Node,"pixelSize",8,a.getNumberValidator(),n.Factory.afterSetFilter)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),i=r(4),o=r(2);e.Posterize=function(t){var e,r=Math.round(254*this.levels())+1,n=t.data,i=n.length,o=255/r;for(e=0;e<i;e+=1)n[e]=Math.floor(n[e]/o)*o},n.Factory.addGetterSetter(i.Node,"levels",.5,o.getNumberValidator(),n.Factory.afterSetFilter)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),i=r(4),o=r(2);e.RGB=function(t){var e,r,n=t.data,i=n.length,o=this.red(),a=this.green(),s=this.blue();for(e=0;e<i;e+=4)r=(.34*n[e]+.5*n[e+1]+.16*n[e+2])/255,n[e]=r*o,n[e+1]=r*a,n[e+2]=r*s,n[e+3]=n[e+3]},n.Factory.addGetterSetter(i.Node,"red",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),n.Factory.addGetterSetter(i.Node,"green",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),n.Factory.addGetterSetter(i.Node,"blue",0,o.RGBComponent,n.Factory.afterSetFilter)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),i=r(4),o=r(2);e.RGBA=function(t){var e,r,n=t.data,i=n.length,o=this.red(),a=this.green(),s=this.blue(),l=this.alpha();for(e=0;e<i;e+=4)r=1-l,n[e]=o*l+n[e]*r,n[e+1]=a*l+n[e+1]*r,n[e+2]=s*l+n[e+2]*r},n.Factory.addGetterSetter(i.Node,"red",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),n.Factory.addGetterSetter(i.Node,"green",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),n.Factory.addGetterSetter(i.Node,"blue",0,o.RGBComponent,n.Factory.afterSetFilter),n.Factory.addGetterSetter(i.Node,"alpha",1,(function(t){return this._filterUpToDate=!1,t>1?1:t<0?0:t}))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Sepia=function(t){var e,r,n,i,o=t.data,a=o.length;for(e=0;e<a;e+=4)r=o[e+0],n=o[e+1],i=o[e+2],o[e+0]=Math.min(255,.393*r+.769*n+.189*i),o[e+1]=Math.min(255,.349*r+.686*n+.168*i),o[e+2]=Math.min(255,.272*r+.534*n+.131*i)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Solarize=function(t){var e=t.data,r=t.width,n=4*r,i=t.height;do{var o=(i-1)*n,a=r;do{var s=o+4*(a-1),l=e[s],c=e[s+1],u=e[s+2];l>127&&(l=255-l),c>127&&(c=255-c),u>127&&(u=255-u),e[s]=l,e[s+1]=c,e[s+2]=u}while(--a)}while(--i)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),i=r(4),o=r(2);e.Threshold=function(t){var e,r=255*this.threshold(),n=t.data,i=n.length;for(e=0;e<i;e+=1)n[e]=n[e]<r?0:255},n.Factory.addGetterSetter(i.Node,"threshold",.5,o.getNumberValidator(),n.Factory.afterSetFilter)},function(t,e,r){},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return function(t){if(Array.isArray(t))return t}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,a=void 0,a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}r.r(e),r.d(e,"spreadsheet",(function(){return yh}));var l=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";a(this,t),"string"==typeof e?(this.el=document.createElement(e),this.el.className=r):this.el=e,this.data={}}var e,r,n;return e=t,(r=[{key:"data",value:function(t,e){return void 0!==e?(this.data[t]=e,this):this.data[t]}},{key:"on",value:function(t,e){var r=i(t.split(".")),n=r[0],o=r.slice(1),a=n;return"mousewheel"===a&&/Firefox/i.test(window.navigator.userAgent)&&(a="DOMMouseScroll"),this.el.addEventListener(a,(function(t){e(t);for(var r=0;r<o.length;r+=1){var n=o[r];if("left"===n&&0!==t.button)return;if("right"===n&&2!==t.button)return;"stop"===n&&t.stopPropagation()}})),this}},{key:"offset",value:function(t){var e=this;if(void 0!==t)return Object.keys(t).forEach((function(r){e.css(r,"".concat(t[r],"px"))})),this;var r=this.el;return{top:r.offsetTop,left:r.offsetLeft,height:r.offsetHeight,width:r.offsetWidth}}},{key:"scroll",value:function(t){var e=this.el;return void 0!==t&&(void 0!==t.left&&(e.scrollLeft=t.left),void 0!==t.top&&(e.scrollTop=t.top)),{left:e.scrollLeft,top:e.scrollTop}}},{key:"box",value:function(){return this.el.getBoundingClientRect()}},{key:"parent",value:function(){return new t(this.el.parentNode)}},{key:"children",value:function(){for(var t=this,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return 0===arguments.length?this.el.childNodes:(r.forEach((function(e){return t.child(e)})),this)}},{key:"removeChild",value:function(t){this.el.removeChild(t)}},{key:"child",value:function(e){var r=e;return"string"==typeof e?r=document.createTextNode(e):e instanceof t&&(r=e.el),this.el.appendChild(r),this}},{key:"contains",value:function(t){return this.el.contains(t)}},{key:"className",value:function(t){return void 0!==t?(this.el.className=t,this):this.el.className}},{key:"addClass",value:function(t){return this.el.classList.add(t),this}},{key:"hasClass",value:function(t){return this.el.classList.contains(t)}},{key:"removeClass",value:function(t){return this.el.classList.remove(t),this}},{key:"toggle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"active";return this.toggleClass(t)}},{key:"toggleClass",value:function(t){return this.el.classList.toggle(t)}},{key:"active",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"active";return t?this.addClass(e):this.removeClass(e),this}},{key:"checked",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.active(t,"checked"),this}},{key:"disabled",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return t?this.addClass("disabled"):this.removeClass("disabled"),this}},{key:"attr",value:function(t,e){var r=this;if(void 0!==e)this.el.setAttribute(t,e);else{if("string"==typeof t)return this.el.getAttribute(t);Object.keys(t).forEach((function(e){r.el.setAttribute(e,t[e])}))}return this}},{key:"removeAttr",value:function(t){return this.el.removeAttribute(t),this}},{key:"html",value:function(t){return void 0!==t?(this.el.innerHTML=t,this):this.el.innerHTML}},{key:"val",value:function(t){return void 0!==t?(this.el.value=t,this):this.el.value}},{key:"focus",value:function(){this.el.focus()}},{key:"cssRemoveKeys",value:function(){for(var t=this,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return r.forEach((function(e){return t.el.style.removeProperty(e)})),this}},{key:"css",value:function(t,e){var r=this;return void 0===e&&"string"!=typeof t?(Object.keys(t).forEach((function(e){r.el.style[e]=t[e]})),this):void 0!==e?(this.el.style[t]=e,this):this.el.style[t]}},{key:"computedStyle",value:function(){return window.getComputedStyle(this.el,null)}},{key:"show",value:function(){return this.css("display","block"),this}},{key:"hide",value:function(){return this.css("display","none"),this}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),c=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new l(t,e)};r(12);function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return f(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var h=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function p(t){for(var e="",r=t;r>=h.length;)r/=h.length,r-=1,e+=h[parseInt(r,10)%h.length];return e+=h[t%h.length]}function d(t){for(var e=0,r=0;r!==t.length;++r)e=26*e+t.charCodeAt(r)-64;return e-1}function y(t){for(var e="",r="",n=0;n<t.length;n+=1)t.charAt(n)>="0"&&t.charAt(n)<="9"?r+=t.charAt(n):e+=t.charAt(n);return[d(e),parseInt(r,10)-1]}function v(t,e){return"".concat(p(t)).concat(e+1)}function g(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){return!0};if(0===e&&0===r)return t;var i=y(t),o=u(i,2),a=o[0],s=o[1];return n(a,s)?v(a+e,s+r):t}function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return w(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function S(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==b(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===b(o)?o:String(o)),n)}var i,o}var O=function(){function t(e,r,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;_(this,t),this.sri=e,this.sci=r,this.eri=n,this.eci=i,this.w=o,this.h=a}var e,r,n;return e=t,n=[{key:"valueOf",value:function(e){var r=e.split(":"),n=m(y(r[0]),2),i=n[0],o=n[1],a=o,s=i;if(r.length>1){var l=m(y(r[1]),2);s=l[0],a=l[1]}return new t(o,i,a,s)}}],(r=[{key:"set",value:function(t,e,r,n){this.sri=t,this.sci=e,this.eri=r,this.eci=n}},{key:"multiple",value:function(){return this.eri-this.sri>0||this.eci-this.sci>0}},{key:"includes",value:function(){for(var t=0,e=0,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];if(1===n.length){var o=y(n[0]),a=m(o,2);e=a[0],t=a[1]}else 2===n.length&&(t=n[0],e=n[1]);var s=this.sri,l=this.sci,c=this.eri,u=this.eci;return s<=t&&t<=c&&l<=e&&e<=u}},{key:"each",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0},r=this.sri,n=this.sci,i=this.eri,o=this.eci,a=r;a<=i;a+=1)if(e(a))for(var s=n;s<=o;s+=1)t(a,s)}},{key:"contains",value:function(t){return this.sri<=t.sri&&this.sci<=t.sci&&this.eri>=t.eri&&this.eci>=t.eci}},{key:"within",value:function(t){return this.sri>=t.sri&&this.sci>=t.sci&&this.eri<=t.eri&&this.eci<=t.eci}},{key:"disjoint",value:function(t){return this.sri>t.eri||this.sci>t.eci||t.sri>this.eri||t.sci>this.eci}},{key:"intersects",value:function(t){return this.sri<=t.eri&&this.sci<=t.eci&&t.sri<=this.eri&&t.sci<=this.eci}},{key:"union",value:function(e){var r=this.sri,n=this.sci,i=this.eri,o=this.eci;return new t(e.sri<r?e.sri:r,e.sci<n?e.sci:n,e.eri>i?e.eri:i,e.eci>o?e.eci:o)}},{key:"difference",value:function(e){var r=[],n=function(e,n,i,o){r.push(new t(e,n,i,o))},i=this.sri,o=this.sci,a=this.eri,s=this.eci,l=e.sri-i,c=e.sci-o,u=a-e.eri,f=s-e.eci;return l>0?(n(i,o,e.sri-1,s),u>0?(n(e.eri+1,o,a,s),c>0&&n(e.sri,o,e.eri,e.sci-1),f>0&&n(e.sri,e.eci+1,e.eri,s)):(c>0&&n(e.sri,o,a,e.sci-1),f>0&&n(e.sri,e.eci+1,a,s))):u>0&&(n(e.eri+1,o,a,s),c>0&&n(i,o,e.eri,e.sci-1),f>0&&n(i,e.eci+1,e.eri,s)),c>0?(n(i,o,a,e.sci-1),f>0?(n(i,e.eri+1,a,s),l>0&&n(i,e.sci,e.sri-1,e.eci),u>0&&n(e.sri+1,e.sci,a,e.eci)):(l>0&&n(i,e.sci,e.sri-1,s),u>0&&n(e.sri+1,e.sci,a,s))):f>0&&(n(a,e.eci+1,a,s),l>0&&n(i,o,e.sri-1,e.eci),u>0&&n(e.eri+1,o,a,e.eci)),r}},{key:"size",value:function(){return[this.eri-this.sri+1,this.eci-this.sci+1]}},{key:"toString",value:function(){var t=this.sri,e=this.sci,r=this.eri,n=this.eci,i=v(e,t);return this.multiple()&&(i="".concat(i,":").concat(v(n,r))),i}},{key:"clone",value:function(){return new t(this.sri,this.sci,this.eri,this.eci,this.w,this.h)}},{key:"equals",value:function(t){return this.eri===t.eri&&this.eci===t.eci&&this.sri===t.sri&&this.sci===t.sci}}])&&S(e.prototype,r),n&&S(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function x(t){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function P(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==x(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===x(o)?o:String(o)),n)}var i,o}var k=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.range=new O(0,0,0,0),this.ri=0,this.ci=0}var e,r,n;return e=t,(r=[{key:"multiple",value:function(){return this.range.multiple()}},{key:"setIndexes",value:function(t,e){this.ri=t,this.ci=e}},{key:"size",value:function(){return this.range.size()}}])&&P(e.prototype,r),n&&P(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function C(t){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function T(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==C(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===C(o)?o:String(o)),n)}var i,o}function j(t,e,r){return e&&T(t.prototype,e),r&&T(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var E=j((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=0,this.y=0,this.ri=0,this.ci=0}));function A(t){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function R(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==A(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===A(o)?o:String(o)),n)}var i,o}var M=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.undoItems=[],this.redoItems=[]}var e,r,n;return e=t,(r=[{key:"add",value:function(t){this.undoItems.push(JSON.stringify(t)),this.redoItems=[]}},{key:"canUndo",value:function(){return this.undoItems.length>0}},{key:"canRedo",value:function(){return this.redoItems.length>0}},{key:"undo",value:function(t,e){var r=this.undoItems,n=this.redoItems;this.canUndo()&&(n.push(JSON.stringify(t)),e(JSON.parse(r.pop())))}},{key:"redo",value:function(t,e){var r=this.undoItems,n=this.redoItems;this.canRedo()&&(r.push(JSON.stringify(t)),e(JSON.parse(n.pop())))}}])&&R(e.prototype,r),n&&R(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function F(t){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function I(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==F(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==F(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===F(o)?o:String(o)),n)}var i,o}var D=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.range=null,this.state="clear"}var e,r,n;return e=t,(r=[{key:"copy",value:function(t){return this.range=t,this.state="copy",this}},{key:"cut",value:function(t){return this.range=t,this.state="cut",this}},{key:"isCopy",value:function(){return"copy"===this.state}},{key:"isCut",value:function(){return"cut"===this.state}},{key:"isClear",value:function(){return"clear"===this.state}},{key:"clear",value:function(){this.range=null,this.state="clear"}}])&&I(e.prototype,r),n&&I(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function N(t){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function G(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function L(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==N(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==N(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===N(o)?o:String(o)),n)}var i,o}function B(t,e,r){return e&&L(t.prototype,e),r&&L(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var U=function(){function t(e,r,n){G(this,t),this.ci=e,this.operator=r,this.value=n}return B(t,[{key:"set",value:function(t,e){this.operator=t,this.value=e}},{key:"includes",value:function(t){var e=this.operator,r=this.value;return"all"===e||"in"===e&&r.includes(t)}},{key:"vlength",value:function(){var t=this.operator,e=this.value;return"in"===t?e.length:0}},{key:"getData",value:function(){return{ci:this.ci,operator:this.operator,value:this.value}}}]),t}(),z=function(){function t(e,r){G(this,t),this.ci=e,this.order=r}return B(t,[{key:"asc",value:function(){return"asc"===this.order}},{key:"desc",value:function(){return"desc"===this.order}}]),t}(),H=function(){function t(){G(this,t),this.ref=null,this.filters=[],this.sort=null}return B(t,[{key:"setData",value:function(t){var e=t.ref,r=t.filters,n=t.sort;null!=e&&(this.ref=e,this.filters=r.map((function(t){return new U(t.ci,t.operator,t.value)})),n&&(this.sort=new z(n.ci,n.order)))}},{key:"getData",value:function(){if(this.active()){var t=this.ref,e=this.filters,r=this.sort;return{ref:t,filters:e.map((function(t){return t.getData()})),sort:r}}return{}}},{key:"addFilter",value:function(t,e,r){var n=this.getFilter(t);null==n?this.filters.push(new U(t,e,r)):n.set(e,r)}},{key:"setSort",value:function(t,e){this.sort=e?new z(t,e):null}},{key:"includes",value:function(t,e){return!!this.active()&&this.hrange().includes(t,e)}},{key:"getSort",value:function(t){var e=this.sort;return e&&e.ci===t?e:null}},{key:"getFilter",value:function(t){for(var e=this.filters,r=0;r<e.length;r+=1)if(e[r].ci===t)return e[r];return null}},{key:"filteredRows",value:function(t){var e=new Set,r=new Set;if(this.active())for(var n=this.range(),i=n.sri,o=n.eri,a=this.filters,s=i+1;s<=o;s+=1)for(var l=0;l<a.length;l+=1){var c=a[l],u=t(s,c.ci),f=u?u.text:"";if(!c.includes(f)){e.add(s);break}r.add(s)}return{rset:e,fset:r}}},{key:"items",value:function(t,e){var r={};if(this.active())for(var n=this.range(),i=n.sri,o=n.eri,a=i+1;a<=o;a+=1){var s=e(a,t);if(null===s||/^\s*$/.test(s.text))r[""]=(r[""]||0)+1;else{var l=s.text,c=(r[l]||0)+1;r[l]=c}}return r}},{key:"range",value:function(){return O.valueOf(this.ref)}},{key:"hrange",value:function(){var t=this.range();return t.eri=t.sri,t}},{key:"clear",value:function(){this.ref=null,this.filters=[],this.sort=null}},{key:"active",value:function(){return null!==this.ref}}]),t}();function V(t){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function W(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function K(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==V(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==V(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===V(o)?o:String(o)),n)}var i,o}var Y=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];W(this,t),this._=e}var e,r,n;return e=t,(r=[{key:"forEach",value:function(t){this._.forEach(t)}},{key:"deleteWithin",value:function(t){this._=this._.filter((function(e){return!e.within(t)}))}},{key:"getFirstIncludes",value:function(t,e){for(var r=0;r<this._.length;r+=1){var n=this._[r];if(n.includes(t,e))return n}return null}},{key:"filterIntersects",value:function(e){return new t(this._.filter((function(t){return t.intersects(e)})))}},{key:"intersects",value:function(t){for(var e=0;e<this._.length;e+=1)if(this._[e].intersects(t))return!0;return!1}},{key:"union",value:function(t){var e=t;return this._.forEach((function(t){t.intersects(e)&&(e=t.union(e))})),e}},{key:"add",value:function(t){this.deleteWithin(t),this._.push(t)}},{key:"shift",value:function(t,e,r,n){this._.forEach((function(i){var o=i.sri,a=i.sci,s=i.eri,l=i.eci,c=i;"row"===t?o>=e?(c.sri+=r,c.eri+=r):o<e&&e<=s&&(c.eri+=r,n(o,a,r,0)):"column"===t&&(a>=e?(c.sci+=r,c.eci+=r):a<e&&e<=l&&(c.eci+=r,n(o,a,0,r)))}))}},{key:"move",value:function(t,e,r){this._.forEach((function(n){var i=n;i.within(t)&&(i.eri+=e,i.sri+=e,i.sci+=r,i.eci+=r)}))}},{key:"setData",value:function(t){return this._=t.map((function(t){return O.valueOf(t)})),this}},{key:"getData",value:function(){return this._.map((function(t){return t.toString()}))}}])&&K(e.prototype,r),n&&K(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();var X=function t(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return n.forEach((function(r){Object.keys(r).forEach((function(n){var i=r[n];"string"==typeof i||"number"==typeof i||"boolean"==typeof i?e[n]=i:"function"!=typeof i&&!Array.isArray(i)&&i instanceof Object?(e[n]=e[n]||{},t(e[n],i)):e[n]=i}))})),e};function q(t){for(var e="".concat(t),r=0,n=!1,i=0;i<e.length;i+=1)!0===n&&(r+=1),"."===e.charAt(i)&&(n=!0);return r}function $(t,e,r){if(Number.isNaN(e)||Number.isNaN(r))return e+t+r;var n=q(e),i=q(r),o=Number(e),a=Number(r),s=0;if("-"===t)s=o-a;else if("+"===t)s=o+a;else if("*"===t)s=o*a;else if("/"===t)return q(s=o/a)>5?s.toFixed(2):s;return s.toFixed(Math.max(n,i))}var J={cloneDeep:function(t){return JSON.parse(JSON.stringify(t))},merge:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return X.apply(void 0,[{}].concat(e))},equals:function t(e,r){var n=Object.keys(e);if(n.length!==Object.keys(r).length)return!1;for(var i=0;i<n.length;i+=1){var o=n[i],a=e[o],s=r[o];if(void 0===s)return!1;if("string"==typeof a||"number"==typeof a||"boolean"==typeof a){if(a!==s)return!1}else if(Array.isArray(a)){if(a.length!==s.length)return!1;for(var l=0;l<a.length;l+=1)if(!t(a[l],s[l]))return!1}else if("function"!=typeof a&&!Array.isArray(a)&&a instanceof Object&&!t(a,s))return!1}return!0},arrayEquals:function(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r+=1)if(t[r]!==e[r])return!1;return!0},sum:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t},r=0,n=0;return Object.keys(t).forEach((function(i){r+=e(t[i],i),n+=1})),[r,n]},rangeEach:function(t,e,r){for(var n=t;n<e;n+=1)r(n)},rangeSum:function(t,e,r){for(var n=0,i=t;i<e;i+=1)n+=r(i);return n},rangeReduceIf:function(t,e,r,n,i,o){for(var a=r,s=n,l=t;l<e&&!(a>i);l+=1)a+=s=o(l);return[l,a-s,s]},deleteProperty:function(t,e){var r=t["".concat(e)];return delete t["".concat(e)],r},numberCalc:$};function Z(t){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Q(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return tt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function et(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Z(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Z(o)?o:String(o)),n)}var i,o}var rt=function(){function t(e){var r=e.len,n=e.height;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._={},this.len=r,this.height=n}var e,r,n;return e=t,(r=[{key:"getHeight",value:function(t){if(this.isHide(t))return 0;var e=this.get(t);return e&&e.height?e.height:this.height}},{key:"setHeight",value:function(t,e){this.getOrNew(t).height=e}},{key:"unhide",value:function(t){for(var e=t;e>0&&(e-=1,this.isHide(e));)this.setHide(e,!1)}},{key:"isHide",value:function(t){var e=this.get(t);return e&&e.hide}},{key:"setHide",value:function(t,e){var r=this.getOrNew(t);!0===e?r.hide=!0:delete r.hide}},{key:"setStyle",value:function(t,e){this.getOrNew(t).style=e}},{key:"sumHeight",value:function(t,e,r){var n=this;return J.rangeSum(t,e,(function(t){return r&&r.has(t)?0:n.getHeight(t)}))}},{key:"totalHeight",value:function(){return this.sumHeight(0,this.len)}},{key:"get",value:function(t){return this._[t]}},{key:"getOrNew",value:function(t){return this._[t]=this._[t]||{cells:{}},this._[t]}},{key:"getCell",value:function(t,e){var r=this.get(t);return void 0!==r&&void 0!==r.cells&&void 0!==r.cells[e]?r.cells[e]:null}},{key:"getCellMerge",value:function(t,e){var r=this.getCell(t,e);return r&&r.merge?r.merge:[0,0]}},{key:"getCellOrNew",value:function(t,e){var r=this.getOrNew(t);return r.cells[e]=r.cells[e]||{},r.cells[e]}},{key:"setCell",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"all",i=this.getOrNew(t);"all"===n?i.cells[e]=r:"text"===n?(i.cells[e]=i.cells[e]||{},i.cells[e].text=r.text):"format"===n&&(i.cells[e]=i.cells[e]||{},i.cells[e].style=r.style,r.merge&&(i.cells[e].merge=r.merge))}},{key:"setCellText",value:function(t,e,r){var n=this.getCellOrNew(t,e);!1!==n.editable&&(n.text=r)}},{key:"copyPaste",value:function(t,e,r){var n=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},a=t.sri,s=t.sci,l=t.eri,c=t.eci,u=e.sri,f=e.sci,h=e.eri,p=e.eci,d=t.size(),y=Q(d,2),v=y[0],b=y[1],m=e.size(),w=Q(m,2),_=w[0],S=w[1],O=!0,x=0;(h<a||p<s)&&(O=!1,x=h<a?_:S);for(var P=a;P<=l;P+=1)if(this._[P])for(var k=s;k<=c;k+=1)if(this._[P].cells&&this._[P].cells[k])for(var C=u;C<=h;C+=v)for(var T=function(){var t=C+(P-a),e=j+(k-s),d=J.cloneDeep(n._[P].cells[k]);if(i&&d&&d.text&&d.text.length>0){var y=d.text,m=j-f+(C-u)+2;if(O||(m-=x+1),"="===y[0])d.text=y.replace(/[a-zA-Z]{1,3}\d+/g,(function(t){var e=0,r=0;return a===u?e=m-1:r=m-1,/^\d+$/.test(t)?t:g(t,e,r)}));else if(v<=1&&b>1&&(u>l||h<a)||b<=1&&v>1&&(f>c||p<s)||v<=1&&b<=1){var w=/[\\.\d]+$/.exec(y);if(null!==w){var _=Number(w[0])+m-1;d.text=y.substring(0,w.index)+_}}}n.setCell(t,e,d,r),o(t,e,d)},j=f;j<=p;j+=b)T()}},{key:"cutPaste",value:function(t,e){var r=this,n={};this.each((function(i){r.eachCells(i,(function(o){var a=parseInt(i,10),s=parseInt(o,10);t.includes(i,o)&&(a=e.sri+(a-t.sri),s=e.sci+(s-t.sci)),n[a]=n[a]||{cells:{}},n[a].cells[s]=r._[i].cells[o]}))})),this._=n}},{key:"paste",value:function(t,e){var r=this;if(!(t.length<=0)){var n=e.sri,i=e.sci;t.forEach((function(t,e){var o=n+e;t.forEach((function(t,e){var n=i+e;r.setCellText(o,n,t)}))}))}}},{key:"insert",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n={};this.each((function(i,o){var a=parseInt(i,10);a>=t&&(a+=r,e.eachCells(i,(function(e,n){n.text&&"="===n.text[0]&&(n.text=n.text.replace(/[a-zA-Z]{1,3}\d+/g,(function(e){return g(e,0,r,(function(e,r){return r>=t}))})))}))),n[a]=o})),this._=n,this.len+=r}},{key:"delete",value:function(t,e){var r=this,n=e-t+1,i={};this.each((function(o,a){var s=parseInt(o,10);s<t?i[s]=a:o>e&&(i[s-n]=a,r.eachCells(o,(function(t,r){r.text&&"="===r.text[0]&&(r.text=r.text.replace(/[a-zA-Z]{1,3}\d+/g,(function(t){return g(t,0,-n,(function(t,r){return r>e}))})))})))})),this._=i,this.len-=n}},{key:"insertColumn",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.each((function(n,i){var o={};e.eachCells(n,(function(e,n){var i=parseInt(e,10);i>=t&&(i+=r,n.text&&"="===n.text[0]&&(n.text=n.text.replace(/[a-zA-Z]{1,3}\d+/g,(function(e){return g(e,r,0,(function(e){return e>=t}))})))),o[i]=n})),i.cells=o}))}},{key:"deleteColumn",value:function(t,e){var r=this,n=e-t+1;this.each((function(i,o){var a={};r.eachCells(i,(function(r,i){var o=parseInt(r,10);o<t?a[o]=i:o>e&&(a[o-n]=i,i.text&&"="===i.text[0]&&(i.text=i.text.replace(/[a-zA-Z]{1,3}\d+/g,(function(t){return g(t,-n,0,(function(t){return t>e}))}))))})),o.cells=a}))}},{key:"deleteCells",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";t.each((function(t,n){e.deleteCell(t,n,r)}))}},{key:"deleteCell",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"all",n=this.get(t);if(null!==n){var i=this.getCell(t,e);null!==i&&!1!==i.editable&&("all"===r?delete n.cells[e]:"text"===r?(i.text&&delete i.text,i.value&&delete i.value):"format"===r?(void 0!==i.style&&delete i.style,i.merge&&delete i.merge):"merge"===r&&i.merge&&delete i.merge)}}},{key:"maxCell",value:function(){var t=Object.keys(this._),e=t[t.length-1],r=this._[e];if(r){var n=r.cells,i=Object.keys(n),o=i[i.length-1];return[parseInt(e,10),parseInt(o,10)]}return[0,0]}},{key:"each",value:function(t){Object.entries(this._).forEach((function(e){var r=Q(e,2),n=r[0],i=r[1];t(n,i)}))}},{key:"eachCells",value:function(t,e){this._[t]&&this._[t].cells&&Object.entries(this._[t].cells).forEach((function(t){var r=Q(t,2),n=r[0],i=r[1];e(n,i)}))}},{key:"setData",value:function(t){t.len&&(this.len=t.len,delete t.len),this._=t}},{key:"getData",value:function(){var t=this.len;return Object.assign({len:t},this._)}}])&&et(e.prototype,r),n&&et(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function nt(t){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function it(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==nt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==nt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===nt(o)?o:String(o)),n)}var i,o}var ot=function(){function t(e){var r=e.len,n=e.width,i=e.indexWidth,o=e.minWidth;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._={},this.len=r,this.width=n,this.indexWidth=i,this.minWidth=o}var e,r,n;return e=t,(r=[{key:"setData",value:function(t){t.len&&(this.len=t.len,delete t.len),this._=t}},{key:"getData",value:function(){var t=this.len;return Object.assign({len:t},this._)}},{key:"getWidth",value:function(t){if(this.isHide(t))return 0;var e=this._[t];return e&&e.width?e.width:this.width}},{key:"getOrNew",value:function(t){return this._[t]=this._[t]||{},this._[t]}},{key:"setWidth",value:function(t,e){this.getOrNew(t).width=e}},{key:"unhide",value:function(t){for(var e=t;e>0&&(e-=1,this.isHide(e));)this.setHide(e,!1)}},{key:"isHide",value:function(t){var e=this._[t];return e&&e.hide}},{key:"setHide",value:function(t,e){var r=this.getOrNew(t);!0===e?r.hide=!0:delete r.hide}},{key:"setStyle",value:function(t,e){this.getOrNew(t).style=e}},{key:"sumWidth",value:function(t,e){var r=this;return J.rangeSum(t,e,(function(t){return r.getWidth(t)}))}},{key:"totalWidth",value:function(){return this.sumWidth(0,this.len)}}])&&it(e.prototype,r),n&&it(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function at(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return st(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return st(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function st(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var lt=["en"],ct={en:{toolbar:{undo:"Undo",redo:"Redo",print:"Print",paintformat:"Paint format",clearformat:"Clear format",format:"Format",fontName:"Font",fontSize:"Font size",fontBold:"Font bold",fontItalic:"Font italic",underline:"Underline",strike:"Strike",color:"Text color",bgcolor:"Fill color",border:"Borders",merge:"Merge cells",align:"Horizontal align",valign:"Vertical align",textwrap:"OK Text wrapping",freeze:"Freeze cell",overlayer:"OK OverLayer enable",autofilter:"OK Filter",formula:"Functions",more:"More"},contextmenu:{copy:"Copy",cut:"Cut",paste:"Paste",pasteValue:"Paste values only",pasteFormat:"Paste format only",hide:"Hide",insertRow:"Insert row",insertColumn:"Insert column",deleteSheet:"Delete",deleteRow:"Delete row",deleteColumn:"Delete column",deleteCell:"Delete cell",deleteCellText:"Delete cell text",validation:"Data validations",cellprintable:"Enable export",cellnonprintable:"Disable export",celleditable:"Enable editing",cellnoneditable:"Disable editing"},print:{size:"Paper size",orientation:"Page orientation",orientations:["Landscape","Portrait"]},format:{normal:"Normal",text:"Plain Text",number:"Number",percent:"Percent",rmb:"RMB",usd:"USD",eur:"EUR",date:"Date",time:"Time",datetime:"Date time",duration:"Duration"},formula:{sum:"Sum",average:"Average",max:"Max",min:"Min",_if:"IF",and:"AND",or:"OR",concat:"Concat"},validation:{required:"it must be required",notMatch:"it not match its validation rule",between:"it is between {} and {}",notBetween:"it is not between {} and {}",notIn:"it is not in list",equal:"it equal to {}",notEqual:"it not equal to {}",lessThan:"it less than {}",lessThanEqual:"it less than or equal to {}",greaterThan:"it greater than {}",greaterThanEqual:"it greater than or equal to {}"},error:{pasteForMergedCell:"Unable to do this for merged cells"},calendar:{weeks:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"]},button:{next:"Next",cancel:"Cancel",remove:"Remove",save:"Save",ok:"OK"},sort:{desc:"Sort Z -> A",asc:"Sort A -> Z"},filter:{empty:"empty"},dataValidation:{mode:"Mode",range:"Cell Range",criteria:"Criteria",modeType:{cell:"Cell",column:"Colun",row:"Row"},type:{list:"List",number:"Number",date:"Date",phone:"Phone",email:"Email"},operator:{be:"between",nbe:"not betwwen",lt:"less than",lte:"less than or equal to",gt:"greater than",gte:"greater than or equal to",eq:"equal to",neq:"not equal to"}}}};function ut(t,e){if(e){var r,n=at(lt);try{for(n.s();!(r=n.n()).done;){var i=r.value;if(!e[i])break;for(var o=e[i],a=t.match(/(?:\\.|[^.])+/g),s=0;s<a.length;s+=1){var l=o[a[s]];if(!l)break;if(s===a.length-1)return l;o=l}}}catch(t){n.e(t)}finally{n.f()}}}function ft(t){var e=ut(t,ct);return!e&&window&&window.x_spreadsheet&&window.x_spreadsheet.$messages&&(e=ut(t,window.x_spreadsheet.$messages)),e||""}function ht(t){return function(){return ft(t)}}function pt(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];r?lt=[t]:lt.unshift(t),e&&(ct[t]=e)}function dt(t){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return vt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function gt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==dt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==dt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===dt(o)?o:String(o)),n)}var i,o}var bt={phone:/^[1-9]\d{10}$/,email:/w+([-+.]w+)*@w+([-.]w+)*.w+([-.]w+)*/};function mt(t,e){var r="";if(!t){for(var n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];r=ft.apply(void 0,["validation.".concat(e)].concat(i))}return[t,r]}var wt=function(){function t(e,r,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.required=r,this.value=n,this.type=e,this.operator=i,this.message=""}var e,r,n;return e=t,(r=[{key:"parseValue",value:function(t){var e=this.type;return"date"===e?new Date(t):"number"===e?Number(t):t}},{key:"equals",value:function(t){var e=this.type===t.type&&this.required===t.required&&this.operator===t.operator;return e&&(e=Array.isArray(this.value)?J.arrayEquals(this.value,t.value):this.value===t.value),e}},{key:"values",value:function(){return this.value.split(",")}},{key:"validate",value:function(t){var e=this.required,r=this.operator,n=this.value,i=this.type;if(e&&/^\s*$/.test(t))return mt(!1,"required");if(/^\s*$/.test(t))return[!0];if(bt[i]&&!bt[i].test(t))return mt(!1,"notMatch");if("list"===i)return mt(this.values().includes(t),"notIn");if(r){var o=this.parseValue(t);if("be"===r){var a=yt(n,2),s=a[0],l=a[1];return mt(o>=this.parseValue(s)&&o<=this.parseValue(l),"between",s,l)}if("nbe"===r){var c=yt(n,2),u=c[0],f=c[1];return mt(o<this.parseValue(u)||o>this.parseValue(f),"notBetween",u,f)}if("eq"===r)return mt(o===this.parseValue(n),"equal",n);if("neq"===r)return mt(o!==this.parseValue(n),"notEqual",n);if("lt"===r)return mt(o<this.parseValue(n),"lessThan",n);if("lte"===r)return mt(o<=this.parseValue(n),"lessThanEqual",n);if("gt"===r)return mt(o>this.parseValue(n),"greaterThan",n);if("gte"===r)return mt(o>=this.parseValue(n),"greaterThanEqual",n)}return[!0]}}])&&gt(e.prototype,r),n&&gt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function _t(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return St(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return St(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function St(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ot(t){return(Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Ot(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Ot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Ot(o)?o:String(o)),n)}var i,o}function kt(t,e,r){return e&&Pt(t.prototype,e),r&&Pt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var Ct=function(){function t(e,r,n){xt(this,t),this.refs=r,this.mode=e,this.validator=n}return kt(t,[{key:"includes",value:function(t,e){for(var r=this.refs,n=0;n<r.length;n+=1){if(O.valueOf(r[n]).includes(t,e))return!0}return!1}},{key:"addRef",value:function(t){this.remove(O.valueOf(t)),this.refs.push(t)}},{key:"remove",value:function(t){var e=[];this.refs.forEach((function(r){var n=O.valueOf(r);n.intersects(t)?n.difference(t).forEach((function(t){return e.push(t.toString())})):e.push(r)})),this.refs=e}},{key:"getData",value:function(){var t=this.refs,e=this.mode,r=this.validator;return{refs:t,mode:e,type:r.type,required:r.required,operator:r.operator,value:r.value}}}],[{key:"valueOf",value:function(e){var r=e.refs,n=e.mode,i=e.type,o=e.required,a=e.operator,s=e.value;return new t(n,r,new wt(i,o,s,a))}}]),t}(),Tt=function(){function t(){xt(this,t),this._=[],this.errors=new Map}return kt(t,[{key:"getError",value:function(t,e){return this.errors.get("".concat(t,"_").concat(e))}},{key:"validate",value:function(t,e,r){var n=this.get(t,e),i="".concat(t,"_").concat(e),o=this.errors;if(null!==n){var a=_t(n.validator.validate(r),2),s=a[0],l=a[1];s?o.delete(i):o.set(i,l)}else o.delete(i);return!0}},{key:"add",value:function(t,e,r){var n=r.type,i=r.required,o=r.value,a=r.operator,s=new wt(n,i,o,a),l=this.getByValidator(s);null!==l?l.addRef(e):this._.push(new Ct(t,[e],s))}},{key:"getByValidator",value:function(t){for(var e=0;e<this._.length;e+=1){var r=this._[e];if(r.validator.equals(t))return r}return null}},{key:"get",value:function(t,e){for(var r=0;r<this._.length;r+=1){var n=this._[r];if(n.includes(t,e))return n}return null}},{key:"remove",value:function(t){this.each((function(e){e.remove(t)}))}},{key:"each",value:function(t){this._.forEach((function(e){return t(e)}))}},{key:"getData",value:function(){return this._.filter((function(t){return t.refs.length>0})).map((function(t){return t.getData()}))}},{key:"setData",value:function(t){this._=t.map((function(t){return Ct.valueOf(t)}))}}]),t}();function jt(t){return(jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Et(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==jt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==jt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===jt(o)?o:String(o)),n)}var i,o}var At=function(){function t(e){var r=e.draggable;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._={},this.draggable=r}var e,r,n;return e=t,(r=[{key:"setData",value:function(t){console.log("shapes setData:",t),this._=t}},{key:"getData",value:function(){return Object.assign(this._)}}])&&Et(e.prototype,r),n&&Et(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Rt(t){return(Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mt(t){return function(t){if(Array.isArray(t))return Nt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Dt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ft(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Rt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Rt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Rt(o)?o:String(o)),n)}var i,o}function It(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||Dt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dt(t,e){if(t){if("string"==typeof t)return Nt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Nt(t,e):void 0}}function Nt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Gt={mode:"edit",view:{height:function(){return document.documentElement.clientHeight},width:function(){return document.documentElement.clientWidth}},showGrid:!0,showToolbar:!0,showContextmenu:!0,showBottomBar:!0,row:{len:100,height:25},col:{len:26,width:100,indexWidth:60,minWidth:60},shape:{draggable:!0},style:{bgcolor:"#ffffff",align:"left",valign:"middle",textwrap:!1,strike:!1,underline:!1,color:"#0a0a0a",font:{name:"Arial",size:10,bold:!1,italic:!1},format:"normal"}};function Lt(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},n=this.merges,i=e.clone(),o=t.size(),a=It(o,2),s=a[0],l=a[1],c=e.size(),u=It(c,2),f=u[0],h=u[1];return s>f&&(i.eri=e.sri+s-1),l>h&&(i.eci=e.sci+l-1),!n.intersects(i)||(r(ft("error.pasteForMergedCell")),!1)}function Bt(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this.rows,o=this.merges;"all"!==r&&"format"!==r||(i.deleteCells(e,r),o.deleteWithin(e)),i.copyPaste(t,e,r,n,(function(t,e,r){if(r&&r.merge){var n=It(r.merge,2),i=n[0],a=n[1];if(i<=0&&a<=0)return;o.add(new O(t,e,t+i,e+a))}}))}function Ut(t,e){var r=this.clipboard,n=this.rows,i=this.merges;n.cutPaste(t,e),i.move(t,e.sri-t.sri,e.sci-t.sci),r.clear()}function zt(t,e,r){var n=this.styles,i=this.rows.getCellOrNew(t,e),o={};void 0!==i.style&&(o=J.cloneDeep(n[i.style])),o=J.merge(o,{border:r}),i.style=this.addStyle(o)}function Ht(t){var e=this,r=t.mode,n=t.style,i=t.color,o=this.styles,a=this.selector,s=this.rows,l=a.range,c=l.sri,u=l.sci,f=l.eri,h=l.eci,p=!this.isSingleSelected();if(p||"inside"!==r&&"horizontal"!==r&&"vertical"!==r)if("outside"!==r||p){if("none"===r)a.range.each((function(t,r){var n=s.getCell(t,r);if(n&&void 0!==n.style){var i=J.cloneDeep(o[n.style]);delete i.border,n.style=e.addStyle(i)}}));else if("all"===r||"inside"===r||"outside"===r||"horizontal"===r||"vertical"===r)for(var d=[],y=c;y<=f;y+=1)for(var v=u;v<=h;v+=1){for(var g=[],b=0;b<d.length;b+=1){var m=It(d[b],4),w=m[0],_=m[1],S=m[2],O=m[3];if(y===w+S+1&&g.push(b),w<=y&&y<=w+S&&v===_){v+=O+1;break}}if(g.forEach((function(t){return d.splice(t,1)})),v>h)break;var x=s.getCell(y,v),P=0,k=0;if(x&&x.merge){var C=It(x.merge,2);P=C[0],k=C[1],d.push([y,v,P,k])}var T=P>0&&y+P===f,j=k>0&&v+k===h,E={};"all"===r?E={bottom:[n,i],top:[n,i],left:[n,i],right:[n,i]}:"inside"===r?(!j&&v<h&&(E.right=[n,i]),!T&&y<f&&(E.bottom=[n,i])):"horizontal"===r?!T&&y<f&&(E.bottom=[n,i]):"vertical"===r?!j&&v<h&&(E.right=[n,i]):"outside"===r&&p&&(c===y&&(E.top=[n,i]),(T||f===y)&&(E.bottom=[n,i]),u===v&&(E.left=[n,i]),(j||h===v)&&(E.right=[n,i])),Object.keys(E).length>0&&zt.call(this,y,v,E),v+=k}else if("top"===r||"bottom"===r)for(var A=u;A<=h;A+=1)"top"===r&&(zt.call(this,c,A,{top:[n,i]}),A+=s.getCellMerge(c,A)[1]),"bottom"===r&&(zt.call(this,f,A,{bottom:[n,i]}),A+=s.getCellMerge(f,A)[1]);else if("left"===r||"right"===r)for(var R=c;R<=f;R+=1)"left"===r&&(zt.call(this,R,u,{left:[n,i]}),R+=s.getCellMerge(R,u)[0]),"right"===r&&(zt.call(this,R,h,{right:[n,i]}),R+=s.getCellMerge(R,h)[0])}else zt.call(this,c,u,{top:[n,i],bottom:[n,i],left:[n,i],right:[n,i]})}function Vt(t,e){var r=this.rows,n=this.freezeTotalHeight(),i=r.height;n+r.height<t&&(i-=e);for(var o=this.exceptRowSet,a=0,s=i,l=r.height;a<r.len&&!(s>t);a+=1)o.has(a)||(s+=l=r.getHeight(a));return(s-=l)<=0?{ri:-1,top:0,height:l}:{ri:a-1,top:s,height:l}}function Wt(t,e){var r=this.cols,n=this.freezeTotalWidth(),i=r.indexWidth;n+r.indexWidth<t&&(i-=e);var o=It(J.rangeReduceIf(0,r.len,i,r.indexWidth,t,(function(t){return r.getWidth(t)})),3),a=o[0],s=o[1],l=o[2];return s<=0?{ci:-1,left:0,width:r.indexWidth}:{ci:a-1,left:s,width:l}}var Kt=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.settings=J.merge(Gt,r||{}),this.name=e||"sheet",this.freeze=[0,0],this.styles=[],this.merges=new Y,this.rows=new rt(this.settings.row),this.cols=new ot(this.settings.col),this.shapes=new At(this.settings.shape),this.validations=new Tt,this.hyperlinks={},this.comments={},this.selector=new k,this.scroll=new E,this.history=new M,this.clipboard=new D,this.autoFilter=new H,this.change=function(){},this.exceptRowSet=new Set,this.sortedRowMap=new Map,this.unsortedRowMap=new Map,this.h_splitSheets=new Array,this.v_splitSheets=new Array}var e,r,n;return e=t,(r=[{key:"addValidation",value:function(t,e,r){var n=this;this.changeData((function(){n.validations.add(t,e,r)}))}},{key:"removeValidation",value:function(){var t=this,e=this.selector.range;this.changeData((function(){t.validations.remove(e)}))}},{key:"getSelectedValidator",value:function(){var t=this.selector,e=t.ri,r=t.ci,n=this.validations.get(e,r);return n?n.validator:null}},{key:"getSelectedValidation",value:function(){var t=this.selector,e=t.ri,r=t.ci,n=t.range,i=this.validations.get(e,r),o={ref:n.toString()};return null!==i&&(o.mode=i.mode,o.validator=i.validator),o}},{key:"canUndo",value:function(){return this.history.canUndo()}},{key:"canRedo",value:function(){return this.history.canRedo()}},{key:"undo",value:function(){var t=this;this.history.undo(this.getData(),(function(e){t.setData(e)}))}},{key:"redo",value:function(){var t=this;this.history.redo(this.getData(),(function(e){t.setData(e)}))}},{key:"copy",value:function(){this.clipboard.copy(this.selector.range)}},{key:"copyToSystemClipboard",value:function(t){for(var e=[],r=this.selector.range,n=r.sri,i=r.eri,o=r.sci,a=r.eci,s=n;s<=i;s+=1){for(var l=[],c=o;c<=a;c+=1){var u=this.getCell(s,c);l.push(u&&u.text||"")}e.push(l)}e=e.map((function(t){return t.join("\t")})).join("\n"),t&&(t.clipboardData.clearData(),t.clipboardData.setData("text/plain",e),t.preventDefault()),navigator.clipboard&&navigator.clipboard.writeText(e).then((function(){}),(function(t){console.log("text copy to the system clipboard error  ",e,t)}))}},{key:"cut",value:function(){this.clipboard.cut(this.selector.range)}},{key:"paste",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=this.clipboard,i=this.selector;return!n.isClear()&&!!Lt.call(this,n.range,i.range,r)&&(this.changeData((function(){n.isCopy()?Bt.call(t,n.range,i.range,e):n.isCut()&&Ut.call(t,n.range,i.range)})),!0)}},{key:"pasteFromSystemClipboard",value:function(t,e){var r=this,n=this.selector;navigator.clipboard.readText().then((function(i){var o=r.parseClipboardContent(i),a=n.ri;o.forEach((function(t){var e=n.ci;t.forEach((function(t){r.setCellText(a,e,t,"input"),e+=1})),a+=1})),t(),e(r.rows.getData())}))}},{key:"parseClipboardContent",value:function(t){var e=[],r=t.split("\n"),n=0;return r.forEach((function(t){e[n]=t.split("\t"),n+=1})),e}},{key:"pasteFromText",value:function(t){var e=[];if((e=/\r\n/.test(t)?t.split("\r\n").map((function(t){return t.replace(/"/g,"").split("\t")})):t.split("\n").map((function(t){return t.replace(/"/g,"").split("\t")}))).length){var r=this.rows,n=this.selector;this.changeData((function(){r.paste(e,n.range)}))}}},{key:"autofill",value:function(t,e){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=this.selector.range;return!!Lt.call(this,i,t,n)&&(this.changeData((function(){Bt.call(r,i,t,e,!0)})),!0)}},{key:"clearClipboard",value:function(){this.clipboard.clear()}},{key:"calSelectedRangeByEnd",value:function(t,e){var r=this.selector,n=this.rows,i=this.cols,o=this.merges,a=r.range,s=a.sri,l=a.sci,c=a.eri,u=a.eci,f=r.ri,h=r.ci,p=t,d=e;return t<0&&(p=n.len-1),e<0&&(d=i.len-1),p>f?(s=f,c=p):(s=p,c=f),d>h?(l=h,u=d):(l=d,u=h),r.range=o.union(new O(s,l,c,u)),r.range=o.union(r.range),r.range}},{key:"calSelectedRangeByStart",value:function(t,e){var r=this.selector,n=this.rows,i=this.cols,o=this.merges.getFirstIncludes(t,e);return null===o&&(o=new O(t,e,t,e),-1===t&&(o.sri=0,o.eri=n.len-1),-1===e&&(o.sci=0,o.eci=i.len-1)),r.range=o,o}},{key:"setSelectedCellAttr",value:function(t,e){var r=this;this.changeData((function(){var n=r.selector,i=r.styles,o=r.rows;if("merge"===t)e?r.merge():r.unmerge();else if("border"===t)Ht.call(r,e);else if("formula"===t){var a=n.ri,s=n.ci,l=n.range;if(n.multiple()){var c=It(n.size(),2),u=c[0],f=c[1],h=l.sri,p=l.sci,d=l.eri,y=l.eci;if(u>1)for(var g=p;g<=y;g+=1)o.getCellOrNew(d+1,g).text="=".concat(e,"(").concat(v(g,h),":").concat(v(g,d),")");else f>1&&(o.getCellOrNew(a,y+1).text="=".concat(e,"(").concat(v(p,a),":").concat(v(y,a),")"))}else o.getCellOrNew(a,s).text="=".concat(e,"()")}else n.range.each((function(n,a){var s=o.getCellOrNew(n,a),l={};if(void 0!==s.style&&(l=J.cloneDeep(i[s.style])),"format"===t)l.format=e,s.style=r.addStyle(l);else if("font-bold"===t||"font-italic"===t||"font-name"===t||"font-size"===t){var c={};c[t.split("-")[1]]=e,l.font=Object.assign(l.font||{},c),s.style=r.addStyle(l)}else"strike"===t||"textwrap"===t||"underline"===t||"align"===t||"valign"===t||"color"===t||"bgcolor"===t?(l[t]=e,s.style=r.addStyle(l)):s[t]=e}))}))}},{key:"setSelectedCellText",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"input",r=this.autoFilter,n=this.selector,i=this.rows,o=n.ri,a=n.ci,s=o;this.unsortedRowMap.has(o)&&(s=this.unsortedRowMap.get(o));var l=i.getCell(s,a),c=l?l.text:"";if(this.setCellText(s,a,t,e),r.active()){var u=r.getFilter(a);if(u){var f=u.value.findIndex((function(t){return t===c}));f>=0&&u.value.splice(f,1,t)}}}},{key:"getSelectedCell",value:function(){var t=this.selector,e=t.ri,r=t.ci,n=e;return this.unsortedRowMap.has(e)&&(n=this.unsortedRowMap.get(e)),this.rows.getCell(n,r)}},{key:"xyInSelectedRect",value:function(t,e){var r=this.getSelectedRect(),n=r.left,i=r.top,o=r.width,a=r.height,s=t-this.cols.indexWidth,l=e-this.rows.height;return s>n&&s<n+o&&l>i&&l<i+a}},{key:"getSelectedRect",value:function(){return this.getRect(this.selector.range)}},{key:"getClipboardRect",value:function(){var t=this.clipboard;return t.isClear()?{left:-100,top:-100}:this.getRect(t.range)}},{key:"getRect",value:function(t){var e=this.scroll,r=this.rows,n=this.cols,i=this.exceptRowSet,o=t.sri,a=t.sci,s=t.eri,l=t.eci;if(o<0&&a<0)return{left:0,l:0,top:0,t:0,scroll:e};var c=n.sumWidth(0,a),u=r.sumHeight(0,o,i),f=r.sumHeight(o,s+1,i),h=n.sumWidth(a,l+1),p=c-e.x,d=u-e.y,y=this.freezeTotalHeight(),v=this.freezeTotalWidth();return v>0&&v>c&&(p=c),y>0&&y>u&&(d=u),{l:c,t:u,left:p,top:d,height:f,width:h,scroll:e}}},{key:"getCellRectByXY",value:function(t,e){var r=this.scroll,n=this.merges,i=this.rows,o=this.cols,a=Vt.call(this,e,r.y),s=a.ri,l=a.top,c=a.height,u=Wt.call(this,t,r.x),f=u.ci,h=u.left,p=u.width;if(-1===f&&(p=o.totalWidth()),-1===s&&(c=i.totalHeight()),s>=0||f>=0){var d=n.getFirstIncludes(s,f);if(d){s=d.sri,f=d.sci;var y=this.cellRect(s,f);h=y.left,l=y.top,p=y.width,c=y.height}}return{ri:s,ci:f,left:h,top:l,width:p,height:c}}},{key:"isSingleSelected",value:function(){var t=this.selector.range,e=t.sri,r=t.sci,n=t.eri,i=t.eci,o=this.getCell(e,r);if(o&&o.merge){var a=It(o.merge,2),s=a[0],l=a[1];if(e+s===n&&r+l===i)return!0}return!this.selector.multiple()}},{key:"canUnmerge",value:function(){var t=this.selector.range,e=t.sri,r=t.sci,n=t.eri,i=t.eci,o=this.getCell(e,r);if(o&&o.merge){var a=It(o.merge,2),s=a[0],l=a[1];if(e+s===n&&r+l===i)return!0}return!1}},{key:"merge",value:function(){var t=this,e=this.selector,r=this.rows;if(!this.isSingleSelected()){var n=It(e.size(),2),i=n[0],o=n[1];if(i>1||o>1){var a=e.range,s=a.sri,l=a.sci;this.changeData((function(){var n=r.getCellOrNew(s,l);n.merge=[i-1,o-1],t.merges.add(e.range),t.rows.deleteCells(e.range),t.rows.setCell(s,l,n)}))}}}},{key:"unmerge",value:function(){var t=this,e=this.selector;if(this.isSingleSelected()){var r=e.range,n=r.sri,i=r.sci;this.changeData((function(){t.rows.deleteCell(n,i,"merge"),t.merges.deleteWithin(e.range)}))}}},{key:"canAutofilter",value:function(){return!this.autoFilter.active()}},{key:"autofilter",value:function(){var t=this,e=this.autoFilter,r=this.selector;this.changeData((function(){e.active()?(e.clear(),t.exceptRowSet=new Set,t.sortedRowMap=new Map,t.unsortedRowMap=new Map):e.ref=r.range.toString()}))}},{key:"setAutoFilter",value:function(t,e,r,n){var i=this.autoFilter;i.addFilter(t,r,n),i.setSort(t,e),this.resetAutoFilter()}},{key:"resetAutoFilter",value:function(){var t=this,e=this.autoFilter,r=this.rows;if(e.active()){var n=e.sort,i=e.filteredRows((function(t,e){return r.getCell(t,e)})),o=i.rset,a=i.fset,s=Array.from(a),l=Array.from(a);n&&s.sort((function(t,e){return"asc"===n.order?t-e:"desc"===n.order?e-t:0})),this.exceptRowSet=o,this.sortedRowMap=new Map,this.unsortedRowMap=new Map,s.forEach((function(e,r){t.sortedRowMap.set(l[r],e),t.unsortedRowMap.set(e,l[r])}))}}},{key:"deleteCell",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",r=this.selector;this.changeData((function(){t.rows.deleteCells(r.range,e),"all"!==e&&"format"!==e||t.merges.deleteWithin(r.range)}))}},{key:"insert",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.changeData((function(){var n=e.selector.range,i=n.sri,o=n.sci,a=e.rows,s=e.merges,l=e.cols,c=i;"row"===t?a.insert(i,r):"column"===t&&(a.insertColumn(o,r),c=o,l.len+=1),s.shift(t,c,r,(function(t,e,r,n){var i=a.getCell(t,e);i.merge[0]+=r,i.merge[1]+=n}))}))}},{key:"delete",value:function(t){var e=this;this.changeData((function(){var r=e.rows,n=e.merges,i=e.selector,o=e.cols,a=i.range,s=i.range,l=s.sri,c=s.sci,u=s.eri,f=s.eci,h=It(i.range.size(),2),p=h[0],d=h[1],y=l,v=p;"row"===t?r.delete(l,u):"column"===t&&(r.deleteColumn(c,f),y=a.sci,v=d,o.len-=f-c+1),n.shift(t,y,-v,(function(t,e,n,i){var o=r.getCell(t,e);o.merge[0]+=n,o.merge[1]+=i,0===o.merge[0]&&0===o.merge[1]&&delete o.merge}))}))}},{key:"scrollx",value:function(t,e){var r=this.scroll,n=this.freeze,i=this.cols,o=It(n,2)[1],a=It(J.rangeReduceIf(o,i.len,0,0,t,(function(t){return i.getWidth(t)})),3),s=a[0],l=a[1],c=a[2],u=l;t>0&&(u+=c),r.x!==u&&(r.ci=t>0?s:0,r.x=u,e()),this.v_splitSheets.forEach((function(e){console.log("movex: ",t),e.sync_movex(t)}))}},{key:"sync_scrollx",value:function(t,e){var r=this.scroll,n=this.freeze,i=this.cols,o=It(n,2)[1],a=It(J.rangeReduceIf(o,i.len,0,0,t,(function(t){return i.getWidth(t)})),3),s=a[0],l=a[1],c=a[2],u=l;t>0&&(u+=c),r.x!==u&&(r.ci=t>0?s:0,r.x=u,e())}},{key:"scrolly",value:function(t,e){var r=this.scroll,n=this.freeze,i=this.rows,o=It(n,1)[0],a=It(J.rangeReduceIf(o,i.len,0,0,t,(function(t){return i.getHeight(t)})),3),s=a[0],l=a[1],c=a[2],u=l;t>0&&(u+=c),r.y!==u&&(r.ri=t>0?s:0,r.y=u,e()),this.h_splitSheets.forEach((function(e){e.sync_movey(t)}))}},{key:"sync_scrolly",value:function(t,e){var r=this.scroll,n=this.freeze,i=this.rows,o=It(n,1)[0],a=It(J.rangeReduceIf(o,i.len,0,0,t,(function(t){return i.getHeight(t)})),3),s=a[0],l=a[1],c=a[2],u=l;t>0&&(u+=c),r.y!==u&&(r.ri=t>0?s:0,r.y=u,e())}},{key:"cellRect",value:function(t,e){var r=this.rows,n=this.cols,i=n.sumWidth(0,e),o=r.sumHeight(0,t),a=r.getCell(t,e),s=n.getWidth(e),l=r.getHeight(t);if(null!==a&&a.merge){var c=It(a.merge,2),u=c[0],f=c[1];if(u>0)for(var h=1;h<=u;h+=1)l+=r.getHeight(t+h);if(f>0)for(var p=1;p<=f;p+=1)s+=n.getWidth(e+p)}return{left:i,top:o,width:s,height:l,cell:a}}},{key:"getCell",value:function(t,e){return this.rows.getCell(t,e)}},{key:"getCellTextOrDefault",value:function(t,e){var r=this.getCell(t,e);return r&&r.text?r.text:""}},{key:"getCellStyle",value:function(t,e){var r=this.getCell(t,e);return r&&void 0!==r.style?this.styles[r.style]:null}},{key:"getCellStyleOrDefault",value:function(t,e){var r=this.styles,n=this.rows.getCell(t,e),i=n&&void 0!==n.style?r[n.style]:{};return J.merge(this.defaultStyle(),i)}},{key:"getSelectedCellStyle",value:function(){var t=this.selector,e=t.ri,r=t.ci;return this.getCellStyleOrDefault(e,r)}},{key:"setCellText",value:function(t,e,r,n){var i=this.rows,o=this.history,a=this.validations;"finished"===n?(i.setCellText(t,e,""),o.add(this.getData()),this.changeData((function(){i.setCellText(t,e,r)}))):(i.setCellText(t,e,r),this.change(this.getData())),a.validate(t,e,r)}},{key:"freezeIsActive",value:function(){var t=It(this.freeze,2),e=t[0],r=t[1];return e>0||r>0}},{key:"setFreeze",value:function(t,e){var r=this;this.changeData((function(){r.freeze=[t,e]}))}},{key:"freezeTotalWidth",value:function(){return this.cols.sumWidth(0,this.freeze[1])}},{key:"freezeTotalHeight",value:function(){return this.rows.sumHeight(0,this.freeze[0])}},{key:"setRowHeight",value:function(t,e){var r=this;this.changeData((function(){r.rows.setHeight(t,e)}))}},{key:"setColWidth",value:function(t,e){var r=this;this.changeData((function(){r.cols.setWidth(t,e)}))}},{key:"viewHeight",value:function(){var t=this.settings,e=t.view,r=t.showToolbar,n=t.showBottomBar,i=e.height();return n&&(i-=41),r&&(i-=41),i}},{key:"viewWidth",value:function(){return this.settings.view.width()}},{key:"freezeViewRange",value:function(){var t=It(this.freeze,2),e=t[0],r=t[1];return new O(0,0,e-1,r-1,this.freezeTotalWidth(),this.freezeTotalHeight())}},{key:"contentRange",value:function(){var t=this.rows,e=this.cols,r=It(t.maxCell(),2),n=r[0],i=r[1],o=t.sumHeight(0,n+1),a=e.sumWidth(0,i+1);return new O(0,0,n,i,a,o)}},{key:"exceptRowTotalHeight",value:function(t,e){var r=this.exceptRowSet,n=this.rows,i=Array.from(r),o=0;return i.forEach((function(r){if(r<t||r>e){var i=n.getHeight(r);o+=i}})),o}},{key:"viewRange",value:function(){var t=this.scroll,e=this.rows,r=this.cols,n=this.freeze,i=this.exceptRowSet,o=t.ri,a=t.ci;o<=0&&(o=It(n,1)[0]),a<=0&&(a=It(n,2)[1]);for(var s=0,l=0,c=[e.len,r.len],u=c[0],f=c[1],h=o;h<e.len&&(i.has(h)||(l+=e.getHeight(h),u=h),!(l>this.viewHeight()));h+=1);for(var p=a;p<r.len&&(f=p,!((s+=r.getWidth(p))>this.viewWidth()));p+=1);return new O(o,a,u,f,s,l)}},{key:"eachMergesInView",value:function(t,e){this.merges.filterIntersects(t).forEach((function(t){return e(t)}))}},{key:"hideRowsOrCols",value:function(){var t=this.rows,e=this.cols,r=this.selector,n=It(r.size(),2),i=n[0],o=n[1],a=r.range,s=a.sri,l=a.sci,c=a.eri,u=a.eci;if(i===t.len)for(var f=l;f<=u;f+=1)e.setHide(f,!0);else if(o===e.len)for(var h=s;h<=c;h+=1)t.setHide(h,!0)}},{key:"unhideRowsOrCols",value:function(t,e){this["".concat(t,"s")].unhide(e)}},{key:"rowEach",value:function(t,e,r){for(var n=0,i=this.rows,o=this.exceptRowSet,a=Mt(o),s=0,l=0;l<a.length;l+=1)a[l]<t&&(s+=1);for(var c=t+s;c<=e+s;c+=1)if(o.has(c))s+=1;else{var u=i.getHeight(c);if(u>0&&(r(c,n,u),(n+=u)>this.viewHeight()))break}}},{key:"colEach",value:function(t,e,r){for(var n=0,i=this.cols,o=t;o<=e;o+=1){var a=i.getWidth(o);if(a>0&&(r(o,n,a),(n+=a)>this.viewWidth()))break}}},{key:"defaultStyle",value:function(){return this.settings.style}},{key:"addStyle",value:function(t){for(var e=this.styles,r=0;r<e.length;r+=1){var n=e[r];if(J.equals(n,t))return r}return e.push(t),e.length-1}},{key:"changeData",value:function(t){this.history.add(this.getData()),t(),this.change(this.getData()),this.v_splitSheets.forEach((function(t){t.sync()})),this.h_splitSheets.forEach((function(t){t.sync()}))}},{key:"setData",value:function(t){var e=this;return Object.keys(t).forEach((function(r){if("merges"===r||"rows"===r||"cols"===r||"validations"===r||"shapes"===r)e[r].setData(t[r]);else if("freeze"===r){var n=It(y(t[r]),2),i=n[0],o=n[1];e.freeze=[o,i]}else"autofilter"===r?e.autoFilter.setData(t[r]):void 0!==t[r]&&(e[r]=t[r])})),this}},{key:"getData",value:function(){var t=this.name,e=this.freeze,r=this.styles,n=this.merges,i=this.rows,o=this.cols,a=this.validations,s=this.autoFilter;return{name:t,freeze:v(e[1],e[0]),styles:r,merges:n.getData(),rows:i.getData(),cols:o.getData(),validations:a.getData(),autofilter:s.getData()}}},{key:"horizontalAddSplitSheet",value:function(t){this.h_splitSheets.push(t)}},{key:"verticalAddSplitSheet",value:function(t){this.v_splitSheets.push(t)}}])&&Ft(e.prototype,r),n&&Ft(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Yt(t){return function(t){if(Array.isArray(t))return qt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Xt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xt(t,e){if(t){if("string"==typeof t)return qt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?qt(t,e):void 0}}function qt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function $t(t,e,r){t.addEventListener(e,r)}function Jt(t,e,r){t.removeEventListener(e,r)}function Zt(t){t.xclickoutside&&(Jt(window.document.body,"click",t.xclickoutside),delete t.xclickoutside)}function Qt(t,e){t.xclickoutside=function(r){2===r.detail||t.contains(r.target)||(e?e(t):(t.hide(),Zt(t)))},$t(window.document.body,"click",t.xclickoutside)}function te(t,e,r){$t(t,"mousemove",e),t.xEvtUp=function(n){Jt(t,"mousemove",e),Jt(t,"mouseup",t.xEvtUp),r(n)},$t(t,"mouseup",t.xEvtUp)}function ee(t,e,r,n){Math.abs(t)>Math.abs(e)?n(t>0?"right":"left",t,r):n(e>0?"down":"up",e,r)}function re(){var t=new Map;function e(e,r){var n;return t.has(e)&&(n=t.get(e),Array.isArray(n)&&n.push(r)||!1)||t.set(e,[].concat(r))}function r(e,r){var n,i;return t.has(e)&&(n=t.get(e),(i=n.indexOf(r))>=0&&n.splice(i,1)&&0===t.get(e).length&&t.delete(e))}return{get current(){return t},on:e,once:function(t,n){return e(t,(function e(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];n.call.apply(n,[null].concat(o)),r(t,e)}))},fire:function(e,r){return t.has(e)&&function(){var n,i=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Xt(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(t.get(e));try{for(i.s();!(n=i.n()).done;){var o=n.value;o.call.apply(o,[null].concat(Yt(r)))}}catch(t){i.e(t)}finally{i.f()}}()},removeListener:r,removeAllListeners:function(){t.clear()}}}var ne="x-spreadsheet";window.devicePixelRatio;function ie(t){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ae(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==ie(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===ie(o)?o:String(o)),n)}var i,o}var se=function(){function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1?arguments[1]:void 0;oe(this,t),this.moving=!1,this.vertical=r,this.el=c("div","".concat(ne,"-resizer ").concat(r?"vertical":"horizontal")).children(this.unhideHoverEl=c("div","".concat(ne,"-resizer-hover")).on("dblclick.stop",(function(t){return e.mousedblclickHandler(t)})).css("position","absolute").hide(),this.hoverEl=c("div","".concat(ne,"-resizer-hover")).on("mousedown.stop",(function(t){return e.mousedownHandler(t)})),this.lineEl=c("div","".concat(ne,"-resizer-line")).hide()).hide(),this.cRect=null,this.finishedFn=null,this.minDistance=n,this.unhideFn=function(){}}var e,r,n;return e=t,(r=[{key:"showUnhide",value:function(t){this.unhideIndex=t,this.unhideHoverEl.show()}},{key:"hideUnhide",value:function(){this.unhideHoverEl.hide()}},{key:"show",value:function(t,e){var r=this.moving,n=this.vertical,i=this.hoverEl,o=this.lineEl,a=this.el,s=this.unhideHoverEl;if(!r){this.cRect=t;var l=t.left,c=t.top,u=t.width,f=t.height;a.offset({left:n?l+u-5:l,top:n?c:c+f-5}).show(),i.offset({width:n?5:u,height:n?f:5}),o.offset({width:n?0:e.width,height:n?e.height:0}),s.offset({left:n?5-u:l,top:n?c:5-f,width:n?5:u,height:n?f:5})}}},{key:"hide",value:function(){this.el.offset({left:0,top:0}).hide(),this.hideUnhide()}},{key:"mousedblclickHandler",value:function(){this.unhideIndex&&this.unhideFn(this.unhideIndex)}},{key:"mousedownHandler",value:function(t){var e=this,r=t,n=this.el,i=this.lineEl,o=this.cRect,a=this.vertical,s=this.minDistance,l=a?o.width:o.height;i.show(),te(window,(function(t){e.moving=!0,null!==r&&1===t.buttons&&(a?(l+=t.movementX)>s&&n.css("left","".concat(o.left+l,"px")):(l+=t.movementY)>s&&n.css("top","".concat(o.top+l,"px")),r=t)}),(function(){r=null,i.hide(),e.moving=!1,e.hide(),e.finishedFn&&(l<s&&(l=s),e.finishedFn(o,l))}))}}])&&ae(e.prototype,r),n&&ae(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function le(t){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ce(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==le(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==le(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===le(o)?o:String(o)),n)}var i,o}var ue=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.vertical=e,this.moveFn=null,this.el=c("div","".concat(ne,"-scrollbar ").concat(e?"vertical":"horizontal")).child(this.contentEl=c("div","")).on("mousemove.stop",(function(){})).on("scroll.stop",(function(t){var e=t.target,n=e.scrollTop,i=e.scrollLeft;r.moveFn&&r.moveFn(r.vertical?n:i,t)}))}var e,r,n;return e=t,(r=[{key:"move",value:function(t){return this.el.scroll(t),this}},{key:"scroll",value:function(){return this.el.scroll()}},{key:"set",value:function(t,e){var r=t-1;if(e>r){var n=this.vertical?"height":"width";this.el.css(n,"".concat(r-15,"px")).show(),this.contentEl.css(this.vertical?"width":"height","1px").css(n,"".concat(e,"px"))}else this.el.hide();return this}}])&&ce(e.prototype,r),n&&ce(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function fe(t){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function he(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==fe(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==fe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===fe(o)?o:String(o)),n)}var i,o}function de(t,e,r){return e&&pe(t.prototype,e),r&&pe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var ye=10,ve=function(){function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];he(this,t),this.useHideInput=r,this.autoFocus=n,this.inputChange=function(){},this.cornerEl=c("div","".concat(ne,"-selector-corner")),this.areaEl=c("div","".concat(ne,"-selector-area")).child(this.cornerEl).hide(),this.clipboardEl=c("div","".concat(ne,"-selector-clipboard")).hide(),this.autofillEl=c("div","".concat(ne,"-selector-autofill")).hide(),this.el=c("div","".concat(ne,"-selector")).css("z-index","".concat(ye)).children(this.areaEl,this.clipboardEl,this.autofillEl).hide(),r&&(this.hideInput=c("input","").on("compositionend",(function(t){e.inputChange(t.target.value)})),this.el.child(this.hideInputDiv=c("div","hide-input").child(this.hideInput)),this.el.child(this.hideInputDiv=c("div","hide-input").child(this.hideInput))),ye+=1}return de(t,[{key:"setOffset",value:function(t){return this.el.offset(t).show(),this}},{key:"hide",value:function(){return this.el.hide(),this}},{key:"setAreaOffset",value:function(t){var e=t.left,r=t.top,n={width:t.width-3+.8,height:t.height-3+.8,left:e-.8,top:r-.8};this.areaEl.offset(n).show(),this.useHideInput&&(this.hideInputDiv.offset(n),this.autoFocus?this.hideInput.val("").focus():this.hideInput.val(""))}},{key:"setClipboardOffset",value:function(t){var e=t.left,r=t.top,n=t.width,i=t.height;this.clipboardEl.offset({left:e,top:r,width:n-5,height:i-5})}},{key:"showAutofill",value:function(t){var e=t.left,r=t.top,n=t.width,i=t.height;this.autofillEl.offset({width:n-3,height:i-3,left:e,top:r}).show()}},{key:"hideAutofill",value:function(){this.autofillEl.hide()}},{key:"showClipboard",value:function(){this.clipboardEl.show()}},{key:"hideClipboard",value:function(){this.clipboardEl.hide()}}]),t}();function ge(t){var e=this.data,r=t.left,n=t.top,i=t.width,o=t.height,a=t.scroll,s=t.l,l=t.t,c=e.freezeTotalWidth(),u=e.freezeTotalHeight(),f=r-c;c>s&&(f-=a.x);var h=n-u;return u>l&&(h-=a.y),{left:f,top:h,width:i,height:o}}function be(t){var e=this.data,r=t.left,n=t.width,i=t.height,o=t.l,a=t.t,s=t.scroll,l=e.freezeTotalWidth(),c=r-l;return l>o&&(c-=s.x),{left:c,top:a,width:n,height:i}}function me(t){var e=this.data,r=t.top,n=t.width,i=t.height,o=t.l,a=t.t,s=t.scroll,l=e.freezeTotalHeight(),c=r-l;return l>a&&(c-=s.y),{left:o,top:c,width:n,height:i}}function we(t){this.br.setAreaOffset(ge.call(this,t))}function _e(t){this.tl.setAreaOffset(t)}function Se(t){this.t.setAreaOffset(be.call(this,t))}function Oe(t){this.l.setAreaOffset(me.call(this,t))}function xe(t){this.l.setClipboardOffset(me.call(this,t))}function Pe(t){this.br.setClipboardOffset(ge.call(this,t))}function ke(t){this.tl.setClipboardOffset(t)}function Ce(t){this.t.setClipboardOffset(be.call(this,t))}function Te(t){we.call(this,t),_e.call(this,t),Se.call(this,t),Oe.call(this,t)}function je(t){Pe.call(this,t),ke.call(this,t),Ce.call(this,t),xe.call(this,t)}var Ee=function(){function t(e){var r=this;he(this,t);var n=e.settings.autoFocus;this.inputChange=function(){},this.data=e,this.br=new ve(!0,n),this.t=new ve,this.l=new ve,this.tl=new ve,this.br.inputChange=function(t){r.inputChange(t)},this.br.el.show(),this.offset=null,this.areaOffset=null,this.indexes=null,this.range=null,this.arange=null,this.el=c("div","".concat(ne,"-selectors")).children(this.tl.el,this.t.el,this.l.el,this.br.el).hide(),this.lastri=-1,this.lastci=-1,ye+=1}return de(t,[{key:"resetData",value:function(t){this.data=t,this.range=t.selector.range,this.resetAreaOffset()}},{key:"hide",value:function(){this.el.hide()}},{key:"resetOffset",value:function(){var t=this.data,e=this.tl,r=this.t,n=this.l,i=this.br,o=t.freezeTotalHeight(),a=t.freezeTotalWidth();o>0||a>0?(e.setOffset({width:a,height:o}),r.setOffset({left:a,height:o}),n.setOffset({top:o,width:a}),i.setOffset({left:a,top:o})):(e.hide(),r.hide(),n.hide(),i.setOffset({left:0,top:0}))}},{key:"resetAreaOffset",value:function(){var t=this.data.getSelectedRect(),e=this.data.getClipboardRect();Te.call(this,t),je.call(this,e),this.resetOffset()}},{key:"resetBRTAreaOffset",value:function(){var t=this.data.getSelectedRect(),e=this.data.getClipboardRect();we.call(this,t),Se.call(this,t),Pe.call(this,e),Ce.call(this,e),this.resetOffset()}},{key:"resetBRLAreaOffset",value:function(){var t=this.data.getSelectedRect(),e=this.data.getClipboardRect();we.call(this,t),Oe.call(this,t),Pe.call(this,e),xe.call(this,e),this.resetOffset()}},{key:"set",value:function(t,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=this.data,i=n.calSelectedRangeByStart(t,e),o=i.sri,a=i.sci;if(r){var s=t,l=e;t<0&&(s=0),e<0&&(l=0),n.selector.setIndexes(s,l),this.indexes=[s,l]}this.moveIndexes=[o,a],this.range=i,this.resetAreaOffset(),this.el.show()}},{key:"setEnd",value:function(t,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=this.data,i=this.lastri,o=this.lastci;if(r){if(t===i&&e===o)return;this.lastri=t,this.lastci=e}this.range=n.calSelectedRangeByEnd(t,e),Te.call(this,this.data.getSelectedRect())}},{key:"reset",value:function(){var t=this.data.selector.range,e=t.eri,r=t.eci;this.setEnd(e,r)}},{key:"showAutofill",value:function(t,e){if(-1!==t||-1!==e){var r=this.range,n=r.sri,i=r.sci,o=r.eri,a=r.eci,s=t,l=e,c=n-t,u=o-t,f=a-e;if(i-e>0)this.arange=new O(n,l,o,i-1);else if(c>0)this.arange=new O(s,i,n-1,a);else if(f<0)this.arange=new O(n,a+1,o,l);else{if(!(u<0))return void(this.arange=null);this.arange=new O(o+1,i,s,a)}if(null!==this.arange){var h=this.data.getRect(this.arange);h.width+=2,h.height+=2;var p=this.br,d=this.l,y=this.t,v=this.tl;p.showAutofill(ge.call(this,h)),d.showAutofill(me.call(this,h)),y.showAutofill(be.call(this,h)),v.showAutofill(h)}}}},{key:"hideAutofill",value:function(){var t=this;["br","l","t","tl"].forEach((function(e){t[e].hideAutofill()}))}},{key:"showClipboard",value:function(){var t=this,e=this.data.getClipboardRect();je.call(this,e),["br","l","t","tl"].forEach((function(e){t[e].showClipboard()}))}},{key:"hideClipboard",value:function(){var t=this;["br","l","t","tl"].forEach((function(e){t[e].hideClipboard()}))}}]),t}();function Ae(t){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Re(t){return function(t){if(Array.isArray(t))return Me(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Me(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Me(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Fe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ie(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Ae(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Ae(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Ae(o)?o:String(o)),n)}var i,o}function De(t){t.preventDefault(),t.stopPropagation();var e=this.filterItems;e.length<=0||(this.itemIndex>=0&&e[this.itemIndex].toggle(),this.itemIndex-=1,this.itemIndex<0&&(this.itemIndex=e.length-1),e[this.itemIndex].toggle())}function Ne(t){t.stopPropagation();var e=this.filterItems;e.length<=0||(this.itemIndex>=0&&e[this.itemIndex].toggle(),this.itemIndex+=1,this.itemIndex>e.length-1&&(this.itemIndex=0),e[this.itemIndex].toggle())}function Ge(t){t.preventDefault();var e=this.filterItems;e.length<=0||(t.stopPropagation(),this.itemIndex<0&&(this.itemIndex=0),e[this.itemIndex].el.click(),this.hide())}function Le(t){var e=t.keyCode;switch(t.ctrlKey&&t.stopPropagation(),e){case 37:t.stopPropagation();break;case 38:De.call(this,t);break;case 39:t.stopPropagation();break;case 40:Ne.call(this,t);break;case 13:case 9:Ge.call(this,t);break;default:t.stopPropagation()}}var Be=function(){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"200px";Fe(this,t),this.filterItems=[],this.items=e,this.el=c("div","".concat(ne,"-suggest")).css("width",n).hide(),this.itemClick=r,this.itemIndex=-1}var e,r,n;return e=t,(r=[{key:"setOffset",value:function(t){this.el.cssRemoveKeys("top","bottom").offset(t)}},{key:"hide",value:function(){var t=this.el;this.filterItems=[],this.itemIndex=-1,t.hide(),Zt(this.el.parent())}},{key:"setItems",value:function(t){this.items=t}},{key:"search",value:function(t){var e,r=this,n=this.items;if(/^\s*$/.test(t)||(n=n.filter((function(e){return(e.key||e).startsWith(t.toUpperCase())}))),n=n.map((function(t){var e=t.title;e?"function"==typeof e&&(e=e()):e=t;var n=c("div","".concat(ne,"-item")).child(e).on("click.stop",(function(){r.itemClick(t),r.hide()}));return t.label&&n.child(c("div","label").html(t.label)),n})),this.filterItems=n,!(n.length<=0)){var i=this.el;(e=i.html("")).children.apply(e,Re(n)).show(),Qt(i.parent(),(function(){r.hide()}))}}},{key:"bindInputEvents",value:function(t){var e=this;t.on("keydown",(function(t){return Le.call(e,t)}))}}])&&Ie(e.prototype,r),n&&Ie(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ue(t){return(Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ze(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Ue(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Ue(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Ue(o)?o:String(o)),n)}var i,o}function He(t,e){return(He=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ve(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Ke(t);if(e){var i=Ke(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return We(this,r)}}function We(t,e){if(e&&("object"===Ue(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Ke(t){return(Ke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ye=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&He(t,e)}(o,t);var e,r,n,i=Ve(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,"div","".concat(ne,"-icon"))).iconNameEl=c("div","".concat(ne,"-icon-img ").concat(t)),e.child(e.iconNameEl),e}return e=o,(r=[{key:"setName",value:function(t){this.iconNameEl.className("".concat(ne,"-icon-img ").concat(t))}}])&&ze(e.prototype,r),n&&ze(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(l);function Xe(t){return(Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qe(t){return function(t){if(Array.isArray(t))return $e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return $e(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $e(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $e(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Je(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Xe(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Xe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Xe(o)?o:String(o)),n)}var i,o}function Ze(t,e){t.setMonth(t.getMonth()+e)}function Qe(t,e){var r=new Date(t);return r.setDate(e-t.getDay()+1),r}var tr=function(){function t(e){var r,n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.value=e,this.cvalue=new Date(e),this.headerLeftEl=c("div","calendar-header-left"),this.bodyEl=c("tbody",""),this.buildAll(),this.el=c("div","x-spreadsheet-calendar").children(c("div","calendar-header").children(this.headerLeftEl,c("div","calendar-header-right").children(c("a","calendar-prev").on("click.stop",(function(){return n.prev()})).child(new Ye("chevron-left")),c("a","calendar-next").on("click.stop",(function(){return n.next()})).child(new Ye("chevron-right")))),c("table","calendar-body").children(c("thead","").child((r=c("tr","")).children.apply(r,qe(ft("calendar.weeks").map((function(t){return c("th","cell").child(t)}))))),this.bodyEl)),this.selectChange=function(){}}var e,r,n;return e=t,(r=[{key:"setValue",value:function(t){this.value=t,this.cvalue=new Date(t),this.buildAll()}},{key:"prev",value:function(){Ze(this.value,-1),this.buildAll()}},{key:"next",value:function(){Ze(this.value,1),this.buildAll()}},{key:"buildAll",value:function(){this.buildHeaderLeft(),this.buildBody()}},{key:"buildHeaderLeft",value:function(){var t=this.value;this.headerLeftEl.html("".concat(ft("calendar.months")[t.getMonth()]," ").concat(t.getFullYear()))}},{key:"buildBody",value:function(){var t,e=this,r=this.value,n=this.cvalue,i=this.bodyEl,o=function(t,e,r){for(var n=new Date(t,e,1,23,59,59),i=[[],[],[],[],[],[]],o=0;o<6;o+=1)for(var a=0;a<7;a+=1){var s=Qe(n,7*o+a),l=s.getMonth()!==e,c=s.getMonth()===r.getMonth()&&s.getDate()===r.getDate();i[o][a]={d:s,disabled:l,active:c}}return i}(r.getFullYear(),r.getMonth(),n).map((function(t){var r,n=t.map((function(t){var r="cell";return t.disabled&&(r+=" disabled"),t.active&&(r+=" active"),c("td","").child(c("div",r).on("click.stop",(function(){e.selectChange(t.d)})).child(t.d.getDate().toString()))}));return(r=c("tr","")).children.apply(r,qe(n))}));(t=i.html("")).children.apply(t,qe(o))}}])&&Je(e.prototype,r),n&&Je(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function er(t){return(er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==er(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==er(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===er(o)?o:String(o)),n)}var i,o}var nr=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.calendar=new tr(new Date),this.el=c("div","".concat(ne,"-datepicker")).child(this.calendar.el).hide()}var e,r,n;return e=t,(r=[{key:"setValue",value:function(t){var e=this.calendar;return"string"==typeof t?/^\d{4}-\d{1,2}-\d{1,2}$/.test(t)&&e.setValue(new Date(t.replace(new RegExp("-","g"),"/"))):t instanceof Date&&e.setValue(t),this}},{key:"change",value:function(t){var e=this;this.calendar.selectChange=function(r){t(r),e.hide()}}},{key:"show",value:function(){this.el.show()}},{key:"hide",value:function(){this.el.hide()}}])&&rr(e.prototype,r),n&&rr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ir(t){return(ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function or(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==ir(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ir(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===ir(o)?o:String(o)),n)}var i,o}function ar(t){return function(t){if(Array.isArray(t))return sr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return sr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sr(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function lr(){var t=this.inputText;if(!/^\s*$/.test(t)){var e=this.textlineEl,r=this.textEl,n=this.areaOffset,i=t.split("\n"),o=Math.max.apply(Math,ar(i.map((function(t){return t.length})))),a=e.offset().width/t.length,s=(o+1)*a+5,l=this.viewFn().width-n.left-a,c=i.length;if(s>n.width){var u=s;s>l&&(u=l,c+=parseInt(s/l,10),c+=s%l>0?1:0),r.css("width","".concat(u,"px"))}(c*=this.rowHeight)>n.height&&r.css("height","".concat(c,"px"))}}function cr(t,e){var r=t.target,n=r.value,i=r.selectionEnd,o="".concat(n.slice(0,i)).concat(e).concat(n.slice(i));r.value=o,r.setSelectionRange(i+1,i+1),this.inputText=o,this.textlineEl.html(o),lr.call(this)}function ur(t){var e=t.keyCode,r=t.altKey;13!==e&&9!==e&&t.stopPropagation(),13===e&&r&&(cr.call(this,t,"\n"),t.stopPropagation()),13!==e||r||t.preventDefault()}function fr(t){var e=t.target.value,r=this.suggest,n=this.textlineEl,i=this.validator,o=this.cell;if(null!==o)if("editable"in o&&!0===o.editable||void 0===o.editable){if(this.inputText=e,i)"list"===i.type?r.search(e):r.hide();else{var a=e.lastIndexOf("=");-1!==a?r.search(e.substring(a+1)):r.hide()}n.html(e),lr.call(this),this.change("input",e)}else t.target.value=o.text||"";else{if(this.inputText=e,i)"list"===i.type?r.search(e):r.hide();else{var s=e.lastIndexOf("=");-1!==s?r.search(e.substring(s+1)):r.hide()}n.html(e),lr.call(this),this.change("input",e)}}function hr(t){var e=this.textEl.el;setTimeout((function(){e.focus(),e.setSelectionRange(t,t)}),0)}function pr(t,e){var r=this.textEl,n=this.textlineEl;r.el.blur(),r.val(t),n.html(t),hr.call(this,e)}function dr(t){var e=this.inputText,r=this.validator,n=0;if(r&&"list"===r.type)this.inputText=t,n=this.inputText.length;else{var i=e.lastIndexOf("="),o=e.substring(0,i+1),a=e.substring(i+1);a=-1!==a.indexOf(")")?a.substring(a.indexOf(")")):"",this.inputText="".concat(o+t.key,"("),n=this.inputText.length,this.inputText+=")".concat(a)}pr.call(this,this.inputText,n)}function yr(){this.suggest.setItems(this.formulas)}var vr=function(){function t(e,r,n){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.viewFn=r,this.rowHeight=n,this.formulas=e,this.suggest=new Be(e,(function(t){dr.call(i,t)})),this.datepicker=new nr,this.datepicker.change((function(t){i.setText(function(t){var e=t.getMonth()+1,r=t.getDate();return e<10&&(e="0".concat(e)),r<10&&(r="0".concat(r)),"".concat(t.getFullYear(),"-").concat(e,"-").concat(r)}(t)),i.clear()})),this.areaEl=c("div","".concat(ne,"-editor-area")).children(this.textEl=c("textarea","").on("input",(function(t){return fr.call(i,t)})).on("paste.stop",(function(){})).on("keydown",(function(t){return ur.call(i,t)})),this.textlineEl=c("div","textline"),this.suggest.el,this.datepicker.el).on("mousemove.stop",(function(){})).on("mousedown.stop",(function(){})),this.el=c("div","".concat(ne,"-editor")).child(this.areaEl).hide(),this.suggest.bindInputEvents(this.textEl),this.areaOffset=null,this.freeze={w:0,h:0},this.cell=null,this.inputText="",this.change=function(){}}var e,r,n;return e=t,(r=[{key:"setFreezeLengths",value:function(t,e){this.freeze.w=t,this.freeze.h=e}},{key:"clear",value:function(){""!==this.inputText&&this.change("finished",this.inputText),this.cell=null,this.areaOffset=null,this.inputText="",this.el.hide(),this.textEl.val(""),this.textlineEl.html(""),yr.call(this),this.datepicker.hide()}},{key:"setOffset",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top",r=this.textEl,n=this.areaEl,i=this.suggest,o=this.freeze,a=this.el;if(t){this.areaOffset=t;var s=t.left,l=t.top,c=t.width,u=t.height,f=t.l,h=t.t,p={left:0,top:0};o.w>f&&o.h>h||(o.w<f&&o.h<h?(p.left=o.w,p.top=o.h):o.w>f?p.top=o.h:o.h>h&&(p.left=o.w)),a.offset(p),n.offset({left:s-p.left-.8,top:l-p.top-.8}),r.offset({width:c-9+.8,height:u-3+.8});var d={left:0};d[e]=u,i.setOffset(d),i.hide()}}},{key:"setCell",value:function(t,e){if(!t||!1!==t.editable){var r=this.el,n=this.datepicker,i=this.suggest;r.show(),this.cell=t;var o=t&&t.text||"";if(this.setText(o),this.validator=e,e){var a=e.type;"date"===a&&(n.show(),/^\s*$/.test(o)||n.setValue(o)),"list"===a&&(i.setItems(e.values()),i.search(""))}}}},{key:"setText",value:function(t){this.inputText=t,pr.call(this,t,t.length),lr.call(this)}}])&&or(e.prototype,r),n&&or(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function gr(t){return(gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function br(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==gr(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==gr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===gr(o)?o:String(o)),n)}var i,o}function mr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wr(t,e){return(wr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function _r(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Or(t);if(e){var i=Or(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Sr(this,r)}}function Sr(t,e){if(e&&("object"===gr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Or(t){return(Or=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var xr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wr(t,e)}(o,t);var e,r,n,i=_r(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return mr(this,o),(e=i.call(this,"div","".concat(ne,"-button ").concat(r))).child(ft("button.".concat(t))),e}return e=o,r&&br(e.prototype,r),n&&br(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(l);function Pr(t){return function(t){if(Array.isArray(t))return Tr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Cr(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||Cr(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cr(t,e){if(t){if("string"==typeof t)return Tr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Tr(t,e):void 0}}function Tr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function jr(t){return(jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Er(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ar(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==jr(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==jr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===jr(o)?o:String(o)),n)}var i,o}function Rr(t,e,r){return e&&Ar(t.prototype,e),r&&Ar(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Mr(){return window.devicePixelRatio||1}function Fr(){return Mr()-.5}function Ir(t){return parseInt(t*Mr(),10)}function Dr(t){var e=Ir(t);return e>0?e-.5:.5}var Nr=function(){function t(e,r,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;Er(this,t),this.x=e,this.y=r,this.width=n,this.height=i,this.padding=o,this.bgcolor="#ffffff",this.borderTop=null,this.borderRight=null,this.borderBottom=null,this.borderLeft=null}return Rr(t,[{key:"setBorders",value:function(t){var e=t.top,r=t.bottom,n=t.left,i=t.right;e&&(this.borderTop=e),i&&(this.borderRight=i),r&&(this.borderBottom=r),n&&(this.borderLeft=n)}},{key:"innerWidth",value:function(){return this.width-2*this.padding-2}},{key:"innerHeight",value:function(){return this.height-2*this.padding-2}},{key:"textx",value:function(t){var e=this.width,r=this.padding,n=this.x;return"left"===t?n+=r:"center"===t?n+=e/2:"right"===t&&(n+=e-r),n}},{key:"texty",value:function(t,e){var r=this.height,n=this.padding,i=this.y;return"top"===t?i+=n:"middle"===t?i+=r/2-e/2:"bottom"===t&&(i+=r-n-e),i}},{key:"topxys",value:function(){var t=this.x,e=this.y;return[[t,e],[t+this.width,e]]}},{key:"rightxys",value:function(){var t=this.x,e=this.y,r=this.width;return[[t+r,e],[t+r,e+this.height]]}},{key:"bottomxys",value:function(){var t=this.x,e=this.y,r=this.width,n=this.height;return[[t,e+n],[t+r,e+n]]}},{key:"leftxys",value:function(){var t=this.x,e=this.y;return[[t,e],[t,e+this.height]]}}]),t}();function Gr(t,e,r,n,i,o,a){var s={x:0,y:0};"underline"===t?s.y="bottom"===i?0:"top"===i?-(o+2):-o/2:"strike"===t&&("bottom"===i?s.y=o/2:"top"===i&&(s.y=-(o/2+2))),"center"===n?s.x=a/2:"right"===n&&(s.x=a),this.line([e-s.x,r-s.y],[e-s.x+a,r-s.y])}var Lr=function(){function t(e,r,n){Er(this,t),this.el=e,this.ctx=e.getContext("2d"),this.resize(r,n),this.ctx.scale(Mr(),Mr())}return Rr(t,[{key:"resize",value:function(t,e){this.el.style.width="".concat(t,"px"),this.el.style.height="".concat(e,"px"),this.el.width=Ir(t),this.el.height=Ir(e)}},{key:"clear",value:function(){var t=this.el,e=t.width,r=t.height;return this.ctx.clearRect(0,0,e,r),this}},{key:"attr",value:function(t){return Object.assign(this.ctx,t),this}},{key:"save",value:function(){return this.ctx.save(),this.ctx.beginPath(),this}},{key:"restore",value:function(){return this.ctx.restore(),this}},{key:"beginPath",value:function(){return this.ctx.beginPath(),this}},{key:"translate",value:function(t,e){return this.ctx.translate(Ir(t),Ir(e)),this}},{key:"scale",value:function(t,e){return this.ctx.scale(t,e),this}},{key:"clearRect",value:function(t,e,r,n){return this.ctx.clearRect(t,e,r,n),this}},{key:"fillRect",value:function(t,e,r,n){return this.ctx.fillRect(Ir(t)-.5,Ir(e)-.5,Ir(r),Ir(n)),this}},{key:"fillText",value:function(t,e,r){return this.ctx.fillText(t,Ir(e),Ir(r)),this}},{key:"text",value:function(t,e){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=this.ctx,a=n.align,s=n.valign,l=n.font,c=n.color,u=n.strike,f=n.underline,h=e.textx(a);o.save(),o.beginPath(),this.attr({textAlign:a,textBaseline:s,font:"".concat(l.italic?"italic":""," ").concat(l.bold?"bold":""," ").concat(Ir(l.size),"px ").concat(l.name),fillStyle:c,strokeStyle:c});var p="".concat(t).split("\n"),d=e.innerWidth(),y=[];p.forEach((function(t){var e=o.measureText(t).width;if(i&&e>Ir(d)){for(var r={w:0,len:0,start:0},n=0;n<t.length;n+=1)r.w>=Ir(d)&&(y.push(t.substr(r.start,r.len)),r={w:0,len:0,start:n}),r.len+=1,r.w+=o.measureText(t[n]).width+1;r.len>0&&y.push(t.substr(r.start,r.len))}else y.push(t)}));var v=(y.length-1)*(l.size+2),g=e.texty(s,v);return y.forEach((function(t){var e=o.measureText(t).width;r.fillText(t,h,g),u&&Gr.call(r,"strike",h,g,a,s,l.size,e),f&&Gr.call(r,"underline",h,g,a,s,l.size,e),g+=l.size+2})),o.restore(),this}},{key:"border",value:function(t,e){var r=this.ctx;return r.lineWidth=Fr,r.strokeStyle=e,"medium"===t?r.lineWidth=Ir(2)-.5:"thick"===t?r.lineWidth=Ir(3):"dashed"===t?r.setLineDash([Ir(3),Ir(2)]):"dotted"===t?r.setLineDash([Ir(1),Ir(1)]):"double"===t&&r.setLineDash([Ir(2),0]),this}},{key:"line",value:function(){var t=this.ctx;if(arguments.length>1){t.beginPath();var e=arguments.length<=0?void 0:arguments[0],r=kr(e,2),n=r[0],i=r[1];t.moveTo(Dr(n),Dr(i));for(var o=1;o<arguments.length;o+=1){var a=o<0||arguments.length<=o?void 0:arguments[o],s=kr(a,2),l=s[0],c=s[1];t.lineTo(Dr(l),Dr(c))}t.stroke()}return this}},{key:"strokeBorders",value:function(t){var e=this.ctx;e.save();var r=t.borderTop,n=t.borderRight,i=t.borderBottom,o=t.borderLeft;r&&(this.border.apply(this,Pr(r)),this.line.apply(this,Pr(t.topxys()))),n&&(this.border.apply(this,Pr(n)),this.line.apply(this,Pr(t.rightxys()))),i&&(this.border.apply(this,Pr(i)),this.line.apply(this,Pr(t.bottomxys()))),o&&(this.border.apply(this,Pr(o)),this.line.apply(this,Pr(t.leftxys()))),e.restore()}},{key:"dropdown",value:function(t){var e=this.ctx,r=t.x,n=t.y,i=r+t.width-15,o=n+t.height-15;e.save(),e.beginPath(),e.moveTo(Ir(i),Ir(o)),e.lineTo(Ir(i+8),Ir(o)),e.lineTo(Ir(i+4),Ir(o+6)),e.closePath(),e.fillStyle="rgba(0, 0, 0, .45)",e.fill(),e.restore()}},{key:"error",value:function(t){var e=this.ctx,r=t.x,n=t.y,i=r+t.width-1;e.save(),e.beginPath(),e.moveTo(Ir(i-8),Ir(n-1)),e.lineTo(Ir(i),Ir(n-1)),e.lineTo(Ir(i),Ir(n+8)),e.closePath(),e.fillStyle="rgba(255, 0, 0, .65)",e.fill(),e.restore()}},{key:"frozen",value:function(t){var e=this.ctx,r=t.x,n=t.y,i=r+t.width-1;e.save(),e.beginPath(),e.moveTo(Ir(i-8),Ir(n-1)),e.lineTo(Ir(i),Ir(n-1)),e.lineTo(Ir(i),Ir(n+8)),e.closePath(),e.fillStyle="rgba(0, 255, 0, .85)",e.fill(),e.restore()}},{key:"rect",value:function(t,e){var r=this.ctx,n=t.x,i=t.y,o=t.width,a=t.height,s=t.bgcolor;r.save(),r.beginPath(),r.fillStyle=s||"#fff",r.rect(Dr(n+1),Dr(i+1),Ir(o-2),Ir(a-2)),r.clip(),r.fill(),e(),r.restore()}}]),t}(),Br=[{key:"Arial",title:"Arial"},{key:"Helvetica",title:"Helvetica"},{key:"Source Sans Pro",title:"Source Sans Pro"},{key:"Comic Sans MS",title:"Comic Sans MS"},{key:"Courier New",title:"Courier New"},{key:"Verdana",title:"Verdana"},{key:"Lato",title:"Lato"}],Ur=[{pt:7.5,px:10},{pt:8,px:11},{pt:9,px:12},{pt:10,px:13},{pt:10.5,px:14},{pt:11,px:15},{pt:12,px:16},{pt:14,px:18.7},{pt:15,px:20},{pt:16,px:21.3},{pt:18,px:24},{pt:22,px:29.3},{pt:24,px:32},{pt:26,px:34.7},{pt:36,px:48},{pt:42,px:56}];function zr(t){for(var e=0;e<Ur.length;e+=1){var r=Ur[e];if(r.pt===t)return r.px}return t}function Hr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Vr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vr(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Wr=function(t){for(var e=[],r=[],n=[],i=0,o="",a=1,s="",l=0;l<t.length;l+=1){var c=t.charAt(l);if(" "!==c){if(c>="a"&&c<="z")n.push(c.toUpperCase());else if(c>="0"&&c<="9"||c>="A"&&c<="Z"||"."===c)n.push(c);else if('"'===c){for(l+=1;'"'!==t.charAt(l);)n.push(t.charAt(l)),l+=1;r.push('"'.concat(n.join(""))),n=[]}else if("-"===c&&/[+\-*/,(]/.test(s))n.push(c);else{if("("!==c&&n.length>0&&r.push(n.join("")),")"===c){var u=e.pop();if(2===i)try{for(var f=Hr(y(r.pop()),2),h=f[0],p=f[1],d=Hr(y(r.pop()),2),g=d[0],b=d[1],m=0,w=g;w<=h;w+=1)for(var _=b;_<=p;_+=1)r.push(v(w,_)),m+=1;r.push([u,m])}catch(t){}else if(1===i||3===i)3===i&&r.push(o),r.push([u,a]),a=1;else for(;"("!==u&&(r.push(u),!(e.length<=0));)u=e.pop();i=0}else if("="===c||">"===c||"<"===c){var S=t.charAt(l+1);o=c,"="!==S&&"-"!==S||(o+=S,l+=1),i=3}else if(":"===c)i=2;else if(","===c)3===i&&r.push(o),i=1,a+=1;else if("("===c&&n.length>0)e.push(n.join(""));else{if(e.length>0&&("+"===c||"-"===c)){var O=e[e.length-1];if("("!==O&&r.push(e.pop()),"*"===O||"/"===O)for(;e.length>0&&"("!==(O=e[e.length-1]);)r.push(e.pop())}else if(e.length>0){var x=e[e.length-1];"*"!==x&&"/"!==x||r.push(e.pop())}e.push(c)}n=[]}s=c}}for(n.length>0&&r.push(n.join(""));e.length>0;)r.push(e.pop());return r},Kr=function(t,e){var r=Hr(t,1)[0],n=t;if('"'===r)return t.substring(1);var i=1;if("-"===r&&(n=t.substring(1),i=-1),n[0]>="0"&&n[0]<="9")return i*Number(n);var o=Hr(y(n),2);return i*e(o[0],o[1])},Yr=function(t,e,r,n){for(var i=[],o=0;o<t.length;o+=1){var a=t[o],s=a[0];if("+"===a){var l=i.pop();i.push($("+",i.pop(),l))}else if("-"===a)if(1===i.length){var c=i.pop();i.push($("*",c,-1))}else{var u=i.pop();i.push($("-",i.pop(),u))}else if("*"===a)i.push($("*",i.pop(),i.pop()));else if("/"===a){var f=i.pop();i.push($("/",i.pop(),f))}else if("="===s||">"===s||"<"===s){var h=i.pop();Number.isNaN(h)||(h=Number(h));var p=i.pop();Number.isNaN(p)||(p=Number(p));var d=!1;"="===s?d=p===h:">"===a?d=p>h:">="===a?d=p>=h:"<"===a?d=p<h:"<="===a&&(d=p<=h),i.push(d)}else if(Array.isArray(a)){for(var y=Hr(a,2),v=y[0],g=y[1],b=[],m=0;m<g;m+=1)b.push(i.pop());i.push(e[v].render(b.reverse()))}else{if(n.includes(a))return 0;(s>="a"&&s<="z"||s>="A"&&s<="Z")&&n.push(a),i.push(Kr(a,r)),n.pop()}}return i[0]},Xr=function t(e,r,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if("="===e[0]){var o=Wr(e.substring(1));return o.length<=0?e:Yr(o,r,(function(e,o){return t(n(e,o),r,n,i)}),i)}return e};function qr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||Jr(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $r(t){return function(t){if(Array.isArray(t))return Zr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Jr(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jr(t,e){if(t){if("string"==typeof t)return Zr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Zr(t,e):void 0}}function Zr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Qr=[{key:"SUM",title:ht("formula.sum"),render:function(t){return t.reduce((function(t,e){return $("+",t,e)}),0)}},{key:"AVERAGE",title:ht("formula.average"),render:function(t){return t.reduce((function(t,e){return Number(t)+Number(e)}),0)/t.length}},{key:"MAX",title:ht("formula.max"),render:function(t){return Math.max.apply(Math,$r(t.map((function(t){return Number(t)}))))}},{key:"MIN",title:ht("formula.min"),render:function(t){return Math.min.apply(Math,$r(t.map((function(t){return Number(t)}))))}},{key:"IF",title:ht("formula._if"),render:function(t){var e=qr(t,3),r=e[0],n=e[1],i=e[2];return r?n:i}},{key:"AND",title:ht("formula.and"),render:function(t){return t.every((function(t){return t}))}},{key:"OR",title:ht("formula.or"),render:function(t){return t.some((function(t){return t}))}},{key:"CONCAT",title:ht("formula.concat"),render:function(t){return t.join("")}}],tn=Qr,en={};function rn(t){return function(t){if(Array.isArray(t))return an(t)}(t)||sn(t)||on(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nn(t){return function(t){if(Array.isArray(t))return t}(t)||sn(t)||on(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function on(t,e){if(t){if("string"==typeof t)return an(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?an(t,e):void 0}}function an(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function sn(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}Qr.forEach((function(t){en[t.key]=t}));var ln=function(t){return t},cn=function(t){if(/^(-?\d*.?\d*)$/.test(t)){var e=nn(Number(t).toFixed(2).toString().split("\\.")),r=e[0],n=e.slice(1);return[r.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")].concat(rn(n))}return t},un=[{key:"normal",title:ht("format.normal"),type:"string",render:ln},{key:"text",title:ht("format.text"),type:"string",render:ln},{key:"number",title:ht("format.number"),type:"number",label:"1,000.12",render:cn},{key:"percent",title:ht("format.percent"),type:"number",label:"10.12%",render:function(t){return"".concat(t,"%")}},{key:"rmb",title:ht("format.rmb"),type:"number",label:"10.00",render:function(t){return"".concat(cn(t))}},{key:"usd",title:ht("format.usd"),type:"number",label:"$10.00",render:function(t){return"$".concat(cn(t))}},{key:"eur",title:ht("format.eur"),type:"number",label:"10.00",render:function(t){return"".concat(cn(t))}},{key:"date",title:ht("format.date"),type:"date",label:"26/09/2008",render:ln},{key:"time",title:ht("format.time"),type:"date",label:"15:59:00",render:ln},{key:"datetime",title:ht("format.datetime"),type:"date",label:"26/09/2008 15:59:00",render:ln},{key:"duration",title:ht("format.duration"),type:"date",label:"24:01:00",render:ln}],fn={};un.forEach((function(t){fn[t.key]=t}));function hn(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=t.cellRect(e,r),o=i.left,a=i.top,s=i.width,l=i.height;return new Nr(o,a+n,s,l,5)}function pn(t,e,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=e.sortedRowMap,a=e.rows,s=e.cols;if(!a.isHide(r)&&!s.isHide(n)){var l=r;o.has(r)&&(l=o.get(r));var c=e.getCell(l,n);if(null!==c){var u=!1;"editable"in c&&!1===c.editable&&(u=!0);var f=e.getCellStyleOrDefault(l,n),h=hn(e,r,n,i);h.bgcolor=f.bgcolor,void 0!==f.border&&(h.setBorders(f.border),t.strokeBorders(h)),t.rect(h,(function(){var i="";i=e.settings.evalPaused?c.text||"":Xr(c.text||"",en,(function(t,r){return e.getCellTextOrDefault(r,t)})),f.format&&(i=fn[f.format].render(i));var o=Object.assign({},f.font);o.size=zr(o.size),t.text(i,h,{align:f.align,valign:f.valign,font:o,color:f.color,strike:f.strike,underline:f.underline},f.textwrap),e.validations.getError(r,n)&&t.error(h),u&&t.frozen(h)}))}}}function dn(t){return(dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yn(t){return function(t){if(Array.isArray(t))return vn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return vn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vn(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function gn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==dn(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==dn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===dn(o)?o:String(o)),n)}var i,o}var bn=[["A3",11.69,16.54],["A4",8.27,11.69],["A5",5.83,8.27],["B4",9.84,13.9],["B5",6.93,9.84]],mn=["landscape","portrait"];function wn(t){return parseInt(96*t,10)}function _n(t){"cancel"===t?this.el.hide():this.toPrint()}function Sn(t){var e=this.paper,r=t.target.value,n=bn[r];e.w=wn(n[1]),e.h=wn(n[2]),this.preview()}function On(t){var e=this.paper,r=t.target.value,n=mn[r];e.orientation=n,this.preview()}var xn=function(){function t(e){var r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.paper={w:wn(bn[0][1]),h:wn(bn[0][2]),padding:50,orientation:mn[0],get width(){return"landscape"===this.orientation?this.h:this.w},get height(){return"landscape"===this.orientation?this.w:this.h}},this.data=e,this.el=c("div","".concat(ne,"-print")).children(c("div","".concat(ne,"-print-bar")).children(c("div","-title").child("Print settings"),c("div","-right").children(c("div","".concat(ne,"-buttons")).children(new xr("cancel").on("click",_n.bind(this,"cancel")),new xr("next","primary").on("click",_n.bind(this,"next"))))),c("div","".concat(ne,"-print-content")).children(this.contentEl=c("div","-content"),c("div","-sider").child(c("form","").children(c("fieldset","").children(c("label","").child("".concat(ft("print.size"))),(r=c("select","")).children.apply(r,yn(bn.map((function(t,e){return c("option","").attr("value",e).child("".concat(t[0]," ( ").concat(t[1],"''x").concat(t[2],"'' )"))})))).on("change",Sn.bind(this))),c("fieldset","").children(c("label","").child("".concat(ft("print.orientation"))),(n=c("select","")).children.apply(n,yn(mn.map((function(t,e){return c("option","").attr("value",e).child("".concat(ft("print.orientations")[e]))})))).on("change",On.bind(this))))))).hide()}var e,r,n;return e=t,(r=[{key:"resetData",value:function(t){this.data=t}},{key:"preview",value:function(){var t=this,e=this.data,r=this.paper,n=r.width,i=r.height,o=r.padding,a=n-2*o,s=i-2*o,l=e.contentRange(),u=parseInt(l.h/s,10)+1,f=a/l.w,h=o,p=o;f>1&&(h+=(a-l.w)/2);var d=0,y=0;this.contentEl.html(""),this.canvases=[];for(var v={sri:0,sci:0,eri:0,eci:0},g=function(){var r=0,o=0,a=c("div","".concat(ne,"-canvas-card")),u=c("canvas","".concat(ne,"-canvas"));t.canvases.push(u.el);var g=new Lr(u.el,n,i);for(g.save(),g.translate(h,p),f<1&&g.scale(f,f);d<=l.eri;d+=1){var b=e.rows.getHeight(d);if(!((r+=b)<s)){o=-(r-b);break}for(var m=0;m<=l.eci;m+=1)pn(g,e,d,m,y),v.eci=m}v.eri=d,g.restore(),g.save(),g.translate(h,p),f<1&&g.scale(f,f);var w=y;e.eachMergesInView(v,(function(t){var r=t.sri,n=t.sci;pn(g,e,r,n,w)})),g.restore(),v.sri=v.eri,v.sci=v.eci,y+=o,t.contentEl.child(c("div","".concat(ne,"-canvas-card-wraper")).child(a.child(u)))},b=0;b<u;b+=1)g();this.el.show()}},{key:"toPrint",value:function(){this.el.hide();var t=this.paper,e=c("iframe","").hide().el;window.document.body.appendChild(e);var r=e.contentWindow,n=r.document,i=document.createElement("style");i.innerHTML="\n      @page { size: ".concat(t.width,"px ").concat(t.height,"px; };\n      canvas {\n        page-break-before: auto;        \n        page-break-after: always;\n        image-rendering: pixelated;\n      };\n    "),n.head.appendChild(i),this.canvases.forEach((function(t){var e=t.cloneNode(!1);e.getContext("2d").drawImage(t,0,0),n.body.appendChild(e)})),r.print()}}])&&gn(e.prototype,r),n&&gn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Pn(t){return(Pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kn(t){return function(t){if(Array.isArray(t))return Cn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Cn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Cn(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Tn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Pn(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Pn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Pn(o)?o:String(o)),n)}var i,o}var En=[{key:"copy",title:ht("contextmenu.copy"),label:"Ctrl+C"},{key:"cut",title:ht("contextmenu.cut"),label:"Ctrl+X"},{key:"paste",title:ht("contextmenu.paste"),label:"Ctrl+V"},{key:"paste-value",title:ht("contextmenu.pasteValue"),label:"Ctrl+Shift+V"},{key:"paste-format",title:ht("contextmenu.pasteFormat"),label:"Ctrl+Alt+V"},{key:"divider"},{key:"insert-row",title:ht("contextmenu.insertRow")},{key:"insert-column",title:ht("contextmenu.insertColumn")},{key:"divider"},{key:"delete-row",title:ht("contextmenu.deleteRow")},{key:"delete-column",title:ht("contextmenu.deleteColumn")},{key:"delete-cell-text",title:ht("contextmenu.deleteCellText")},{key:"hide",title:ht("contextmenu.hide")},{key:"divider"},{key:"validation",title:ht("contextmenu.validation")},{key:"divider"},{key:"cell-printable",title:ht("contextmenu.cellprintable")},{key:"cell-non-printable",title:ht("contextmenu.cellnonprintable")},{key:"divider"},{key:"cell-editable",title:ht("contextmenu.celleditable")},{key:"cell-non-editable",title:ht("contextmenu.cellnoneditable")}];function An(t){var e=this;return"divider"===t.key?c("div","".concat(ne,"-item divider")):c("div","".concat(ne,"-item")).on("click",(function(){e.itemClick(t.key),e.hide()})).children(t.title(),c("div","label").child(t.label||""))}function Rn(){var t=this;return En.map((function(e){return An.call(t,e)}))}var Mn=function(){function t(e){var r,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Tn(this,t),this.menuItems=Rn.call(this),this.el=(r=c("div","".concat(ne,"-contextmenu"))).children.apply(r,kn(this.menuItems)).hide(),this.viewFn=e,this.itemClick=function(){},this.isHide=n,this.setMode("range")}var e,r,n;return e=t,(r=[{key:"setMode",value:function(t){var e=this.menuItems[12];"row-col"===t?e.show():e.hide()}},{key:"hide",value:function(){var t=this.el;t.hide(),Zt(t)}},{key:"setPosition",value:function(t,e){if(!this.isHide){var r=this.el,n=r.show().offset().width,i=this.viewFn(),o=i.height/2,a=t;i.width-t<=n&&(a-=n),r.css("left","".concat(a,"px")),e>o?r.css("bottom","".concat(i.height-e,"px")).css("max-height","".concat(e,"px")).css("top","auto"):r.css("top","".concat(e,"px")).css("max-height","".concat(i.height-e,"px")).css("bottom","auto"),Qt(r)}}}])&&jn(e.prototype,r),n&&jn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Fn=r(6),In=r.n(Fn);function Dn(t){return(Dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Dn(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Dn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Dn(o)?o:String(o)),n)}var i,o}function Gn(){return(Gn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=Ln(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function Ln(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Vn(t)););return t}function Bn(t,e){return(Bn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Un(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Vn(t);if(e){var i=Vn(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return zn(this,r)}}function zn(t,e){if(e&&("object"===Dn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Hn(t)}function Hn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Vn(t){return(Vn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Wn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Bn(t,e)}(o,t);var e,r,n,i=Un(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).clones=[],e.clones.push(Hn(e)),e.plain="",e}return e=o,(r=[{key:"clone",value:function(){var t=Gn(Vn(o.prototype),"clone",this).call(this);return t.clones=this.clones,this.clones.push(t),t}},{key:"func1",value:function(){console.log("call func1")}}])&&Nn(e.prototype,r),n&&Nn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(In.a.Group);function Kn(t){return function(t){if(Array.isArray(t))return qn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Xn(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||Xn(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xn(t,e){if(t){if("string"==typeof t)return qn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?qn(t,e):void 0}}function qn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function $n(t,e){return($n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Jn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=ri(t);if(e){var i=ri(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Zn(this,r)}}function Zn(t,e){if(e&&("object"===ni(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Qn(t)}function Qn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ti(){return(ti="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=ei(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function ei(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ri(t)););return t}function ri(t){return(ri=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ni(t){return(ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ii(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==ni(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ni(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===ni(o)?o:String(o)),n)}var i,o}function ai(t,e,r){return e&&oi(t.prototype,e),r&&oi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function si(){return.5}function li(t){return parseInt(1*t,10)}function ci(t){var e=li(t);return e>0?e-.5:.5}var ui=function(){function t(e,r,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;ii(this,t),this.x=e,this.y=r,this.width=n,this.height=i,this.padding=o,this.bgcolor="#ffffff",this.borderTop=null,this.borderRight=null,this.borderBottom=null,this.borderLeft=null}return ai(t,[{key:"setBorders",value:function(t){var e=t.top,r=t.bottom,n=t.left,i=t.right;e&&(this.borderTop=e),i&&(this.borderRight=i),r&&(this.borderBottom=r),n&&(this.borderLeft=n)}},{key:"innerWidth",value:function(){return this.width-2*this.padding}},{key:"innerHeight",value:function(){return this.height-2*this.padding}},{key:"textx",value:function(t){var e=this.width,r=this.padding,n=this.x;return"left"===t?n+=r:"center"===t?n+=e/2:"right"===t&&(n+=e-r),n}},{key:"texty",value:function(t,e,r){var n=this.height,i=this.padding,o=this.y;return"top"===t?o+=i:"middle"===t?o=o+n/2-r:"bottom"===t&&(o+=n-2*r-i),o}},{key:"topxys",value:function(){var t=this.x,e=this.y;return[[t,e],[t+this.width,e]]}},{key:"rightxys",value:function(){var t=this.x,e=this.y,r=this.width;return[[t+r,e],[t+r,e+this.height]]}},{key:"bottomxys",value:function(){var t=this.x,e=this.y,r=this.width,n=this.height;return[[t,e+n],[t+r,e+n]]}},{key:"leftxys",value:function(){var t=this.x,e=this.y;return[[t,e],[t,e+this.height]]}}]),t}();function fi(t,e,r,n,i,o,a){var s={x:0,y:0};"underline"===t?s.y="bottom"===i?0:"top"===i?-(o+2):-o/2:"strike"===t&&("bottom"===i?s.y=o/2:"top"===i&&(s.y=-(o/2+2))),"center"===n?s.x=a/2:"right"===n&&(s.x=a),this.line([e-s.x,r-s.y],[e-s.x+a,r-s.y])}var hi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$n(t,e)}(r,t);var e=Jn(r);function r(t,n,i){var o,a;return ii(this,r),(a=e.call(this)).el=t,a.ctx=ti((o=Qn(a),ri(r.prototype)),"getContext",o).call(o),a.resize(n,i),a.scale(1,1),a.ctx.scale(1,1),a}return ai(r,[{key:"resize",value:function(t,e){ti(ri(r.prototype),"size",this).call(this,{width:t,height:e}),this.el.style.width="".concat(t,"px"),this.el.style.height="".concat(e,"px"),this.el.width=li(t),this.el.height=li(e)}},{key:"clear",value:function(){var t=this.el,e=t.width,n=t.height;return this.ctx.clearRect(0,0,e,n),ti(ri(r.prototype),"clear",this).call(this),this}},{key:"attr",value:function(t){return Object.assign(this.ctx,t),this}},{key:"save",value:function(){return this.ctx.save(),this.ctx.beginPath(),this}},{key:"restore",value:function(){return this.ctx.restore(),this}},{key:"beginPath",value:function(){return this.ctx.beginPath(),this}},{key:"translate",value:function(t,e){return this.ctx.translate(li(t),li(e)),this}},{key:"clearRect",value:function(t,e,r,n){return this.ctx.clearRect(t,e,r,n),this}},{key:"fillRect",value:function(t,e,r,n){return this.ctx.fillRect(li(t)-.5,li(e)-.5,li(r),li(n)),this}},{key:"fillText",value:function(t,e,r){return this.ctx.fillText(t,li(e),li(r)),this}},{key:"text",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=this.ctx,o=r.align,a=r.valign,s=r.font,l=r.color,c=r.strike,u=r.underline,f=e.textx(o);i.save(),i.beginPath(),this.attr({textAlign:o,textBaseline:a,font:"".concat(s.italic?"italic":""," ").concat(s.bold?"bold":""," ").concat(li(s.size),"px ").concat(s.name),fillStyle:l,strokeStyle:l});var h=i.measureText(t).width,p=0;if(n){var d=Math.ceil(h/e.innerWidth());p=(d-1)*s.size/2}for(var y=e.texty(a,s.size,p),v={len:0,start:0},g=0;g<t.length;g+=1){var b=g-v.start;"\n"==t.substr(v.start+b,1)?(this.fillText(t.substring(v.start,g),f,y),c&&fi.call(this,"strike",f,y,o,a,s.size,v.len),u&&fi.call(this,"underline",f,y,o,a,s.size,v.len),y+=s.size+2,v.len=0,g++,v.start=g):v.len+=i.measureText(t[g]).width}return v.len>0&&(this.fillText(t.substring(v.start),f,y),c&&fi.call(this,"strike",f,y,o,a,s.size,v.len),u&&fi.call(this,"underline",f,y,o,a,s.size,v.len)),i.restore(),this}},{key:"border",value:function(t,e){var r=this.ctx;return r.lineWidth=si,r.strokeStyle=e,"medium"===t?r.lineWidth=li(2)-.5:"thick"===t?r.lineWidth=li(3):"dashed"===t?r.setLineDash([li(3),li(2)]):"dotted"===t?r.setLineDash([li(1),li(1)]):"double"===t&&r.setLineDash([li(2),0]),this}},{key:"line",value:function(){var t=this.ctx;if(arguments.length>1){var e=arguments.length<=0?void 0:arguments[0],r=Yn(e,2),n=r[0],i=r[1];t.moveTo(ci(n),ci(i));for(var o=1;o<arguments.length;o+=1){var a=o<0||arguments.length<=o?void 0:arguments[o],s=Yn(a,2),l=s[0],c=s[1];t.lineTo(ci(l),ci(c))}t.stroke()}return this}},{key:"strokeBorders",value:function(t){var e=this.ctx;e.save(),e.beginPath();var r=t.borderTop,n=t.borderRight,i=t.borderBottom,o=t.borderLeft;r&&(this.border.apply(this,Kn(r)),this.line.apply(this,Kn(t.topxys()))),n&&(this.border.apply(this,Kn(n)),this.line.apply(this,Kn(t.rightxys()))),i&&(this.border.apply(this,Kn(i)),this.line.apply(this,Kn(t.bottomxys()))),o&&(this.border.apply(this,Kn(o)),this.line.apply(this,Kn(t.leftxys()))),e.restore()}},{key:"dropdown",value:function(t){var e=this.ctx,r=t.x,n=t.y,i=r+t.width-15,o=n+t.height-15;e.save(),e.beginPath(),e.moveTo(li(i),li(o)),e.lineTo(li(i+8),li(o)),e.lineTo(li(i+4),li(o+6)),e.closePath(),e.fillStyle="rgba(0, 0, 0, .45)",e.fill(),e.restore()}},{key:"error",value:function(t){var e=this.ctx,r=t.x,n=t.y,i=r+t.width-1;e.save(),e.beginPath(),e.moveTo(li(i-8),li(n-1)),e.lineTo(li(i),li(n-1)),e.lineTo(li(i),li(n+8)),e.closePath(),e.fillStyle="rgba(255, 0, 0, .65)",e.fill(),e.restore()}},{key:"rect",value:function(t,e){var r=this.ctx,n=t.x,i=t.y,o=t.width,a=t.height,s=t.bgcolor;r.save(),r.beginPath(),r.fillStyle=s||"#fff",r.rect(ci(n+1),ci(i+1),li(o-2),li(a-2)),r.clip(),r.fill(),e(),r.restore()}}]),r}(In.a.Layer);function pi(t){return(pi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function di(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return yi(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yi(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yi(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function vi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==pi(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==pi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===pi(o)?o:String(o)),n)}var i,o}function gi(t,e){return(gi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function bi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Oi(t);if(e){var i=Oi(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return mi(this,r)}}function mi(t,e){if(e&&("object"===pi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return wi(t)}function wi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _i(){return(_i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=Si(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function Si(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Oi(t)););return t}function Oi(t){return(Oi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var xi={fillStyle:"#f4f5f8"},Pi={fillStyle:"#fff",lineWidth:si,strokeStyle:"#e6e6e6"};function ki(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=t.cellRect(e,r),o=i.left,a=i.top,s=i.width,l=i.height;return new ui(o,a+n,s,l,5)}function Ci(t,e,r,n,i,o){e.func1(e),t.some((function(t){if(t.shape===e){t.shape.children[0].width(r),t.shape.children[0].height(n),t.data.rindex=i,t.data.cindex=o;var a=p(o)+String(i+1);return t.shape.children[1].text(t.data.name+" / "+a),!0}}))}function Ti(t,e,r,n){var i,o,a,s,l=this.data,c=(this.layer,this.layer_cell,this.layer_TOP_LEFT,this.layer_cell_TOP_LEFT),u=(this.layer_TOP_RIGHT,this.layer_cell_TOP_RIGHT),f=(this.layer_BOTTOM_LEFT,this.layer_cell_BOTTOM_LEFT),h=(this.layer_BOTTOM_RIGHT,this.layer_cell_BOTTOM_RIGHT),p=l.cellRect(r,n),d=(p.left,p.top,p.width),y=p.height;e.clones.forEach((function(t){"BOTTOM_LEFT"==t.plain&&(i=t),"BOTTOM_RIGHT"==t.plain&&(o=t),"TOP_LEFT"==t.plain&&(a=t),"TOP_RIGHT"==t.plain&&(s=t)})),Ci.call(this,h,o,d,y,r,n),Ci.call(this,f,i,d,y,r,n),Ci.call(this,u,s,d,y,r,n),Ci.call(this,c,a,d,y,r,n),this.render(),l.changeData((function(){}))}function ji(t){var e=this.data,r=(this.layer,this.layer_cell,this.layer_TOP_LEFT),n=this.layer_line_TOP_LEFT,i=this.layer_TOP_RIGHT,o=this.layer_line_TOP_RIGHT,a=this.layer_BOTTOM_LEFT,s=this.layer_line_BOTTOM_LEFT,l=this.layer_BOTTOM_RIGHT,c=this.layer_line_BOTTOM_RIGHT,u=e.cellRect(t.srindex,t.scindex),f=u.left,h=u.top,p=u.width,d=u.height,y=e.cellRect(t.erindex,t.ecindex),v=y.left,g=y.top,b=(y.width,y.height),m=e.cols.indexWidth,w=e.rows.height,_=[m+f+p,w+h+d/2,m+v,w+g+b/2],S=new In.a.Line({points:_,stroke:"red",strokeWidth:1,lineCap:"round",lineJoin:"round"}),O=S.clone(),x=S.clone(),P=S.clone();r.add(S),i.add(O),a.add(x),l.add(P),S.plain="TOP_LEFT",O.plain="TOP_RIGHT",x.plain="BOTTOM_LEFT",P.plain="BOTTOM_RIGHT",n.push({data:t,line:S}),o.push({data:t,line:O}),s.push({data:t,line:x}),c.push({data:t,line:P})}function Ei(t){var e=this.data,r=(this.layer,this.layer_cell,this.layer_TOP_LEFT),n=this.layer_cell_TOP_LEFT,i=this.layer_TOP_RIGHT,o=this.layer_cell_TOP_RIGHT,a=this.layer_BOTTOM_LEFT,s=this.layer_cell_BOTTOM_LEFT,l=this.layer_BOTTOM_RIGHT,c=this.layer_cell_BOTTOM_RIGHT,u=e.cellRect(t.rindex,t.cindex),f=function(t,e,r,n){var i=t.left,o=t.top,a=t.width,s=t.height,l=t.left_pad,c=t.cell_address,u=new Wn({x:i+l,y:o,draggable:!0,name:e.name}),f=new In.a.Text({x:10,y:3,text:e.name+" / "+c,fontSize:14,fontFamily:"Calibri",fill:"red"}),h=new In.a.Rect({x:0,y:0,width:a,height:s,fill:"green",stroke:"black",strokeWidth:0,cornerRadius:10,opacity:.5,shadowEnabled:!0});return u.on("mouseover",(function(){document.body.style.cursor="pointer"})),u.on("mouseout",(function(){document.body.style.cursor="default"})),u.on("dragstart",(function(){})),u.on("dragend",(function(t){var e=t.target.attrs.x+t.target.children[0].attrs.width/2,i=t.target.attrs.y+t.target.children[0].attrs.height/2,o=r.getCellRectByXY(e,i),a=t.target.parent.parent,s=t.target.attrs.name,l=t.target,c=o.ri,u=o.ci;n.call(a,s,l,c,u)})),u.add(h),u.add(f),u}({left:u.left,top:u.top,width:u.width,height:u.height,left_pad:e.cols.indexWidth,cell_address:p(t.cindex)+String(t.rindex+1)},t,e,Ti),h=f.clone(),d=f.clone(),y=f.clone();r.add(f),i.add(h),a.add(d),l.add(y),f.plain="TOP_LEFT",h.plain="TOP_RIGHT",d.plain="BOTTOM_LEFT",y.plain="BOTTOM_RIGHT",n.push({data:t,shape:f}),o.push({data:t,shape:h}),s.push({data:t,shape:d}),c.push({data:t,shape:y})}function Ai(t,e,r,n,i,o,a){var s=this.data;this.data.cols.indexWidth;e.forEach((function(t){if(t.data.rindex>=r.sri&&t.data.rindex<=r.eri&&t.data.cindex>=r.sci&&t.data.cindex<=r.eci){var e=s.cellRect(t.data.rindex,t.data.cindex),l=e.left,c=e.top,u=e.width,f=e.height;t.shape.absolutePosition({x:l+n+o,y:c+i+a}),t.shape.children[0].width(u),t.shape.children[0].height(f);var h=p(t.data.cindex)+String(t.data.rindex+1);t.shape.children[1].text(t.data.name+" / "+h),t.shape.show()}else t.shape.hide()}))}function Ri(t,e,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=e.sortedRowMap,a=e.rows,s=e.cols;if(!a.isHide(r)&&!s.isHide(n)){var l=r;o.has(r)&&(l=o.get(r));var c=e.getCell(l,n);if(null!==c){var u=!1;"editable"in c&&!1===c.editable&&(u=!0);var f=e.getCellStyleOrDefault(l,n),h=ki(e,r,n,i);h.bgcolor=f.bgcolor,void 0!==f.border&&(h.setBorders(f.border),t.strokeBorders(h)),t.rect(h,(function(){var i="";i=e.settings.evalPaused?c.text||"":Xr(c.text||"",en,(function(t,r){return e.getCellTextOrDefault(r,t)})),f.format&&(i=fn[f.format].render(i));var o=Object.assign({},f.font);o.size=zr(o.size),t.text(i,h,{align:f.align,valign:f.valign,font:o,color:f.color,strike:f.strike,underline:f.underline},f.textwrap),e.validations.getError(r,n)&&t.error(h),u&&t.frozen(h)}))}}}function Mi(t){var e=this.data,r=this.draw;if(t){var n=e.autoFilter;if(!n.active())return;var i=n.hrange();t.intersects(i)&&i.each((function(t,n){var i=ki(e,t,n);r.dropdown(i)}))}}function Fi(t,e,r,n,i){var o=this.draw,a=this.data;this.layer;o.save(),o.translate(e,r).translate(n,i);var s=a.exceptRowSet,l=a.exceptRowTotalHeight(t.sri,t.eri);o.save(),o.translate(0,-l),t.each((function(t,e){Ri(o,a,t,e)}),(function(t){return function(t){var e=s.has(t);if(e){var r=a.rows.getHeight(t);o.translate(0,-r)}return!e}(t)})),o.restore();var c=new Set;o.save(),o.translate(0,-l),a.eachMergesInView(t,(function(t){var e=t.sri,r=t.sci,n=t.eri;if(s.has(e)){if(!c.has(e)){c.add(e);var i=a.rows.sumHeight(e,n+1);o.translate(0,-i)}}else Ri(o,a,e,r)})),o.restore(),Mi.call(this,t),o.restore()}function Ii(t,e,r,n){var i=this.draw;i.save(),i.attr({fillStyle:"rgba(75, 137, 255, 0.08)"}).fillRect(t,e,r,n),i.restore()}function Di(t,e,r,n,i,o){var a=this,s=this.draw,l=this.data,c=e.h,u=e.w,f=o+n,h=i+r;s.save(),s.attr(xi),"all"!==t&&"left"!==t||s.fillRect(0,f,r,c),"all"!==t&&"top"!==t||s.fillRect(h,0,u,n);var d=l.selector.range,y=d.sri,v=d.sci,g=d.eri,b=d.eci;s.attr({textAlign:"center",textBaseline:"middle",font:"500 ".concat(li(12),"px Source Sans Pro"),fillStyle:"#585757",lineWidth:.5,strokeStyle:"#e6e6e6"}),"all"!==t&&"left"!==t||(l.rowEach(e.sri,e.eri,(function(t,e,n){var i=f+e,o=t;s.line([0,i],[r,i]),y<=o&&o<g+1&&Ii.call(a,0,i,r,n),s.fillText(o+1,r/2,i+n/2),t>0&&l.rows.isHide(t-1)&&(s.save(),s.attr({strokeStyle:"#c6c6c6"}),s.line([5,i+5],[r-5,i+5]),s.restore())})),s.line([0,c+f],[r,c+f]),s.line([r,f],[r,c+f])),"all"!==t&&"top"!==t||(l.colEach(e.sci,e.eci,(function(t,e,r){var i=h+e,o=t;s.line([i,0],[i,n]),v<=o&&o<b+1&&Ii.call(a,i,0,r,n),s.fillText(p(o),i+r/2,n/2),t>0&&l.cols.isHide(t-1)&&(s.save(),s.attr({strokeStyle:"#c6c6c6"}),s.line([i+5,5],[i+5,n-5]),s.restore())})),s.line([u+h,0],[u+h,n]),s.line([0,n],[u+h,n])),s.restore()}function Ni(t,e){var r=this.draw;r.save(),r.attr({fillStyle:"#f4f5f8"}).fillRect(0,0,t,e),r.restore()}function Gi(t,e,r,n,i){var o=t.sri,a=t.sci,s=t.eri,l=t.eci,c=t.w,u=t.h,f=this.draw,h=this.data,p=h.settings;f.save(),f.attr(Pi).translate(e+n,r+i),p.showGrid?(h.rowEach(o,s,(function(t,e,r){t!==o&&f.line([0,e],[c,e]),t===s&&f.line([0,e+r],[c,e+r])})),h.colEach(a,l,(function(t,e,r){t!==a&&f.line([e,0],[e,u]),t===l&&f.line([e+r,0],[e+r,u])})),f.restore()):f.restore()}function Li(t,e,r,n){var i=this.draw,o=this.data,a=o.viewWidth()-t,s=o.viewHeight()-e;i.save().translate(t,e).attr({strokeStyle:"rgba(75, 137, 255, .6)"}),i.line([0,n],[a,n]),i.line([r,0],[r,s]),i.restore()}var Bi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gi(t,e)}(o,t);var e,r,n,i=bi(o);function o(t,e){var r,n,a,s,l,c,u;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(u=i.call(this,{container:t,width:e.viewWidth(),height:e.viewHeight(),scaleX:window.devicePixelRatio,scaleY:window.devicePixelRatio})).el=t,u.draw=new hi(t,e.viewWidth(),e.viewHeight()),_i((r=wi(u),Oi(o.prototype)),"add",r).call(r,u.draw),u.draw.draw(),u.data=e,u.layer_cell=[],u.layer_cell_TOP_LEFT=[],u.layer_cell_TOP_RIGHT=[],u.layer_cell_BOTTOM_LEFT=[],u.layer_cell_BOTTOM_RIGHT=[],u.layer_line_TOP_LEFT=[],u.layer_line_TOP_RIGHT=[],u.layer_line_BOTTOM_LEFT=[],u.layer_line_BOTTOM_RIGHT=[],u.layer=new In.a.Layer,u.layer_TOP_LEFT=new In.a.Layer,u.layer_TOP_RIGHT=new In.a.Layer,u.layer_BOTTOM_LEFT=new In.a.Layer,u.layer_BOTTOM_RIGHT=new In.a.Layer;var f=new In.a.Circle({x:170,y:170,radius:30,fill:"red",stroke:"black",strokeWidth:2,draggable:!0});return f.on("mouseover",(function(){document.body.style.cursor="pointer"})),f.on("mouseout",(function(){document.body.style.cursor="default"})),u.layer.add(f),_i((n=wi(u),Oi(o.prototype)),"add",n).call(n,u.layer),_i((a=wi(u),Oi(o.prototype)),"add",a).call(a,u.layer_TOP_LEFT),_i((s=wi(u),Oi(o.prototype)),"add",s).call(s,u.layer_TOP_RIGHT),_i((l=wi(u),Oi(o.prototype)),"add",l).call(l,u.layer_BOTTOM_LEFT),_i((c=wi(u),Oi(o.prototype)),"add",c).call(c,u.layer_BOTTOM_RIGHT),u.layer.draw(),u.layer_TOP_LEFT.draw(),u.layer_TOP_RIGHT.draw(),u.layer_BOTTOM_LEFT.draw(),u.layer_BOTTOM_RIGHT.draw(),u}return e=o,(r=[{key:"setlayer",value:function(){console.log("setlayer");for(var t=this.data.shapes.getData(),e=0;e<t.length;e++)"shape"==t[e].type?Ei.call(this,t[e]):"line"==t[e].type&&ji.call(this,t[e])}},{key:"resetData",value:function(t){this.data=t,this.render()}},{key:"render",value:function(){var t=this.data,e=t.rows,r=t.cols.indexWidth,n=e.height;this.draw.resize(t.viewWidth(),t.viewHeight()),this.clear();var i=t.viewRange(),o=t.freezeTotalWidth(),a=t.freezeTotalHeight(),s=t.scroll,l=s.x,c=s.y;Gi.call(this,i,r,n,o,a),Fi.call(this,i,r,n,-l,-c),Di.call(this,"all",i,r,n,o,a),Ni.call(this,r,n),Ai.call(this,this.layer_BOTTOM_RIGHT,this.layer_cell_BOTTOM_RIGHT,i,r,n,-l,-c);var u=di(t.freeze,2),f=u[0],h=u[1];if(f>0||h>0){if(f>0){var p=i.clone();p.sri=0,p.eri=f-1,p.h=a,Gi.call(this,p,r,n,o,0),Fi.call(this,p,r,n,-l,0),Di.call(this,"top",p,r,n,o,0),Ai.call(this,this.layer_TOP_RIGHT,this.layer_cell_TOP_RIGHT,p,r,n,-l,0)}if(h>0){var d=i.clone();d.sci=0,d.eci=h-1,d.w=o,Gi.call(this,d,r,n,0,a),Di.call(this,"left",d,r,n,0,a),Fi.call(this,d,r,n,0,-c),Ai.call(this,this.layer_BOTTOM_LEFT,this.layer_cell_BOTTOM_LEFT,d,r,n,0,-c)}var y=t.freezeViewRange();Gi.call(this,y,r,n,0,0),Di.call(this,"all",y,r,n,0,0),Fi.call(this,y,r,n,0,0),Li.call(this,r,n,o,a),Ai.call(this,this.layer_TOP_LEFT,this.layer_cell_TOP_LEFT,y,r,n,0,0)}this.layer.draw(),this.layer_TOP_LEFT.draw(),this.layer_TOP_RIGHT.draw(),this.layer_BOTTOM_LEFT.draw(),this.layer_BOTTOM_RIGHT.draw()}},{key:"clear",value:function(){this.draw.clear()}}])&&vi(e.prototype,r),n&&vi(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(In.a.Stage);function Ui(t){return(Ui="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Ui(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Ui(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Ui(o)?o:String(o)),n)}var i,o}var Hi=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.tip="",e&&(this.tip=ft("toolbar.".concat(e.replace(/-[a-z]/g,(function(t){return t[1].toUpperCase()}))))),r&&(this.tip+=" (".concat(r,")")),this.tag=e,this.shortcut=r,this.value=n,this.el=this.element(),this.change=function(){}}var e,r,n;return e=t,(r=[{key:"element",value:function(){var t=this,e=this.tip;return c("div","".concat(ne,"-toolbar-btn")).on("mouseenter",(function(e){t.tip&&function(t,e){if(!e.classList.contains("active")){var r=e.getBoundingClientRect(),n=r.left,i=r.top,o=r.width,a=r.height,s=c("div","".concat(ne,"-tooltip")).html(t).show();document.body.appendChild(s.el);var l=s.box();s.css("left","".concat(n+o/2-l.width/2,"px")).css("top","".concat(i+a+2,"px")),$t(e,"mouseleave",(function(){document.body.contains(s.el)&&document.body.removeChild(s.el)})),$t(e,"click",(function(){document.body.contains(s.el)&&document.body.removeChild(s.el)}))}}(t.tip,e.target)})).attr("data-tooltip",e)}},{key:"setState",value:function(){}}])&&zi(e.prototype,r),n&&zi(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Vi(t){return(Vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ki(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Vi(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Vi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Vi(o)?o:String(o)),n)}var i,o}function Yi(){return(Yi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=Xi(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function Xi(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Zi(t)););return t}function qi(t,e){return(qi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function $i(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Zi(t);if(e){var i=Zi(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Ji(this,r)}}function Ji(t,e){if(e&&("object"===Vi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Zi(t){return(Zi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Qi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qi(t,e)}(o,t);var e,r,n,i=$i(o);function o(){return Wi(this,o),i.apply(this,arguments)}return e=o,(r=[{key:"dropdown",value:function(){}},{key:"getValue",value:function(t){return t}},{key:"element",value:function(){var t=this,e=this.tag;return this.dd=this.dropdown(),this.dd.change=function(r){return t.change(e,t.getValue(r))},Yi(Zi(o.prototype),"element",this).call(this).child(this.dd)}},{key:"setState",value:function(t){t&&(this.value=t,this.dd.setTitle(t))}}])&&Ki(e.prototype,r),n&&Ki(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Hi);function to(t){return(to="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ro(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==to(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==to(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===to(o)?o:String(o)),n)}var i,o}function no(t,e){return(no=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function io(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=ao(t);if(e){var i=ao(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return oo(this,r)}}function oo(t,e){if(e&&("object"===to(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function ao(t){return(ao=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var so=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&no(t,e)}(o,t);var e,r,n,i=io(o);function o(t,e,r,n){var a,s;eo(this,o),(s=i.call(this,"div","".concat(ne,"-dropdown ").concat(n))).title=t,s.change=function(){},s.headerClick=function(){},"string"==typeof t?s.title=c("div","".concat(ne,"-dropdown-title")).child(t):r&&s.title.addClass("arrow-left"),s.contentEl=c("div","".concat(ne,"-dropdown-content")).css("width",e).hide();for(var l=arguments.length,u=new Array(l>4?l-4:0),f=4;f<l;f++)u[f-4]=arguments[f];return(a=s).setContentChildren.apply(a,u),s.headerEl=c("div","".concat(ne,"-dropdown-header")),s.headerEl.on("click",(function(){"block"!==s.contentEl.css("display")?s.show():s.hide()})).children(s.title,r?c("div","".concat(ne,"-icon arrow-right")).child(c("div","".concat(ne,"-icon-img arrow-down"))):""),s.children(s.headerEl,s.contentEl),s}return e=o,(r=[{key:"setContentChildren",value:function(){var t;this.contentEl.html(""),arguments.length>0&&(t=this.contentEl).children.apply(t,arguments)}},{key:"setTitle",value:function(t){this.title.html(t),this.hide()}},{key:"show",value:function(){var t=this;this.contentEl.show(),this.parent().active(),Qt(this.parent(),(function(){t.hide()}))}},{key:"hide",value:function(){this.parent().active(!1),this.contentEl.hide(),Zt(this.parent())}}])&&ro(e.prototype,r),n&&ro(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(l);function lo(t){return(lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function co(t){return function(t){if(Array.isArray(t))return uo(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return uo(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uo(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uo(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function fo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==lo(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==lo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===lo(o)?o:String(o)),n)}var i,o}function ho(t,e){return(ho=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function po(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=vo(t);if(e){var i=vo(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return yo(this,r)}}function yo(t,e){if(e&&("object"===lo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function vo(t){return(vo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var go=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ho(t,e)}(o,t);var e,r,n,i=po(o);function o(t,e){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var n=new Ye("align-".concat(e)),a=t.map((function(t){return(e="align-".concat(t),c("div","".concat(ne,"-item")).child(new Ye(e))).on("click",(function(){r.setTitle(t),r.change(t)}));var e}));return r=i.call.apply(i,[this,n,"auto",!0,"bottom-left"].concat(co(a)))}return e=o,(r=[{key:"setTitle",value:function(t){this.title.setName("align-".concat(t)),this.hide()}}])&&fo(e.prototype,r),n&&fo(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(so);function bo(t){return(bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==bo(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==bo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===bo(o)?o:String(o)),n)}var i,o}function wo(t,e){return(wo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function _o(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Oo(t);if(e){var i=Oo(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return So(this,r)}}function So(t,e){if(e&&("object"===bo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Oo(t){return(Oo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var xo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wo(t,e)}(o,t);var e,r,n,i=_o(o);function o(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,"align","",t)}return e=o,(r=[{key:"dropdown",value:function(){var t=this.value;return new go(["left","center","right"],t)}}])&&mo(e.prototype,r),n&&mo(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Qi);function Po(t){return(Po="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ko(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Po(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Po(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Po(o)?o:String(o)),n)}var i,o}function Co(t,e){return(Co=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function To(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Eo(t);if(e){var i=Eo(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return jo(this,r)}}function jo(t,e){if(e&&("object"===Po(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Eo(t){return(Eo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ao=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Co(t,e)}(o,t);var e,r,n,i=To(o);function o(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,"valign","",t)}return e=o,(r=[{key:"dropdown",value:function(){var t=this.value;return new go(["top","middle","bottom"],t)}}])&&ko(e.prototype,r),n&&ko(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Qi);function Ro(t){return(Ro="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Fo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Ro(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Ro(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Ro(o)?o:String(o)),n)}var i,o}function Io(){return(Io="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=Do(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function Do(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Bo(t)););return t}function No(t,e){return(No=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Go(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Bo(t);if(e){var i=Bo(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Lo(this,r)}}function Lo(t,e){if(e&&("object"===Ro(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Bo(t){return(Bo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Uo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&No(t,e)}(o,t);var e,r,n,i=Go(o);function o(){return Mo(this,o),i.apply(this,arguments)}return e=o,(r=[{key:"element",value:function(){var t=this,e=this.tag;return Io(Bo(o.prototype),"element",this).call(this).child(new Ye(e)).on("click",(function(){return t.click()}))}},{key:"click",value:function(){this.change(this.tag,this.toggle())}},{key:"setState",value:function(t){this.el.active(t)}},{key:"toggle",value:function(){return this.el.toggle()}},{key:"active",value:function(){return this.el.hasClass("active")}}])&&Fo(e.prototype,r),n&&Fo(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Hi);function zo(t){return(zo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ho(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==zo(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==zo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===zo(o)?o:String(o)),n)}var i,o}function Vo(t,e){return(Vo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Wo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Yo(t);if(e){var i=Yo(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Ko(this,r)}}function Ko(t,e){if(e&&("object"===zo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Yo(t){return(Yo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Xo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vo(t,e)}(o,t);var e,r,n,i=Wo(o);function o(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,"autofilter")}return e=o,(r=[{key:"setState",value:function(){}}])&&Ho(e.prototype,r),n&&Ho(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Uo);function qo(t){return(qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==qo(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==qo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===qo(o)?o:String(o)),n)}var i,o}function Jo(t,e){return(Jo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Zo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=ta(t);if(e){var i=ta(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Qo(this,r)}}function Qo(t,e){if(e&&("object"===qo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function ta(t){return(ta=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ea=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Jo(t,e)}(o,t);var e,r,n,i=Zo(o);function o(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,"font-bold","Ctrl+B")}return e=o,r&&$o(e.prototype,r),n&&$o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(Uo);function ra(t){return(ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function na(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==ra(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ra(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===ra(o)?o:String(o)),n)}var i,o}function ia(t,e){return(ia=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function oa(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=sa(t);if(e){var i=sa(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return aa(this,r)}}function aa(t,e){if(e&&("object"===ra(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function sa(t){return(sa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var la=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ia(t,e)}(o,t);var e,r,n,i=oa(o);function o(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,"font-italic","Ctrl+I")}return e=o,r&&na(e.prototype,r),n&&na(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(Uo);function ca(t){return(ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ua(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==ca(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ca(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===ca(o)?o:String(o)),n)}var i,o}function fa(t,e){return(fa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ha(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=da(t);if(e){var i=da(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return pa(this,r)}}function pa(t,e){if(e&&("object"===ca(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function da(t){return(da=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ya=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fa(t,e)}(o,t);var e,r,n,i=ha(o);function o(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,"strike","Ctrl+U")}return e=o,r&&ua(e.prototype,r),n&&ua(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(Uo);function va(t){return(va="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ga(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==va(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==va(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===va(o)?o:String(o)),n)}var i,o}function ba(t,e){return(ba=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ma(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=_a(t);if(e){var i=_a(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return wa(this,r)}}function wa(t,e){if(e&&("object"===va(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function _a(t){return(_a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Sa=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ba(t,e)}(o,t);var e,r,n,i=ma(o);function o(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,"underline","Ctrl+U")}return e=o,r&&ga(e.prototype,r),n&&ga(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(Uo);function Oa(t){return(Oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xa(t){return function(t){if(Array.isArray(t))return Pa(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Pa(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pa(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pa(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ka(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Oa(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Oa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Oa(o)?o:String(o)),n)}var i,o}function Ca(t,e,r){return e&&ka(t.prototype,e),r&&ka(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var Ta=["#ffffff","#000100","#e7e5e6","#445569","#5b9cd6","#ed7d31","#a5a5a5","#ffc001","#4371c6","#71ae47"],ja=[["#f2f2f2","#7f7f7f","#d0cecf","#d5dce4","#deeaf6","#fce5d5","#ededed","#fff2cd","#d9e2f3","#e3efd9"],["#d8d8d8","#595959","#afabac","#adb8ca","#bdd7ee","#f7ccac","#dbdbdb","#ffe59a","#b3c6e7","#c5e0b3"],["#bfbfbf","#3f3f3f","#756f6f","#8596b0","#9cc2e6","#f4b184","#c9c9c9","#fed964","#8eaada","#a7d08c"],["#a5a5a5","#262626","#3a3839","#333f4f","#2e75b5","#c45a10","#7b7b7b","#bf8e01","#2f5596","#538136"],["#7f7f7f","#0c0c0c","#171516","#222a35","#1f4e7a","#843c0a","#525252","#7e6000","#203864","#365624"]],Ea=["#c00000","#fe0000","#fdc101","#ffff01","#93d051","#00b04e","#01b0f1","#0170c1","#012060","#7030a0"];function Aa(t){var e=this;return c("td","").child(c("div","".concat(ne,"-color-palette-cell")).on("click.stop",(function(){return e.change(t)})).css("background-color",t))}var Ra=Ca((function t(){var e,r,n,i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.el=c("div","".concat(ne,"-color-palette")),this.change=function(){};var o=c("table","").children((e=c("tbody","")).children.apply(e,[(r=c("tr","".concat(ne,"-theme-color-placeholders"))).children.apply(r,xa(Ta.map((function(t){return Aa.call(i,t)}))))].concat(xa(ja.map((function(t){var e;return(e=c("tr","".concat(ne,"-theme-colors"))).children.apply(e,xa(t.map((function(t){return Aa.call(i,t)}))))}))),[(n=c("tr","".concat(ne,"-standard-colors"))).children.apply(n,xa(Ea.map((function(t){return Aa.call(i,t)}))))])));this.el.child(o)}));function Ma(t){return(Ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fa(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Ma(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Ma(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Ma(o)?o:String(o)),n)}var i,o}function Ia(t,e){return(Ia=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Da(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Ga(t);if(e){var i=Ga(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Na(this,r)}}function Na(t,e){if(e&&("object"===Ma(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Ga(t){return(Ga=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var La=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ia(t,e)}(o,t);var e,r,n,i=Da(o);function o(t,e){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var n=new Ye(t).css("height","16px").css("border-bottom","3px solid ".concat(e)),a=new Ra;return a.change=function(t){r.setTitle(t),r.change(t)},r=i.call(this,n,"auto",!1,"bottom-left",a.el)}return e=o,(r=[{key:"setTitle",value:function(t){this.title.css("border-color",t),this.hide()}}])&&Fa(e.prototype,r),n&&Fa(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(so);function Ba(t){return(Ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ua(t){return function(t){if(Array.isArray(t))return za(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return za(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return za(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function za(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ha(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Ba(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Ba(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Ba(o)?o:String(o)),n)}var i,o}function Va(t,e){return(Va=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Wa(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Ya(t);if(e){var i=Ya(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Ka(this,r)}}function Ka(t,e){if(e&&("object"===Ba(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Ya(t){return(Ya=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Xa=[["thin",'<svg xmlns="http://www.w3.org/2000/svg" width="50" height="1" style="user-select: none;"><line x1="0" y1="0.5" x2="50" y2="0.5" stroke-width="1" stroke="black" style="user-select: none;"></line></svg>'],["medium",'<svg xmlns="http://www.w3.org/2000/svg" width="50" height="2" style="user-select: none;"><line x1="0" y1="1.0" x2="50" y2="1.0" stroke-width="2" stroke="black" style="user-select: none;"></line></svg>'],["thick",'<svg xmlns="http://www.w3.org/2000/svg" width="50" height="3" style="user-select: none;"><line x1="0" y1="1.5" x2="50" y2="1.5" stroke-width="3" stroke="black" style="user-select: none;"></line></svg>'],["dashed",'<svg xmlns="http://www.w3.org/2000/svg" width="50" height="1" style="user-select: none;"><line x1="0" y1="0.5" x2="50" y2="0.5" stroke-width="1" stroke="black" stroke-dasharray="2" style="user-select: none;"></line></svg>'],["dotted",'<svg xmlns="http://www.w3.org/2000/svg" width="50" height="1" style="user-select: none;"><line x1="0" y1="0.5" x2="50" y2="0.5" stroke-width="1" stroke="black" stroke-dasharray="1" style="user-select: none;"></line></svg>']],qa=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Va(t,e)}(o,t);var e,r,n,i=Wa(o);function o(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var r=new Ye("line-type"),n=0,a=Xa.map((function(r,i){return c("div","".concat(ne,"-item state ").concat(t===r[0]?"checked":"")).on("click",(function(){a[n].toggle("checked"),a[i].toggle("checked"),n=i,e.hide(),e.change(r)})).child(c("div","".concat(ne,"-line-type")).html(r[1]))}));return e=i.call.apply(i,[this,r,"auto",!1,"bottom-left"].concat(Ua(a)))}return e=o,r&&Ha(e.prototype,r),n&&Ha(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(so);function $a(t){return($a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ja(t){return function(t){if(Array.isArray(t))return ts(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Qa(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Za(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||Qa(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qa(t,e){if(t){if("string"==typeof t)return ts(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ts(t,e):void 0}}function ts(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function es(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==$a(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==$a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===$a(o)?o:String(o)),n)}var i,o}function rs(t,e,r){return e&&es(t.prototype,e),r&&es(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function ns(){var t;return c("table","").child((t=c("tbody","")).children.apply(t,arguments))}function is(t){var e=this;return c("td","").child(c("div","".concat(ne,"-border-palette-cell")).child(new Ye("border-".concat(t))).on("click",(function(){e.mode=t;var r=e.mode,n=e.style,i=e.color;e.change({mode:r,style:n,color:i})})))}var os=rs((function t(){var e,r,n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.color="#000",this.style="thin",this.mode="all",this.change=function(){},this.ddColor=new La("line-color",this.color),this.ddColor.change=function(t){n.color=t},this.ddType=new qa(this.style),this.ddType.change=function(t){var e=Za(t,1)[0];n.style=e},this.el=c("div","".concat(ne,"-border-palette"));var i=ns(c("tr","").children(c("td","".concat(ne,"-border-palette-left")).child(ns((e=c("tr","")).children.apply(e,Ja(["all","inside","horizontal","vertical","outside"].map((function(t){return is.call(n,t)})))),(r=c("tr","")).children.apply(r,Ja(["left","top","right","bottom","none"].map((function(t){return is.call(n,t)})))))),c("td","".concat(ne,"-border-palette-right")).children(c("div","".concat(ne,"-toolbar-btn")).child(this.ddColor.el),c("div","".concat(ne,"-toolbar-btn")).child(this.ddType.el))));this.el.child(i)}));function as(t){return(as="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ss(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==as(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==as(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===as(o)?o:String(o)),n)}var i,o}function ls(t,e){return(ls=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function cs(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=fs(t);if(e){var i=fs(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return us(this,r)}}function us(t,e){if(e&&("object"===as(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function fs(t){return(fs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var hs=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ls(t,e)}(o,t);var e,r,n,i=cs(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var e=new Ye("border-all"),r=new os;return r.change=function(e){t.change(e),t.hide()},t=i.call(this,e,"auto",!1,"bottom-left",r.el)}return e=o,r&&ss(e.prototype,r),n&&ss(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(so);function ps(t){return(ps="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ds(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==ps(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ps(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===ps(o)?o:String(o)),n)}var i,o}function ys(t,e){return(ys=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function vs(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=bs(t);if(e){var i=bs(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return gs(this,r)}}function gs(t,e){if(e&&("object"===ps(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function bs(t){return(bs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ms=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ys(t,e)}(o,t);var e,r,n,i=vs(o);function o(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,"border")}return e=o,(r=[{key:"dropdown",value:function(){return new hs}}])&&ds(e.prototype,r),n&&ds(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Qi);function ws(t){return(ws="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ss(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==ws(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ws(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===ws(o)?o:String(o)),n)}var i,o}function Os(){return(Os="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=xs(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function xs(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ts(t)););return t}function Ps(t,e){return(Ps=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ks(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Ts(t);if(e){var i=Ts(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Cs(this,r)}}function Cs(t,e){if(e&&("object"===ws(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Ts(t){return(Ts=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var js=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ps(t,e)}(o,t);var e,r,n,i=ks(o);function o(){return _s(this,o),i.apply(this,arguments)}return e=o,(r=[{key:"element",value:function(){var t=this;return Os(Ts(o.prototype),"element",this).call(this).child(new Ye(this.tag)).on("click",(function(){return t.change(t.tag)}))}},{key:"setState",value:function(t){this.el.disabled(t)}}])&&Ss(e.prototype,r),n&&Ss(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Hi);function Es(t){return(Es="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function As(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Es(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Es(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Es(o)?o:String(o)),n)}var i,o}function Rs(t,e){return(Rs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ms(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Is(t);if(e){var i=Is(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Fs(this,r)}}function Fs(t,e){if(e&&("object"===Es(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Is(t){return(Is=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ds=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Rs(t,e)}(o,t);var e,r,n,i=Ms(o);function o(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,"clearformat")}return e=o,r&&As(e.prototype,r),n&&As(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(js);function Ns(t){return(Ns="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gs(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Ns(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Ns(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Ns(o)?o:String(o)),n)}var i,o}function Ls(t,e){return(Ls=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Bs(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=zs(t);if(e){var i=zs(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Us(this,r)}}function Us(t,e){if(e&&("object"===Ns(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function zs(t){return(zs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Hs=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ls(t,e)}(o,t);var e,r,n,i=Bs(o);function o(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,"paintformat")}return e=o,(r=[{key:"setState",value:function(){}}])&&Gs(e.prototype,r),n&&Gs(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Uo);function Vs(t){return(Vs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ws(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Vs(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Vs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Vs(o)?o:String(o)),n)}var i,o}function Ks(t,e){return(Ks=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ys(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=qs(t);if(e){var i=qs(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Xs(this,r)}}function Xs(t,e){if(e&&("object"===Vs(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function qs(t){return(qs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var $s=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ks(t,e)}(o,t);var e,r,n,i=Ys(o);function o(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,"color",void 0,t)}return e=o,(r=[{key:"dropdown",value:function(){var t=this.tag,e=this.value;return new La(t,e)}}])&&Ws(e.prototype,r),n&&Ws(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Qi);function Js(t){return(Js="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zs(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Js(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Js(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Js(o)?o:String(o)),n)}var i,o}function Qs(t,e){return(Qs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function tl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=rl(t);if(e){var i=rl(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return el(this,r)}}function el(t,e){if(e&&("object"===Js(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function rl(t){return(rl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var nl=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qs(t,e)}(o,t);var e,r,n,i=tl(o);function o(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,"bgcolor",void 0,t)}return e=o,(r=[{key:"dropdown",value:function(){var t=this.tag,e=this.value;return new La(t,e)}}])&&Zs(e.prototype,r),n&&Zs(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Qi);function il(t){return(il="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ol(t){return function(t){if(Array.isArray(t))return al(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return al(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return al(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function al(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function sl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==il(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==il(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===il(o)?o:String(o)),n)}var i,o}function ll(t,e){return(ll=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function cl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=fl(t);if(e){var i=fl(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ul(this,r)}}function ul(t,e){if(e&&("object"===il(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function fl(t){return(fl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var hl=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ll(t,e)}(o,t);var e,r,n,i=cl(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var e=Ur.map((function(e){return c("div","".concat(ne,"-item")).on("click",(function(){t.setTitle("".concat(e.pt)),t.change(e)})).child("".concat(e.pt))}));return t=i.call.apply(i,[this,"10","60px",!0,"bottom-left"].concat(ol(e)))}return e=o,r&&sl(e.prototype,r),n&&sl(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(so);function pl(t){return(pl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==pl(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==pl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===pl(o)?o:String(o)),n)}var i,o}function yl(t,e){return(yl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function vl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=bl(t);if(e){var i=bl(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return gl(this,r)}}function gl(t,e){if(e&&("object"===pl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function bl(t){return(bl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ml=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yl(t,e)}(o,t);var e,r,n,i=vl(o);function o(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,"font-size")}return e=o,(r=[{key:"getValue",value:function(t){return t.pt}},{key:"dropdown",value:function(){return new hl}}])&&dl(e.prototype,r),n&&dl(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Qi);function wl(t){return(wl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _l(t){return function(t){if(Array.isArray(t))return Sl(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Sl(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Sl(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sl(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ol(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==wl(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==wl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===wl(o)?o:String(o)),n)}var i,o}function xl(t,e){return(xl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Pl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Cl(t);if(e){var i=Cl(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return kl(this,r)}}function kl(t,e){if(e&&("object"===wl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Cl(t){return(Cl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Tl=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xl(t,e)}(o,t);var e,r,n,i=Pl(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var e=Br.map((function(e){return c("div","".concat(ne,"-item")).on("click",(function(){t.setTitle(e.title),t.change(e)})).child(e.title)}));return t=i.call.apply(i,[this,Br[0].title,"160px",!0,"bottom-left"].concat(_l(e)))}return e=o,r&&Ol(e.prototype,r),n&&Ol(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(so);function jl(t){return(jl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function El(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==jl(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==jl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===jl(o)?o:String(o)),n)}var i,o}function Al(t,e){return(Al=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Rl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Fl(t);if(e){var i=Fl(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Ml(this,r)}}function Ml(t,e){if(e&&("object"===jl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Fl(t){return(Fl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Il=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Al(t,e)}(o,t);var e,r,n,i=Rl(o);function o(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,"font-name")}return e=o,(r=[{key:"getValue",value:function(t){return t.key}},{key:"dropdown",value:function(){return new Tl}}])&&El(e.prototype,r),n&&El(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Qi);function Dl(t){return(Dl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nl(t){return function(t){if(Array.isArray(t))return Gl(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Gl(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Gl(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gl(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ll(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Dl(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Dl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Dl(o)?o:String(o)),n)}var i,o}function Bl(t,e){return(Bl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ul(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Hl(t);if(e){var i=Hl(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return zl(this,r)}}function zl(t,e){if(e&&("object"===Dl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Hl(t){return(Hl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Vl=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Bl(t,e)}(o,t);var e,r,n,i=Ul(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var e=un.slice(0);return e.splice(2,0,{key:"divider"}),e.splice(8,0,{key:"divider"}),e=e.map((function(e){var r=c("div","".concat(ne,"-item"));return"divider"===e.key?r.addClass("divider"):(r.child(e.title()).on("click",(function(){t.setTitle(e.title()),t.change(e)})),e.label&&r.child(c("div","label").html(e.label))),r})),t=i.call.apply(i,[this,"Normal","220px",!0,"bottom-left"].concat(Nl(e)))}return e=o,(r=[{key:"setTitle",value:function(t){for(var e=0;e<un.length;e+=1)un[e].key===t&&this.title.html(un[e].title());this.hide()}}])&&Ll(e.prototype,r),n&&Ll(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(so);function Wl(t){return(Wl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Wl(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Wl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Wl(o)?o:String(o)),n)}var i,o}function Yl(t,e){return(Yl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Xl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=$l(t);if(e){var i=$l(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ql(this,r)}}function ql(t,e){if(e&&("object"===Wl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function $l(t){return($l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Jl=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yl(t,e)}(o,t);var e,r,n,i=Xl(o);function o(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,"format")}return e=o,(r=[{key:"getValue",value:function(t){return t.key}},{key:"dropdown",value:function(){return new Vl}}])&&Kl(e.prototype,r),n&&Kl(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Qi);function Zl(t){return(Zl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ql(t){return function(t){if(Array.isArray(t))return tc(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return tc(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tc(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tc(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ec(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Zl(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Zl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Zl(o)?o:String(o)),n)}var i,o}function rc(t,e){return(rc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function nc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=oc(t);if(e){var i=oc(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ic(this,r)}}function ic(t,e){if(e&&("object"===Zl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function oc(t){return(oc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ac=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rc(t,e)}(o,t);var e,r,n,i=nc(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var e=Qr.map((function(e){return c("div","".concat(ne,"-item")).on("click",(function(){t.hide(),t.change(e)})).child(e.key)}));return t=i.call.apply(i,[this,new Ye("formula"),"180px",!0,"bottom-left"].concat(Ql(e)))}return e=o,r&&ec(e.prototype,r),n&&ec(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(so);function sc(t){return(sc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==sc(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==sc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===sc(o)?o:String(o)),n)}var i,o}function cc(t,e){return(cc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function uc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=hc(t);if(e){var i=hc(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return fc(this,r)}}function fc(t,e){if(e&&("object"===sc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function hc(t){return(hc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var pc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cc(t,e)}(o,t);var e,r,n,i=uc(o);function o(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,"formula")}return e=o,(r=[{key:"getValue",value:function(t){return t.key}},{key:"dropdown",value:function(){return new ac}}])&&lc(e.prototype,r),n&&lc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Qi);function dc(t){return(dc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==dc(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==dc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===dc(o)?o:String(o)),n)}var i,o}function vc(t,e){return(vc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function gc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=mc(t);if(e){var i=mc(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return bc(this,r)}}function bc(t,e){if(e&&("object"===dc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function mc(t){return(mc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var wc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vc(t,e)}(o,t);var e,r,n,i=gc(o);function o(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,"freeze")}return e=o,r&&yc(e.prototype,r),n&&yc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(Uo);function _c(t){return(_c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==_c(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===_c(o)?o:String(o)),n)}var i,o}function Oc(t,e){return(Oc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function xc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=kc(t);if(e){var i=kc(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Pc(this,r)}}function Pc(t,e){if(e&&("object"===_c(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function kc(t){return(kc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Cc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Oc(t,e)}(o,t);var e,r,n,i=xc(o);function o(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,"merge")}return e=o,(r=[{key:"setState",value:function(t,e){this.el.active(t).disabled(e)}}])&&Sc(e.prototype,r),n&&Sc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Uo);function Tc(t){return(Tc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Tc(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Tc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Tc(o)?o:String(o)),n)}var i,o}function Ec(t,e){return(Ec=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ac(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Mc(t);if(e){var i=Mc(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Rc(this,r)}}function Rc(t,e){if(e&&("object"===Tc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Mc(t){return(Mc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Fc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ec(t,e)}(o,t);var e,r,n,i=Ac(o);function o(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,"redo","Ctrl+Y")}return e=o,r&&jc(e.prototype,r),n&&jc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(js);function Ic(t){return(Ic="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Ic(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Ic(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Ic(o)?o:String(o)),n)}var i,o}function Nc(t,e){return(Nc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Gc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Bc(t);if(e){var i=Bc(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Lc(this,r)}}function Lc(t,e){if(e&&("object"===Ic(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Bc(t){return(Bc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Uc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nc(t,e)}(o,t);var e,r,n,i=Gc(o);function o(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,"undo","Ctrl+Z")}return e=o,r&&Dc(e.prototype,r),n&&Dc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(js);function zc(t){return(zc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==zc(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==zc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===zc(o)?o:String(o)),n)}var i,o}function Vc(t,e){return(Vc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Wc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Yc(t);if(e){var i=Yc(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Kc(this,r)}}function Kc(t,e){if(e&&("object"===zc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Yc(t){return(Yc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Xc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vc(t,e)}(o,t);var e,r,n,i=Wc(o);function o(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,"print","Ctrl+P")}return e=o,r&&Hc(e.prototype,r),n&&Hc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(js);function qc(t){return(qc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==qc(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==qc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===qc(o)?o:String(o)),n)}var i,o}function Jc(t,e){return(Jc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Zc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=tu(t);if(e){var i=tu(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Qc(this,r)}}function Qc(t,e){if(e&&("object"===qc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function tu(t){return(tu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var eu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Jc(t,e)}(o,t);var e,r,n,i=Zc(o);function o(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,"textwrap")}return e=o,r&&$c(e.prototype,r),n&&$c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(Uo);function ru(t){return(ru="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==ru(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ru(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===ru(o)?o:String(o)),n)}var i,o}function iu(t,e,r){return e&&nu(t.prototype,e),r&&nu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function ou(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function au(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&su(t,e)}function su(t,e){return(su=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function lu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=uu(t);if(e){var i=uu(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return cu(this,r)}}function cu(t,e){if(e&&("object"===ru(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function uu(t){return(uu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var fu=function(t){au(r,t);var e=lu(r);function r(){var t;ou(this,r);var n=new Ye("ellipsis"),i=c("div","".concat(ne,"-toolbar-more"));return(t=e.call(this,n,"auto",!1,"bottom-right",i)).moreBtns=i,t.contentEl.css("max-width","420px"),t}return iu(r)}(so),hu=function(t){au(r,t);var e=lu(r);function r(){var t;return ou(this,r),(t=e.call(this,"more")).el.hide(),t}return iu(r,[{key:"dropdown",value:function(){return new fu}},{key:"show",value:function(){this.el.show()}},{key:"hide",value:function(){this.el.hide()}}]),r}(Qi);function pu(t){return(pu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function du(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==pu(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==pu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===pu(o)?o:String(o)),n)}var i,o}function vu(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return gu(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gu(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gu(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function bu(){return c("div","".concat(ne,"-toolbar-divider"))}function mu(){var t=this;this.btns2=[],this.items.forEach((function(e){if(Array.isArray(e))e.forEach((function(e){var r=e.el,n=r.box(),i=r.computedStyle(),o=i.marginLeft,a=i.marginRight;t.btns2.push([r,n.width+parseInt(o,10)+parseInt(a,10)])}));else{var r=e.box(),n=e.computedStyle(),i=n.marginLeft,o=n.marginRight;t.btns2.push([e,r.width+parseInt(i,10)+parseInt(o,10)])}}))}function wu(){var t,e,r=this.el,n=this.btns,i=this.moreEl,o=this.btns2,a=i.dd,s=a.moreBtns,l=a.contentEl;r.css("width","".concat(this.widthFn(),"px"));var c=r.box(),u=160,f=12,h=[],p=[];o.forEach((function(t,e){var r=vu(t,2),n=r[0],i=r[1];u+=i,e===o.length-1||u<c.width?h.push(n):(f+=i,p.push(n))})),(t=n.html("")).children.apply(t,h),(e=s.html("")).children.apply(e,p),l.css("width","".concat(f,"px")),p.length>0?i.show():i.hide()}function _u(t){var e=this,r=new Hi;r.el.on("click",(function(){t.onClick&&t.onClick(e.data.getData(),e.data)})),r.tip=t.tip||"";var n=t.el;if(t.icon&&(n=c("img").attr("src",t.icon)),n){var i=c("div","".concat(ne,"-icon"));i.child(n),r.el.child(i)}return r}var Su=function(){function t(e,r){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];du(this,t),this.data=e,this.change=function(){},this.widthFn=r,this.isHide=i;var o=e.defaultStyle();this.items=[[this.undoEl=new Uc,this.redoEl=new Fc,new Xc,this.paintformatEl=new Hs,this.clearformatEl=new Ds],bu(),[this.formatEl=new Jl],bu(),[this.fontEl=new Il,this.fontSizeEl=new ml],bu(),[this.boldEl=new ea,this.italicEl=new la,this.underlineEl=new Sa,this.strikeEl=new ya,this.textColorEl=new $s(o.color)],bu(),[this.fillColorEl=new nl(o.bgcolor),this.borderEl=new ms,this.mergeEl=new Cc],bu(),[this.alignEl=new xo(o.align),this.valignEl=new Ao(o.valign),this.textwrapEl=new eu],bu(),[this.freezeEl=new wc,this.autofilterEl=new Xo,this.formulaEl=new pc]];var a=e.settings.extendToolbar,s=void 0===a?{}:a;if(s.left&&s.left.length>0){this.items.unshift(bu());var l=s.left.map(_u.bind(this));this.items.unshift(l)}if(s.right&&s.right.length>0){this.items.push(bu());var u=s.right.map(_u.bind(this));this.items.push(u)}this.items.push([this.moreEl=new hu]),this.el=c("div","".concat(ne,"-toolbar")),this.btns=c("div","".concat(ne,"-toolbar-btns")),this.items.forEach((function(t){Array.isArray(t)?t.forEach((function(t){n.btns.child(t.el),t.change=function(){n.change.apply(n,arguments)}})):n.btns.child(t.el)})),this.el.child(this.btns),i?this.el.hide():(this.reset(),setTimeout((function(){mu.call(n),wu.call(n)}),0),$t(window,"resize",(function(){wu.call(n)})))}var e,r,n;return e=t,(r=[{key:"paintformatActive",value:function(){return this.paintformatEl.active()}},{key:"paintformatToggle",value:function(){this.paintformatEl.toggle()}},{key:"trigger",value:function(t){this["".concat(t,"El")].click()}},{key:"resetData",value:function(t){this.data=t,this.reset()}},{key:"reset",value:function(){if(!this.isHide){var t=this.data,e=t.getSelectedCellStyle();this.undoEl.setState(!t.canUndo()),this.redoEl.setState(!t.canRedo()),this.mergeEl.setState(t.canUnmerge(),!t.selector.multiple()),this.autofilterEl.setState(!t.canAutofilter());var r=e.font,n=e.format;this.formatEl.setState(n),this.fontEl.setState(r.name),this.fontSizeEl.setState(r.size),this.boldEl.setState(r.bold),this.italicEl.setState(r.italic),this.underlineEl.setState(e.underline),this.strikeEl.setState(e.strike),this.textColorEl.setState(e.color),this.fillColorEl.setState(e.bgcolor),this.alignEl.setState(e.align),this.valignEl.setState(e.valign),this.textwrapEl.setState(e.textwrap),this.freezeEl.setState(t.freezeIsActive())}}}])&&yu(e.prototype,r),n&&yu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ou(t){return(Ou="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xu(t){return function(t){if(Array.isArray(t))return Pu(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Pu(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pu(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pu(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ku(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Cu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Ou(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Ou(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Ou(o)?o:String(o)),n)}var i,o}var Tu=function(){function t(e,r){var n,i=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"600px";ku(this,t),this.title=e,this.el=c("div","".concat(ne,"-modal")).css("width",o).children(c("div","".concat(ne,"-modal-header")).children(new Ye("close").on("click.stop",(function(){return i.hide()})),this.title),(n=c("div","".concat(ne,"-modal-content"))).children.apply(n,xu(r))).hide()}var e,r,n;return e=t,(r=[{key:"show",value:function(){var t=this;this.dimmer=c("div","".concat(ne,"-dimmer active")),document.body.appendChild(this.dimmer.el);var e=this.el.show().box(),r=e.width,n=e.height,i=document.documentElement,o=i.clientHeight,a=i.clientWidth;this.el.offset({left:(a-r)/2,top:(o-n)/3}),window.xkeydownEsc=function(e){27===e.keyCode&&t.hide()},$t(window,"keydown",window.xkeydownEsc)}},{key:"hide",value:function(){this.el.hide(),document.body.removeChild(this.dimmer.el),Jt(window,"keydown",window.xkeydownEsc),delete window.xkeydownEsc}}])&&Cu(e.prototype,r),n&&Cu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ju(t){return(ju="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Eu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==ju(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ju(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===ju(o)?o:String(o)),n)}var i,o}var Au=function(){function t(e,r){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.vchange=function(){},this.el=c("div","".concat(ne,"-form-input")),this.input=c("input","").css("width",e).on("input",(function(t){return n.vchange(t)})).attr("placeholder",r),this.el.child(this.input)}var e,r,n;return e=t,(r=[{key:"focus",value:function(){var t=this;setTimeout((function(){t.input.el.focus()}),10)}},{key:"hint",value:function(t){this.input.attr("placeholder",t)}},{key:"val",value:function(t){return this.input.val(t)}}])&&Eu(e.prototype,r),n&&Eu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ru(t){return(Ru="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Fu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Ru(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Ru(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Ru(o)?o:String(o)),n)}var i,o}var Iu=function(){function t(e,r,n){var i=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(t){return t},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){};Mu(this,t),this.key=e,this.getTitle=o,this.vchange=function(){},this.el=c("div","".concat(ne,"-form-select")),this.suggest=new Be(r.map((function(t){return{key:t,title:i.getTitle(t)}})),(function(t){i.itemClick(t.key),a(t.key),i.vchange(t.key)}),n,this.el),this.el.children(this.itemEl=c("div","input-text").html(this.getTitle(e)),this.suggest.el).on("click",(function(){return i.show()}))}var e,r,n;return e=t,(r=[{key:"show",value:function(){this.suggest.search("")}},{key:"itemClick",value:function(t){this.key=t,this.itemEl.html(this.getTitle(t))}},{key:"val",value:function(t){return void 0!==t?(this.key=t,this.itemEl.html(this.getTitle(t)),this):this.key}}])&&Fu(e.prototype,r),n&&Fu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Du(t){return(Du="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Du(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Du(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Du(o)?o:String(o)),n)}var i,o}var Gu={number:/(^\d+$)|(^\d+(\.\d{0,4})?$)/,date:/^\d{4}-\d{1,2}-\d{1,2}$/},Lu=function(){function t(e,r,n,i){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.label="",this.rule=r,n&&(this.label=c("label","label").css("width","".concat(i,"px")).html(n)),this.tip=c("div","tip").child("tip").hide(),this.input=e,this.input.vchange=function(){return o.validate()},this.el=c("div","".concat(ne,"-form-field")).children(this.label,e.el,this.tip)}var e,r,n;return e=t,(r=[{key:"isShow",value:function(){return"none"!==this.el.css("display")}},{key:"show",value:function(){this.el.show()}},{key:"hide",value:function(){return this.el.hide(),this}},{key:"val",value:function(t){return this.input.val(t)}},{key:"hint",value:function(t){this.input.hint(t)}},{key:"validate",value:function(){var t=this.input,e=this.rule,r=this.tip,n=this.el,i=t.val();return e.required&&/^\s*$/.test(i)?(r.html(ft("validation.required")),n.addClass("error"),!1):!e.type&&!e.pattern||(e.pattern||Gu[e.type]).test(i)?(n.removeClass("error"),!0):(r.html(ft("validation.notMatch")),n.addClass("error"),!1)}}])&&Nu(e.prototype,r),n&&Nu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Bu(t){return(Bu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Uu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Bu(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Bu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Bu(o)?o:String(o)),n)}var i,o}function zu(t,e){return(zu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Hu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Wu(t);if(e){var i=Wu(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Vu(this,r)}}function Vu(t,e){if(e&&("object"===Bu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Wu(t){return(Wu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ku=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zu(t,e)}(o,t);var e,r,n,i=Hu(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var e=new Lu(new Iu("cell",["cell"],"100%",(function(t){return ft("dataValidation.modeType.".concat(t))})),{required:!0},"".concat(ft("dataValidation.range"),":"),100),r=new Lu(new Au("120px","E3 or E3:F12"),{required:!0,pattern:/^([A-Z]{1,2}[1-9]\d*)(:[A-Z]{1,2}[1-9]\d*)?$/}),n=new Lu(new Iu("list",["list","number","date","phone","email"],"100%",(function(t){return ft("dataValidation.type.".concat(t))}),(function(e){return t.criteriaSelected(e)})),{required:!0},"".concat(ft("dataValidation.criteria"),":"),100),a=new Lu(new Iu("be",["be","nbe","eq","neq","lt","lte","gt","gte"],"160px",(function(t){return ft("dataValidation.operator.".concat(t))}),(function(e){return t.criteriaOperatorSelected(e)})),{required:!0}).hide(),s=new Lu(new Au("70px","10"),{required:!0}).hide(),l=new Lu(new Au("70px","100"),{required:!0,type:"number"}).hide(),u=new Lu(new Au("120px","a,b,c"),{required:!0}),f=new Lu(new Au("70px","10"),{required:!0,type:"number"}).hide();return(t=i.call(this,ft("contextmenu.validation"),[c("div","".concat(ne,"-form-fields")).children(e.el,r.el),c("div","".concat(ne,"-form-fields")).children(n.el,a.el,s.el,l.el,f.el,u.el),c("div","".concat(ne,"-buttons")).children(new xr("cancel").on("click",(function(){return t.btnClick("cancel")})),new xr("remove").on("click",(function(){return t.btnClick("remove")})),new xr("save","primary").on("click",(function(){return t.btnClick("save")})))])).mf=e,t.rf=r,t.cf=n,t.of=a,t.minvf=s,t.maxvf=l,t.vf=f,t.svf=u,t.change=function(){},t}return e=o,(r=[{key:"showVf",value:function(t){var e="date"===t?"2018-11-12":"10",r=this.vf;r.input.hint(e),r.show()}},{key:"criteriaSelected",value:function(t){var e=this.of,r=this.minvf,n=this.maxvf,i=this.vf,o=this.svf;"date"===t||"number"===t?(e.show(),r.rule.type=t,n.rule.type=t,"date"===t?(r.hint("2018-11-12"),n.hint("2019-11-12")):(r.hint("10"),n.hint("100")),r.show(),n.show(),i.hide(),o.hide()):("list"===t?o.show():o.hide(),i.hide(),e.hide(),r.hide(),n.hide())}},{key:"criteriaOperatorSelected",value:function(t){if(t){var e=this.minvf,r=this.maxvf,n=this.vf;if("be"===t||"nbe"===t)e.show(),r.show(),n.hide();else{var i=this.cf.val();n.rule.type=i,"date"===i?n.hint("2018-11-12"):n.hint("10"),n.show(),e.hide(),r.hide()}}}},{key:"btnClick",value:function(t){if("cancel"===t)this.hide();else if("remove"===t)this.change("remove"),this.hide();else if("save"===t){for(var e=["mf","rf","cf","of","svf","vf","minvf","maxvf"],r=0;r<e.length;r+=1){var n=this[e[r]];if(n.isShow()&&!n.validate())return}var i=this.mf.val(),o=this.rf.val(),a=this.cf.val(),s=this.of.val(),l=this.svf.val();"number"!==a&&"date"!==a||(l="be"===s||"nbe"===s?[this.minvf.val(),this.maxvf.val()]:this.vf.val()),this.change("save",i,o,{type:a,operator:s,required:!1,value:l}),this.hide()}}},{key:"setValue",value:function(t){if(t){var e=this.mf,r=this.rf,n=this.cf,i=this.of,o=this.svf,a=this.vf,s=this.minvf,l=this.maxvf,c=t.mode,u=t.ref,f=t.validator||{type:"list"},h=f.type,p=f.operator,d=f.value;e.val(c||"cell"),r.val(u),n.val(h),i.val(p),Array.isArray(d)?(s.val(d[0]),l.val(d[1])):(o.val(d||""),a.val(d||"")),this.criteriaSelected(h),this.criteriaOperatorSelected(p)}this.show()}}])&&Uu(e.prototype,r),n&&Uu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(Tu);function Yu(t){return(Yu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Yu(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Yu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Yu(o)?o:String(o)),n)}var i,o}function qu(t){return c("div","".concat(ne,"-item ").concat(t))}function $u(t){var e=this;return qu("state").child(ft("sort.".concat(t))).on("click.stop",(function(){return e.itemClick(t)}))}function Ju(t){var e=this,r=this.filterbEl,n=this.filterValues;r.html(""),Object.keys(t).forEach((function(i,o){var a=t[i],s=n.includes(i)?"checked":"";r.child(c("div","".concat(ne,"-item state ").concat(s)).on("click.stop",(function(){return e.filterClick(o,i)})).children(""===i?ft("filter.empty"):i,c("div","label").html("(".concat(a,")"))))}))}function Zu(){var t=this.filterhEl,e=this.filterValues,r=this.values;t.html("".concat(e.length," / ").concat(r.length)),t.checked(e.length===r.length)}var Qu=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.filterbEl=c("div","".concat(ne,"-body")),this.filterhEl=c("div","".concat(ne,"-header state")).on("click.stop",(function(){return e.filterClick(0,"all")})),this.el=c("div","".concat(ne,"-sort-filter")).children(this.sortAscEl=$u.call(this,"asc"),this.sortDescEl=$u.call(this,"desc"),qu("divider"),c("div","".concat(ne,"-filter")).children(this.filterhEl,this.filterbEl),c("div","".concat(ne,"-buttons")).children(new xr("cancel").on("click",(function(){return e.btnClick("cancel")})),new xr("ok","primary").on("click",(function(){return e.btnClick("ok")})))).hide(),this.ci=null,this.sortDesc=null,this.values=null,this.filterValues=[]}var e,r,n;return e=t,(r=[{key:"btnClick",value:function(t){if("ok"===t){var e=this.ci,r=this.sort,n=this.filterValues;this.ok&&this.ok(e,r,"in",n)}this.hide()}},{key:"itemClick",value:function(t){this.sort=t;var e=this.sortAscEl,r=this.sortDescEl;e.checked("asc"===t),r.checked("desc"===t)}},{key:"filterClick",value:function(t,e){var r=this.filterbEl,n=this.filterValues,i=this.values,o=r.children();"all"===e?o.length===n.length?(this.filterValues=[],o.forEach((function(t){return c(t).checked(!1)}))):(this.filterValues=Array.from(i),o.forEach((function(t){return c(t).checked(!0)}))):c(o[t]).toggle("checked")?n.push(e):n.splice(n.findIndex((function(t){return t===e})),1),Zu.call(this)}},{key:"set",value:function(t,e,r,n){this.ci=t;var i=this.sortAscEl,o=this.sortDescEl;null!==n?(this.sort=n.order,i.checked(n.asc()),o.checked(n.desc())):(this.sortDesc=null,i.checked(!1),o.checked(!1)),this.values=Object.keys(e),this.filterValues=r?Array.from(r.value):Object.keys(e),Ju.call(this,e,r),Zu.call(this)}},{key:"setOffset",value:function(t){var e=this;this.el.offset(t).show();var r=1;Qt(this.el,(function(){r<=0&&e.hide(),r-=1}))}},{key:"show",value:function(){this.el.show()}},{key:"hide",value:function(){this.el.hide(),Zt(this.el)}}])&&Xu(e.prototype,r),n&&Xu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function tf(t,e){var r=c("div","".concat(ne,"-toast")),n=c("div","".concat(ne,"-dimmer active"));r.children(c("div","".concat(ne,"-toast-header")).children(new Ye("close").on("click.stop",(function(){return document.body.removeChild(r.el),void document.body.removeChild(n.el)})),t),c("div","".concat(ne,"-toast-content")).html(e)),document.body.appendChild(r.el),document.body.appendChild(n.el);var i=r.box(),o=i.width,a=i.height,s=document.documentElement,l=s.clientHeight,u=s.clientWidth;r.offset({left:(u-o)/2,top:(l-a)/3})}function ef(t){return(ef="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==ef(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ef(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===ef(o)?o:String(o)),n)}var i,o}function nf(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return of(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return of(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function of(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function af(t,e){var r,n=this;return function(){for(var i=n,o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];var l=a;r||(r=setTimeout((function(){r=null,t.apply(i,l)}),e))}}function sf(){var t=this.data,e=this.verticalScrollbar,r=this.horizontalScrollbar,n=t.getSelectedRect(),i=n.l,o=n.t,a=n.left,s=n.top,l=n.width,c=n.height,u=this.getTableOffset();if(Math.abs(a)+l>u.width)r.move({left:i+l-u.width});else{var f=t.freezeTotalWidth();a<f&&r.move({left:i-1-f})}if(Math.abs(s)+c>u.height)e.move({top:o+c-u.height-1});else{var h=t.freezeTotalHeight();s<h&&e.move({top:o-1-h})}}function lf(t,e,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(-1!==e||-1!==r){var o=this.table,a=this.selector,s=this.toolbar,l=this.data,c=this.contextMenu,u=l.getCell(e,r);t?(a.setEnd(e,r,i),this.trigger("cells-selected",u,a.range)):(a.set(e,r,n),this.trigger("cell-selected",u,e,r)),c.setMode(-1===e||-1===r?"row-col":"range"),s.reset(),o.render()}}function cf(t,e){var r=this.selector,n=this.data,i=n.rows,o=n.cols,a=nf(r.indexes,2),s=a[0],l=a[1],c=r.range,u=c.eri,f=c.eci;if(t){var h=nf(r.moveIndexes,2);s=h[0],l=h[1]}"left"===e?l>0&&(l-=1):"right"===e?(f!==l&&(l=f),l<o.len-1&&(l+=1)):"up"===e?s>0&&(s-=1):"down"===e?(u!==s&&(s=u),s<i.len-1&&(s+=1)):"row-first"===e?l=0:"row-last"===e?l=o.len-1:"col-first"===e?s=0:"col-last"===e&&(s=i.len-1),t&&(r.moveIndexes=[s,l]),lf.call(this,t,s,l),sf.call(this)}function uf(t){if(0===t.buttons&&t.target.className!=="".concat(ne,"-resizer-hover")){var e=t.offsetX,r=t.offsetY,n=this.rowResizer,i=this.colResizer,o=this.tableEl,a=this.data,s=a.rows,l=a.cols;if(e>l.indexWidth&&r>s.height)return n.hide(),void i.hide();var c=o.box(),u=a.getCellRectByXY(t.offsetX,t.offsetY);u.ri>=0&&-1===u.ci?(u.width=l.indexWidth,n.show(u,{width:c.width}),s.isHide(u.ri-1)?n.showUnhide(u.ri):n.hideUnhide()):n.hide(),-1===u.ri&&u.ci>=0?(u.height=s.height,i.show(u,{height:c.height}),l.isHide(u.ci-1)?i.showUnhide(u.ci):i.hideUnhide()):i.hide()}}function ff(t){var e=this.verticalScrollbar,r=this.horizontalScrollbar,n=this.data,i=e.scroll().top,o=r.scroll().left,a=n.rows,s=n.cols,l=t.deltaY,c=t.deltaX,u=function(t,e){var r=t,n=0;do{n=e(r),r+=1}while(n<=0);return n},f=function(t){if(t>0){var r=n.scroll.ri+1;if(r<a.len){var o=u(r,(function(t){return a.getHeight(t)}));e.move({top:i+o-1})}}else{var s=n.scroll.ri-1;if(s>=0){var l=u(s,(function(t){return a.getHeight(t)}));e.move({top:0===s?0:i-l})}}},h=Math.abs(l),p=Math.abs(c),d=Math.max(h,p);/Firefox/i.test(window.navigator.userAgent)&&af(f(t.detail),50),d===p&&af(function(t){if(t>0){var e=n.scroll.ci+1;if(e<s.len){var i=u(e,(function(t){return s.getWidth(t)}));r.move({left:o+i-1})}}else{var a=n.scroll.ci-1;if(a>=0){var l=u(a,(function(t){return s.getWidth(t)}));r.move({left:0===a?0:o-l})}}}(c),50),d===h&&af(f(l),50)}function hf(t,e){var r=this.verticalScrollbar,n=this.horizontalScrollbar,i=r.scroll().top,o=n.scroll().left;"left"===t||"right"===t?n.move({left:o-e}):"up"!==t&&"down"!==t||r.move({top:i-e})}function pf(){var t=this.data,e=this.verticalScrollbar,r=this.getTableOffset().height,n=t.exceptRowTotalHeight(0,-1);e.set(r,t.rows.totalHeight()-n)}function df(){var t=this.data,e=this.horizontalScrollbar,r=this.getTableOffset().width;t&&e.set(r,t.cols.totalWidth())}function yf(){var t=this.selector,e=this.data,r=this.editor,n=nf(e.freeze,2),i=n[0],o=n[1];if(i>0||o>0){var a=e.freezeTotalWidth(),s=e.freezeTotalHeight();r.setFreezeLengths(a,s)}t.resetAreaOffset()}function vf(){this.table.render()}function gf(){var t=this.tableEl,e=this.overlayerEl,r=this.overlayerCEl,n=this.table,i=this.toolbar,o=this.selector,a=this.el,s=this.getTableOffset(),l=this.getRect();t.attr(l),e.offset(l),r.offset(s),a.css("width","".concat(l.width,"px")),pf.call(this),df.call(this),yf.call(this),n.render(),i.reset(),o.reset()}function bf(){var t=this.data,e=this.selector;t.clearClipboard(),e.hideClipboard()}function mf(t){var e=this.data,r=this.selector;"read"!==e.settings.mode&&(e.copy(),e.copyToSystemClipboard(t),r.showClipboard())}function wf(){var t=this.data,e=this.selector;"read"!==t.settings.mode&&(t.cut(),e.showClipboard())}function _f(t,e){var r=this,n=this.data;if("read"!==n.settings.mode)if(n.clipboard.isClear()){n.pasteFromSystemClipboard((function(){return gf.call(r)}),(function(t){r.trigger("pasted-clipboard",t)}))}else if(n.paste(t,(function(t){return tf("Tip",t)})))gf.call(this);else if(e){var i=e.clipboardData.getData("text/plain");this.data.pasteFromText(i),gf.call(this)}}function Sf(){this.data.hideRowsOrCols(),gf.call(this)}function Of(t,e){this.data.unhideRowsOrCols(t,e),gf.call(this)}function xf(){this.data.autofilter(),gf.call(this)}function Pf(){var t=this.toolbar;t.paintformatActive()&&(_f.call(this,"format"),bf.call(this),t.paintformatToggle())}function kf(t){var e=this,r=this.selector,n=this.data,i=this.table,o=this.sortFilter,a=t.offsetX,s=t.offsetY,l=t.target.className==="".concat(ne,"-selector-corner"),c=n.getCellRectByXY(a,s),u=c.left,f=c.top,h=c.width,p=c.height,d=c.ri,y=c.ci,v=n.autoFilter;if(v.includes(d,y)&&u+h-20<a&&f+p-20<s){var g=v.items(y,(function(t,e){return n.rows.getCell(t,e)}));return o.hide(),o.set(y,g,v.getFilter(y),v.getSort(y)),void o.setOffset({left:u,top:f+p+2})}t.shiftKey||(l?r.showAutofill(d,y):lf.call(this,!1,d,y),te(window,(function(t){var i=n.getCellRectByXY(t.offsetX,t.offsetY);d=i.ri,y=i.ci,l?r.showAutofill(d,y):1!==t.buttons||t.shiftKey||lf.call(e,!0,d,y,!0,!0)}),(function(){l&&r.arange&&"read"!==n.settings.mode&&n.autofill(r.arange,"all",(function(t){return tf("Tip",t)}))&&i.render(),r.hideAutofill(),Pf.call(e)}))),l||1!==t.buttons||t.shiftKey&&lf.call(this,!0,d,y)}function Cf(){var t=this.editor,e=this.data.getSelectedRect(),r=this.getTableOffset(),n="top";e.top>r.height/2&&(n="bottom"),t.setOffset(e,n)}function Tf(){var t=this.editor,e=this.data;"read"!==e.settings.mode&&(Cf.call(this),t.setCell(e.getSelectedCell(),e.getSelectedValidator()),bf.call(this))}function jf(t){var e=this,r=this.data,n=this.table,i=this.selector;r.scrolly(t,(function(){i.resetBRLAreaOffset(),Cf.call(e),n.render()}))}function Ef(t){var e=this,r=this.data,n=this.table,i=this.selector;r.scrollx(t,(function(){i.resetBRTAreaOffset(),Cf.call(e),n.render()}))}function Af(t){var e=this,r=this.data,n=this.table,i=this.selector;r.sync_scrolly(t,(function(){i.resetBRLAreaOffset(),Cf.call(e),n.render()}))}function Rf(t){var e=this,r=this.data,n=this.table,i=this.selector;r.sync_scrollx(t,(function(){i.resetBRTAreaOffset(),Cf.call(e),n.render()}))}function Mf(t,e){var r=t.ri,n=this.table,i=this.selector,o=this.data;o.rows.setHeight(r,e),o.setRowHeight(r,e),n.render(),i.resetAreaOffset(),pf.call(this),Cf.call(this)}function Ff(t,e){var r=t.ci,n=this.table,i=this.selector,o=this.data;o.cols.setWidth(r,e),o.setColWidth(r,e),n.render(),i.resetAreaOffset(),df.call(this),Cf.call(this)}function If(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"finished",r=this.data,n=this.table;if("read"!==r.settings.mode){r.setSelectedCellText(t,e);var i=r.selector,o=i.ri,a=i.ci;"finished"===e?n.render():this.trigger("cell-edited",t,o,a)}}function Df(t){var e=this.data;"read"!==e.settings.mode&&("insert-row"===t?e.insert("row"):"delete-row"===t?e.delete("row"):"insert-column"===t?e.insert("column"):"delete-column"===t?e.delete("column"):"delete-cell"===t?e.deleteCell():"delete-cell-format"===t?e.deleteCell("format"):"delete-cell-text"===t?e.deleteCell("text"):"cell-printable"===t?e.setSelectedCellAttr("printable",!0):"cell-non-printable"===t?e.setSelectedCellAttr("printable",!1):"cell-editable"===t?e.setSelectedCellAttr("editable",!0):"cell-non-editable"===t&&e.setSelectedCellAttr("editable",!1),bf.call(this),gf.call(this))}function Nf(t,e){var r=this.data;if("undo"===t)this.undo();else if("redo"===t)this.redo();else if("print"===t)this.print.preview();else if("paintformat"===t)!0===e?mf.call(this):bf.call(this);else if("clearformat"===t)Df.call(this,"delete-cell-format");else if("link"===t);else if("chart"===t);else if("autofilter"===t)xf.call(this);else if("freeze"===t)if(e){var n=r.selector,i=n.ri,o=n.ci;this.freeze(i,o)}else this.freeze(0,0);else"overlayer"===t?this.enableOverlayer(e):(r.setSelectedCellAttr(t,e),"formula"!==t||r.selector.multiple()||Tf.call(this),gf.call(this))}function Gf(t,e,r,n){this.data.setAutoFilter(t,e,r,n),gf.call(this)}function Lf(){var t=this,e=this.selector,r=this.overlayerEl,n=this.rowResizer,i=this.colResizer,o=this.verticalScrollbar,a=this.horizontalScrollbar,s=this.editor,l=this.contextMenu,c=this.toolbar,u=this.modalValidation,f=this.sortFilter;r.on("mousemove",(function(e){uf.call(t,e)})).on("mousedown",(function(e){s.clear(),l.hide(),2===e.buttons?(t.data.xyInSelectedRect(e.offsetX,e.offsetY)||kf.call(t,e),l.setPosition(e.offsetX,e.offsetY),e.stopPropagation()):2===e.detail?Tf.call(t):kf.call(t,e)})).on("mousewheel.stop",(function(e){ff.call(t,e)})).on("mouseout",(function(t){var e=t.offsetX;t.offsetY<=0&&i.hide(),e<=0&&n.hide()})),e.inputChange=function(e){If.call(t,e,"input"),Tf.call(t)},function(t,e){var r=e.move,n=e.end,i=0,o=0;$t(t,"touchstart",(function(t){var e=t.touches[0],r=e.pageX,n=e.pageY;i=r,o=n})),$t(t,"touchmove",(function(t){if(r){var e=t.changedTouches[0],n=e.pageX,a=e.pageY,s=n-i,l=a-o;(Math.abs(s)>10||Math.abs(l)>10)&&(ee(s,l,t,r),i=n,o=a),t.preventDefault()}})),$t(t,"touchend",(function(t){if(n){var e=t.changedTouches[0],r=e.pageX,a=e.pageY;ee(r-i,a-o,t,n)}}))}(r.el,{move:function(e,r){hf.call(t,e,r)}}),c.change=function(e,r){return Nf.call(t,e,r)},f.ok=function(e,r,n,i){return Gf.call(t,e,r,n,i)},n.finishedFn=function(e,r){Mf.call(t,e,r)},i.finishedFn=function(e,r){Ff.call(t,e,r)},n.unhideFn=function(e){Of.call(t,"row",e)},i.unhideFn=function(e){Of.call(t,"col",e)},o.moveFn=function(e,r){jf.call(t,e,r)},a.moveFn=function(e,r){Ef.call(t,e,r)},s.change=function(e,r){If.call(t,r,e)},u.change=function(e){if("save"===e){for(var r,n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];(r=t.data).addValidation.apply(r,i)}else t.data.removeValidation()},l.itemClick=function(e){"validation"===e?u.setValue(t.data.getSelectedValidation()):"copy"===e?mf.call(t):"cut"===e?wf.call(t):"paste"===e?_f.call(t,"all"):"paste-value"===e?_f.call(t,"text"):"paste-format"===e?_f.call(t,"format"):"hide"===e?Sf.call(t):Df.call(t,e)},$t(window,"resize",(function(){t.reload()})),$t(window,"click",(function(e){t.focusing=r.contains(e.target)})),$t(window,"paste",(function(e){t.focusing&&(_f.call(t,"all",e),e.preventDefault())})),$t(window,"copy",(function(e){t.focusing&&(mf.call(t,e),e.preventDefault())})),$t(window,"keydown",(function(e){if(t.focusing){var r=e.keyCode||e.which,n=e.key,i=e.ctrlKey,o=e.shiftKey,a=e.metaKey;if(i||a)switch(r){case 90:t.undo(),e.preventDefault();break;case 89:t.redo(),e.preventDefault();break;case 67:break;case 88:wf.call(t),e.preventDefault();break;case 85:c.trigger("underline"),e.preventDefault();break;case 86:break;case 37:cf.call(t,o,"row-first"),e.preventDefault();break;case 38:cf.call(t,o,"col-first"),e.preventDefault();break;case 39:cf.call(t,o,"row-last"),e.preventDefault();break;case 40:cf.call(t,o,"col-last"),e.preventDefault();break;case 32:lf.call(t,!1,-1,t.data.selector.ci,!1),e.preventDefault();break;case 66:c.trigger("bold");break;case 73:c.trigger("italic")}else{switch(r){case 32:o&&lf.call(t,!1,t.data.selector.ri,-1,!1);break;case 27:l.hide(),bf.call(t);break;case 37:cf.call(t,o,"left"),e.preventDefault();break;case 38:cf.call(t,o,"up"),e.preventDefault();break;case 39:cf.call(t,o,"right"),e.preventDefault();break;case 40:cf.call(t,o,"down"),e.preventDefault();break;case 9:s.clear(),cf.call(t,!1,o?"left":"right"),e.preventDefault();break;case 13:s.clear(),cf.call(t,!1,o?"up":"down"),e.preventDefault();break;case 8:Df.call(t,"delete-cell-text"),e.preventDefault()}"Delete"===n?(Df.call(t,"delete-cell-text"),e.preventDefault()):r>=65&&r<=90||r>=48&&r<=57||r>=96&&r<=105||"="===e.key?(If.call(t,e.key,"input"),Tf.call(t)):113===r&&Tf.call(t)}}}))}var Bf=function(){function t(e,r){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.eventMap=re();var i=r.settings,o=i.view,a=i.showToolbar,s=i.showContextmenu;this.el=c("div","".concat(ne,"-sheet")),this.toolbar=new Su(r,o.width,!a),this.print=new xn(r),e.children(this.toolbar.el,this.el,this.print.el),this.data=r,this.tableEl=c("div","".concat(ne,"-table")),this.rowResizer=new se(!1,r.rows.height),this.colResizer=new se(!0,r.cols.minWidth),this.verticalScrollbar=new ue(!0),this.horizontalScrollbar=new ue(!1),this.editor=new vr(tn,(function(){return n.getTableOffset()}),r.rows.height),this.modalValidation=new Ku,this.contextMenu=new Mn((function(){return n.getRect()}),!s),this.selector=new Ee(r),this.overlayerCEl=c("div","".concat(ne,"-overlayer-content")).children(this.editor.el,this.selector.el),this.overlayerEl=c("div","".concat(ne,"-overlayer")).child(this.overlayerCEl),this.sortFilter=new Qu,this.el.children(this.tableEl,this.overlayerEl.el,this.rowResizer.el,this.colResizer.el,this.verticalScrollbar.el,this.horizontalScrollbar.el,this.contextMenu.el,this.modalValidation.el,this.sortFilter.el),this.table=new Bi(this.tableEl.el,r),Lf.call(this),gf.call(this),lf.call(this,!1,0,0),this.sync_sheets=[]}var e,r,n;return e=t,(r=[{key:"exportData",value:function(){return this.data.getData()}},{key:"setLayer",value:function(){this.table.setlayer()}},{key:"on",value:function(t,e){return this.eventMap.on(t,e),this}},{key:"trigger",value:function(t){for(var e=this.eventMap,r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];e.fire(t,n)}},{key:"resetData",value:function(t){this.editor.clear(),this.data=t,pf.call(this),df.call(this),this.toolbar.resetData(t),this.print.resetData(t),this.selector.resetData(t),this.table.resetData(t),this.setLayer()}},{key:"loadData",value:function(t){return this.data.setData(t),this.setLayer(),gf.call(this),this}},{key:"freeze",value:function(t,e){return this.data.setFreeze(t,e),gf.call(this),this}},{key:"undo",value:function(){this.data.undo(),gf.call(this)}},{key:"redo",value:function(){this.data.redo(),gf.call(this)}},{key:"reload",value:function(){return gf.call(this),this}},{key:"sync",value:function(){vf.call(this)}},{key:"sync_movex",value:function(t){Rf.call(this,t)}},{key:"sync_movey",value:function(t){Af.call(this,t)}},{key:"getRect",value:function(){var t=this.data;return{width:t.viewWidth(),height:t.viewHeight()}}},{key:"getTableOffset",value:function(){var t=this.data,e=t.rows,r=t.cols,n=this.getRect(),i=n.width,o=n.height;return{width:i-r.indexWidth,height:o-e.height,left:r.indexWidth,top:e.height}}},{key:"enableOverlayer",value:function(t){t?this.overlayerEl.show():this.overlayerEl.hide()}}])&&rf(e.prototype,r),n&&rf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Uf(t){return(Uf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zf(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||Vf(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hf(t){return function(t){if(Array.isArray(t))return Wf(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Vf(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vf(t,e){if(t){if("string"==typeof t)return Wf(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Wf(t,e):void 0}}function Wf(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Kf(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Yf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,o=void 0,o=function(t,e){if("object"!==Uf(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Uf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===Uf(o)?o:String(o)),n)}var i,o}function Xf(t,e,r){return e&&Yf(t.prototype,e),r&&Yf(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function qf(t,e){return(qf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function $f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Zf(t);if(e){var i=Zf(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Jf(this,r)}}function Jf(t,e){if(e&&("object"===Uf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Zf(t){return(Zf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Qf=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qf(t,e)}(r,t);var e=$f(r);function r(t){var n;Kf(this,r);var i=new Ye("ellipsis");return(n=e.call(this,i,"auto",!1,"top-left")).contentClick=t,n}return Xf(r,[{key:"reset",value:function(t){var e=this,r=t.map((function(t,r){return c("div","".concat(ne,"-item")).css("width","150px").css("font-weight","normal").on("click",(function(){e.contentClick(r),e.hide()})).child(t)}));this.setContentChildren.apply(this,Hf(r))}},{key:"setTitle",value:function(){}}]),r}(so),th=[{key:"delete",title:ht("contextmenu.deleteSheet")}];function eh(t){var e=this;return c("div","".concat(ne,"-item")).child(t.title()).on("click",(function(){e.itemClick(t.key),e.hide()}))}function rh(){var t=this;return th.map((function(e){return eh.call(t,e)}))}var nh=function(){function t(){var e;Kf(this,t),this.el=(e=c("div","".concat(ne,"-contextmenu")).css("width","160px")).children.apply(e,Hf(rh.call(this))).hide(),this.itemClick=function(){}}return Xf(t,[{key:"hide",value:function(){var t=this.el;t.hide(),Zt(t)}},{key:"setOffset",value:function(t){var e=this.el;e.offset(t),e.show(),Qt(e)}}]),t}(),ih=function(){function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};Kf(this,t),this.swapFunc=n,this.updateFunc=o,this.dataNames=[],this.activeEl=null,this.deleteEl=null,this.items=[],this.moreEl=new Qf((function(t){e.clickSwap2(e.items[t])})),this.contextMenu=new nh,this.contextMenu.itemClick=i,this.el=c("div","".concat(ne,"-bottombar")).children(this.contextMenu.el,this.menuEl=c("ul","".concat(ne,"-menu")).child(c("li","").children(new Ye("add").on("click",(function(){r()})),c("span","").child(this.moreEl))))}return Xf(t,[{key:"addItem",value:function(t,e,r){var n=this;this.dataNames.push(t);var i=c("li",e?"active":"").child(t);i.on("click",(function(){n.clickSwap2(i)})).on("contextmenu",(function(t){if("read"!==r.mode){var e=t.target,o=e.offsetLeft,a=e.offsetHeight;n.contextMenu.setOffset({left:o,bottom:a+1}),n.deleteEl=i}})).on("dblclick",(function(){if("read"!==r.mode){var t=i.html(),e=new Au("auto","");e.val(t),e.input.on("blur",(function(e){var r=e.target.value,i=n.dataNames.findIndex((function(e){return e===t}));n.renameItem(i,r)})),i.html("").child(e.el),e.focus()}})),e&&this.clickSwap(i),this.items.push(i),this.menuEl.child(i),this.moreEl.reset(this.dataNames)}},{key:"renameItem",value:function(t,e){this.dataNames.splice(t,1,e),this.moreEl.reset(this.dataNames),this.items[t].html("").child(e),this.updateFunc(t,e)}},{key:"clear",value:function(){var t=this;this.items.forEach((function(e){t.menuEl.removeChild(e.el)})),this.items=[],this.dataNames=[],this.moreEl.reset(this.dataNames)}},{key:"deleteItem",value:function(){var t=this.activeEl,e=this.deleteEl;if(this.items.length>1){var r=this.items.findIndex((function(t){return t===e}));if(this.items.splice(r,1),this.dataNames.splice(r,1),this.menuEl.removeChild(e.el),this.moreEl.reset(this.dataNames),t===e){var n=zf(this.items,1)[0];return this.activeEl=n,this.activeEl.toggle(),[r,0]}return[r,-1]}return[-1]}},{key:"clickSwap2",value:function(t){var e=this.items.findIndex((function(e){return e===t}));this.clickSwap(t),this.activeEl.toggle(),this.swapFunc(e)}},{key:"clickSwap",value:function(t){null!==this.activeEl&&this.activeEl.toggle(),this.activeEl=t}}]),t}();r(59);function oh(t){return(oh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ah(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return sh(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sh(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sh(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function lh(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ch(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?lh(Object(r),!0).forEach((function(e){uh(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lh(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function uh(t,e,r){return(e=ph(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ph(n.key),n)}}function ph(t){var e=function(t,e){if("object"!==oh(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==oh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===oh(e)?e:String(e)}var dh=function(){function t(e){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};fh(this,t);var i=e;this.options=ch({showBottomBar:!0},n),this.sheetIndex=1,this.datas=[],"string"==typeof e&&(i=document.querySelector(e)),this.bottombar=this.options.showBottomBar?new ih((function(){if("read"!==r.options.mode){var t=r.addSheet();r.sheet.resetData(t)}}),(function(t){var e=r.datas[t];r.sheet.resetData(e)}),(function(){r.deleteSheet()}),(function(t,e){r.datas[t].name=e,r.sheet.trigger("change")})):null,this.data=this.addSheet();var o=c("div","".concat(ne)).on("contextmenu",(function(t){return t.preventDefault()}));i.appendChild(o.el),this.sheet=new Bf(o,this.data),this.data.verticalAddSplitSheet(this.sheet2),null!==this.bottombar&&o.child(this.bottombar.el)}var e,r,n;return e=t,n=[{key:"locale",value:function(t,e){pt(t,e)}}],(r=[{key:"getEl",value:function(){return this.rootEl2}},{key:"addSheet",value:function(t){var e=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t||"sheet".concat(this.sheetIndex),i=new Kt(n,this.options);return i.change=function(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];(t=e.sheet).trigger.apply(t,["change"].concat(n))},this.datas.push(i),null!==this.bottombar&&this.bottombar.addItem(n,r,this.options),this.sheetIndex+=1,i}},{key:"deleteSheet",value:function(){if(null!==this.bottombar){var t=ah(this.bottombar.deleteItem(),2),e=t[0],r=t[1];e>=0&&(this.datas.splice(e,1),r>=0&&this.sheet.resetData(this.datas[r]),this.sheet.trigger("change"))}}},{key:"loadData",value:function(t){var e=Array.isArray(t)?t:[t];if(null!==this.bottombar&&this.bottombar.clear(),this.datas=[],e.length>0)for(var r=0;r<e.length;r+=1){var n=e[r],i=this.addSheet(n.name,0===r);i.setData(n),0===r&&this.sheet.resetData(i)}return this}},{key:"getData",value:function(){return this.datas.map((function(t){return t.getData()}))}},{key:"cellText",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return this.datas[n].setCellText(t,e,r,"finished"),this}},{key:"cell",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.datas[r].getCell(t,e)}},{key:"cellStyle",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.datas[r].getCellStyle(t,e)}},{key:"reRender",value:function(){return this.sheet.table.render(),this}},{key:"on",value:function(t,e){return this.sheet.on(t,e),this}},{key:"validate",value:function(){return this.data.validations.errors.size<=0}},{key:"change",value:function(t){return this.sheet.on("change",t),this}}])&&hh(e.prototype,r),n&&hh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),yh=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new dh(t,e)};window&&(window.x_spreadsheet=yh,window.x_spreadsheet.locale=function(t,e){return pt(t,e)});e.default=dh}]);
//# sourceMappingURL=xspreadsheet.js.map